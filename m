Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail.renesas.com ([202.234.163.13]:41539 "EHLO
	mail05.idc.renesas.com" rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org
	with ESMTP id S1751520AbZASJCo (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Mon, 19 Jan 2009 04:02:44 -0500
Date: Mon, 19 Jan 2009 18:02:24 +0900
From: morimoto.kuninori@renesas.com
Subject: Re: [PATCH v2 2/2] ov772x: Add image flip support
In-reply-to: <Pine.LNX.4.64.0901190844330.4142@axis700.grange>
To: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Cc: Linux Media <linux-media@vger.kernel.org>
Message-id: <u4ozvpt27.wl%morimoto.kuninori@renesas.com>
MIME-version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-type: text/plain; charset=US-ASCII
References: <u63kbpxm9.wl%morimoto.kuninori@renesas.com>
 <Pine.LNX.4.64.0901190844330.4142@axis700.grange>
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>


Dear Guennadi

Thank you for checking patch


> > @@ -768,8 +844,17 @@ static int ov772x_set_fmt(struct soc_camera_device *icd,
> >  	 * set COM3
> >  	 */
> >  	val = priv->fmt->com3;
> > +	if (priv->info->flags & OV772X_FLAG_VFLIP)
> > +		val |= VFLIP_IMG;
> > +	if (priv->info->flags & OV772X_FLAG_HFLIP)
> > +		val |= HFLIP_IMG;
> > +
> > +	mask = SWAP_MASK;
> > +	if (IMG_MASK & val)
> > +		mask |= IMG_MASK;
> > +
> >  	ret = ov772x_mask_set(priv->client,
> > -			      COM3, SWAP_MASK, val);
> > +			      COM3, mask, val);
> 
> Do I understand it right, that this throws away any flip control settings 
> performed before S_FMT? You probably want to set priv->fmt->com3 in your 
> set_control and XOR instead of an OR here as well. Or was this 
> intentional?

Sorry, I can not understand what you want to say.
I think set_fmt function set default flip control.
And set_control function change flip on/off.
Therefore OR operation on set_fmt is correct I think.
And set_control use only XOR. priv->fmt->com3 is not needed here.
Do you say should I remember flip value ?
Or am I wrong understanding ?

Best regards
--
Kuninori Morimoto
 
