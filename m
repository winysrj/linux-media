Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail-pa0-f41.google.com ([209.85.220.41]:51064 "EHLO
	mail-pa0-f41.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1758980AbbA2Vwd (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Thu, 29 Jan 2015 16:52:33 -0500
Received: by mail-pa0-f41.google.com with SMTP id kq14so43871391pab.0
        for <linux-media@vger.kernel.org>; Thu, 29 Jan 2015 13:52:32 -0800 (PST)
MIME-Version: 1.0
Date: Thu, 29 Jan 2015 23:52:32 +0200
Message-ID: <CANZNk81X8egiGgnupeRVo9HPStH3rRcPdLYWQifcHKnOLUMivg@mail.gmail.com>
Subject: solo6x10: all interrupts for all cards handled by CPU0, no balancing
 - why?
From: Andrey Utkin <andrey.krieger.utkin@gmail.com>
To: kernel-mentors@selenic.com,
	Linux Media <linux-media@vger.kernel.org>,
	OSUOSL Drivers <devel@driverdev.osuosl.org>
Content-Type: text/plain; charset=ISO-8859-1
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

Hi, having another "card freeze" issue with linux-next (tag
next-20150128) on a server running 3 solo6110 cards. The freeze
happens after 3 days or so. Much better than 30 minutes, which was the
case before the recent enhancement by Krzysztof Halasa.
This is Ubuntu Trusty. There's /usr/sbin/irqbalance process running.
See interrupt stats here:
https://gist.github.com/krieger-od/f8d99080d6fc30dad3d2
I wonder why all solo6x10 interrupts happen on CPU0, while there are 3
more cores.

However, I have got an idea reading this:
Irqbalance is a daemon to help balance the cpu load generated by interrupts
across all of a systems cpus.  Irqbalance identifies the highest volume
interrupt sources, and isolates them to a single unique cpu, so that load is
spread as much as possible over an entire processor set, while minimizing cache
hit rates for irq handlers.

Disabled irqbalance launch on boot. Rebooted, and the host got down up to now :(
Any comments, except laugh? :)

-- 
Andrey Utkin
