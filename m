Return-path: <mchehab@pedra>
Received: from mail-bw0-f46.google.com ([209.85.214.46]:57314 "EHLO
	mail-bw0-f46.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751688Ab0J3BPq (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Fri, 29 Oct 2010 21:15:46 -0400
Received: by bwz11 with SMTP id 11so3074525bwz.19
        for <linux-media@vger.kernel.org>; Fri, 29 Oct 2010 18:15:45 -0700 (PDT)
MIME-Version: 1.0
Reply-To: h.ordiales@gmail.com
In-Reply-To: <4CCB5790.60904@iki.fi>
References: <4CC25F60.7050106@redhat.com> <AANLkTimEQPK-HvM7BPrMt4LH=x2Gq7tCZfq0trzmkAcU@mail.gmail.com>
 <4CCB5790.60904@iki.fi>
From: =?ISO-8859-1?Q?Hern=E1n_Ordiales?= <h.ordiales@gmail.com>
Date: Fri, 29 Oct 2010 22:15:29 -0300
Message-ID: <AANLkTikMX5s06Aa5wyVOYJigaUJpLJaLeL4nv=FKKruO@mail.gmail.com>
Subject: Re: V4L/DVB/IR patches pending merge
To: Antti Palosaari <crope@iki.fi>
Cc: Mauro Carvalho Chehab <mchehab@redhat.com>,
	Patrick Boettcher <pboettcher@kernellabs.com>,
	Manu Abraham <abraham.manu@gmail.com>,
	Jonathan Corbet <corbet@lwn.net>,
	Guennadi Liakhovetski <g.liakhovetski@gmx.de>,
	"Igor M. Liplianin" <liplianin@me.by>,
	LMML <linux-media@vger.kernel.org>
Content-Type: multipart/mixed; boundary=0016e6dbdf477f55e70493cb50d0
List-ID: <linux-media.vger.kernel.org>
Sender: <mchehab@pedra>

--0016e6dbdf477f55e70493cb50d0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Fri, Oct 29, 2010 at 8:24 PM, Antti Palosaari <crope@iki.fi> wrote:
> On 10/30/2010 02:02 AM, Hern=E1n Ordiales wrote:
>>
>> 2010/10/23 Mauro Carvalho Chehab<mchehab@redhat.com>:
>>>
>>> This is the list of patches that weren't applied yet. I've made a big
>>> effort starting
>>> last weekend to handle everything I could. All pull requests were
>>> addressed. There are still
>>> 43 patches on my queue.
>>>
>>> Please help me to clean the list.
>>>
>>> This is what we have currently:
>>
>> [snip]
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=3D=3D Waiting for Patrick Boettcher<pbo=
ettcher@dibcom.fr>
>>> =A0review =3D=3D
>>>
>>> May,25 2010: Adding support to the Geniatech/MyGica SBTVD Stick S870
>>> remote control http://patchwork.kernel.org/patch/102314 =A0Hern=E1n
>>> Ordiales<h.ordiales@gmail.com>
>>> Jul,14 2010: [1/4] drivers/media/dvb: Remove dead Configs
>>> =A0 =A0 =A0 =A0 =A0 http://patchwork.kernel.org/patch/111972 =A0Christi=
an
>>> Dietrich<qy03fugy@stud.informatik.uni-erlangen.de>
>>> Jul,14 2010: [2/4] drivers/media/dvb: Remove undead configs
>>> =A0 =A0 =A0 =A0 =A0 http://patchwork.kernel.org/patch/111973 =A0Christi=
an
>>> Dietrich<qy03fugy@stud.informatik.uni-erlangen.de>
>>>
>>> The first patch is probably broken.
>>>
>>> Hern=E1n,
>>> Could you please re-generate it?
>>
>> Yes, i'm sending it as attachment (regenerated agaisnt trunk, 15168
>> revision)
>>
>> Cheers
>
> Your keytable seems to be wrong since it have both keycode and its
> complement (which is used for error check normally). I think it is NEC
> remote? In that case address byte is typically same for all buttons.

Yes, i know the complement thing . The table was generated by reverse
engineering and i couldn't found the common address so i left in that
way. For example, for '7' button i receive:
dib0700: IR raw 01 01 00 00 07 F8 (len 6)

I think Is not a nec remote, it is a generic one that comes with
mygica/geniatech products. I rebuilt the key table (patch attached)
using '00' as address, is that ok? And leaving it using RC5 protocol
(instead adding a case for dvb_usb_dib0700_ir_proto=3D1)
in this way works ok too

.   default:
.   .   /* RC5 Protocol */
.   .   poll_reply.report_id  =3D buf[0];
.   .   poll_reply.data_state =3D buf[1];
.   .   poll_reply.system     =3D (buf[2] << 8) | buf[3];
.   .   poll_reply.data       =3D buf[4];
.   .   poll_reply.not_data   =3D buf[5];
.   .   break;

+	/* Key codes for the Geniatech/MyGica SBTVD Stick S870 remote
+	   set dvb_usb_dib0700_ir_proto=3D1 */
+	{ 0x0038, KEY_TV }, /* TV/AV */
+	{ 0x000c, KEY_POWER },
+	{ 0x000a, KEY_MUTE },
+	{ 0x002b, KEY_VOLUMEUP },
+	{ 0x002c, KEY_VOLUMEDOWN },
+	{ 0x0012, KEY_CHANNELUP },
+	{ 0x0013, KEY_CHANNELDOWN },
+	{ 0x0001, KEY_1 },
+	{ 0x0002, KEY_2 },
+	{ 0x0003, KEY_3 },
+	{ 0x0004, KEY_4 },
+	{ 0x0005, KEY_5 },
+	{ 0x0006, KEY_6 },
+	{ 0x0007, KEY_7 },
+	{ 0x0008, KEY_8 },
+	{ 0x0009, KEY_9 },
+	{ 0x0000, KEY_0 },
+	{ 0x0016, KEY_PAUSE },
+	{ 0x0017, KEY_PLAY },
+	{ 0x000b, KEY_STOP },
+	{ 0x0026, KEY_REWIND },
+	{ 0x0027, KEY_FASTFORWARD },
+	{ 0x0029, KEY_ESC },
+	{ 0x001f, KEY_RECORD },
+	{ 0x0020, KEY_UP },
+	{ 0x0021, KEY_DOWN },
+	{ 0x0011, KEY_LEFT },
+	{ 0x0010, KEY_RIGHT },
+	{ 0x000d, KEY_OK },
+	{ 0x001e, KEY_PLAYPAUSE }, /* Timeshift */
+	{ 0x000e, KEY_CAMERA }, /* Snapshot */
+	{ 0x0025, KEY_EPG }, /* Info KEY_INFO */
+	{ 0x002d, KEY_MENU }, /* DVD Menu */
+	{ 0x000f, KEY_SCREEN }, /* Full screen toggle */
+	{ 0x0014, KEY_SHUFFLE },




> Antti
> --
> http://palosaari.fi/
>



--=20
Hern=E1n
http://h.ordia.com.ar

--0016e6dbdf477f55e70493cb50d0
Content-Type: text/x-patch; charset=US-ASCII; name="GeniatechMyGicaS870_keytable.patch"
Content-Disposition: attachment;
	filename="GeniatechMyGicaS870_keytable.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_gfvsrw630

IyBIRyBjaGFuZ2VzZXQgcGF0Y2gKIyBVc2VyIGhvcmRpYQojIERhdGUgMTI4ODQwMDEyOSAxMDgw
MAojIE5vZGUgSUQgYjRjNTI1OWExM2NkMWEwNWFmNGFiNTI0MjIzNmFkODhmMmRlMzMxOQojIFBh
cmVudCAgYWJkM2FhYzY2NDRlMWEzMTAyMGY0Y2RmZGVlODRiZGU3Y2ExZTFiNApHZW5pYXRlY2gv
TXlHaWNhIFNCVFZEIFN0aWNrIFM4NzAgcmVtb3RlIGNvbnRyb2wga2V5dGFibGUKCmRpZmYgLXIg
YWJkM2FhYzY2NDRlIC1yIGI0YzUyNTlhMTNjZCBsaW51eC9kcml2ZXJzL21lZGlhL2R2Yi9kdmIt
dXNiL2RpYjA3MDBfZGV2aWNlcy5jCi0tLSBhL2xpbnV4L2RyaXZlcnMvbWVkaWEvZHZiL2R2Yi11
c2IvZGliMDcwMF9kZXZpY2VzLmMJRnJpIEp1bCAwMiAwMDozODo1NCAyMDEwIC0wMzAwCisrKyBi
L2xpbnV4L2RyaXZlcnMvbWVkaWEvZHZiL2R2Yi11c2IvZGliMDcwMF9kZXZpY2VzLmMJRnJpIE9j
dCAyOSAyMTo1NToyOSAyMDEwIC0wMzAwCkBAIC04MzEsNiArODMxLDQ0IEBACiAJeyAweDQ1NDAs
IEtFWV9SRUNPUkQgfSwgLyogRm9udCAnU2l6ZScgZm9yIFRlbGV0ZXh0ICovCiAJeyAweDQ1NDEs
IEtFWV9TQ1JFRU4gfSwgLyogIEZ1bGwgc2NyZWVuIHRvZ2dsZSwgJ0hvbGQnIGZvciBUZWxldGV4
dCAqLwogCXsgMHg0NTQyLCBLRVlfU0VMRUNUIH0sIC8qIFNlbGVjdCB2aWRlbyBpbnB1dCwgJ1Nl
bGVjdCcgZm9yIFRlbGV0ZXh0ICovCisKKwkvKiBLZXkgY29kZXMgZm9yIHRoZSBHZW5pYXRlY2gv
TXlHaWNhIFNCVFZEIFN0aWNrIFM4NzAgcmVtb3RlCisJICAgc2V0IGR2Yl91c2JfZGliMDcwMF9p
cl9wcm90bz0xICovCisJeyAweDAwMzgsIEtFWV9UViB9LCAvKiBUVi9BViAqLworCXsgMHgwMDBj
LCBLRVlfUE9XRVIgfSwKKwl7IDB4MDAwYSwgS0VZX01VVEUgfSwKKwl7IDB4MDAyYiwgS0VZX1ZP
TFVNRVVQIH0sCisJeyAweDAwMmMsIEtFWV9WT0xVTUVET1dOIH0sCisJeyAweDAwMTIsIEtFWV9D
SEFOTkVMVVAgfSwKKwl7IDB4MDAxMywgS0VZX0NIQU5ORUxET1dOIH0sCisJeyAweDAwMDEsIEtF
WV8xIH0sCisJeyAweDAwMDIsIEtFWV8yIH0sCisJeyAweDAwMDMsIEtFWV8zIH0sCisJeyAweDAw
MDQsIEtFWV80IH0sCisJeyAweDAwMDUsIEtFWV81IH0sCisJeyAweDAwMDYsIEtFWV82IH0sCisJ
eyAweDAwMDcsIEtFWV83IH0sCisJeyAweDAwMDgsIEtFWV84IH0sCisJeyAweDAwMDksIEtFWV85
IH0sCisJeyAweDAwMDAsIEtFWV8wIH0sCisJeyAweDAwMTYsIEtFWV9QQVVTRSB9LAorCXsgMHgw
MDE3LCBLRVlfUExBWSB9LAorCXsgMHgwMDBiLCBLRVlfU1RPUCB9LAorCXsgMHgwMDI2LCBLRVlf
UkVXSU5EIH0sCisJeyAweDAwMjcsIEtFWV9GQVNURk9SV0FSRCB9LAorCXsgMHgwMDI5LCBLRVlf
RVNDIH0sCisJeyAweDAwMWYsIEtFWV9SRUNPUkQgfSwKKwl7IDB4MDAyMCwgS0VZX1VQIH0sCisJ
eyAweDAwMjEsIEtFWV9ET1dOIH0sCisJeyAweDAwMTEsIEtFWV9MRUZUIH0sCisJeyAweDAwMTAs
IEtFWV9SSUdIVCB9LAorCXsgMHgwMDBkLCBLRVlfT0sgfSwKKwl7IDB4MDAxZSwgS0VZX1BMQVlQ
QVVTRSB9LCAvKiBUaW1lc2hpZnQgKi8KKwl7IDB4MDAwZSwgS0VZX0NBTUVSQSB9LCAvKiBTbmFw
c2hvdCAqLworCXsgMHgwMDI1LCBLRVlfRVBHIH0sIC8qIEluZm8gS0VZX0lORk8gKi8KKwl7IDB4
MDAyZCwgS0VZX01FTlUgfSwgLyogRFZEIE1lbnUgKi8KKwl7IDB4MDAwZiwgS0VZX1NDUkVFTiB9
LCAvKiBGdWxsIHNjcmVlbiB0b2dnbGUgKi8KKwl7IDB4MDAxNCwgS0VZX1NIVUZGTEUgfSwKIH07
CiAKIC8qIFNUSzc3MDBQOiBIYXVwcGF1Z2UgTm92YS1UIFN0aWNrLCBBVmVyTWVkaWEgVm9sYXIg
Ki8K
--0016e6dbdf477f55e70493cb50d0--
