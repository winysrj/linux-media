Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail.renesas.com ([202.234.163.13]:38905 "EHLO
	mail03.idc.renesas.com" rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org
	with ESMTP id S1751834AbZBWBMG (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Sun, 22 Feb 2009 20:12:06 -0500
Date: Mon, 23 Feb 2009 10:11:46 +0900
From: morimoto.kuninori@renesas.com
Subject: Re: [PATCH 2/2 v2] soc-camera: configure drivers with a default format
 on open
In-reply-to: <Pine.LNX.4.64.0902201737000.5004@axis700.grange>
To: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Cc: Linux Media Mailing List <linux-media@vger.kernel.org>,
	Magnus Damm <magnus.damm@gmail.com>
Message-id: <uiqn2gdnx.wl%morimoto.kuninori@renesas.com>
MIME-version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-type: text/plain; charset=US-ASCII
References: <Pine.LNX.4.64.0902191615000.5156@axis700.grange>
 <Pine.LNX.4.64.0902191616340.5156@axis700.grange>
 <u3ae9zzd9.wl%morimoto.kuninori@renesas.com>
 <Pine.LNX.4.64.0902201737000.5004@axis700.grange>
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>


Dear Guennadi

> Currently soc-camera doesn't set up any image format without an explicit S_FMT.
> It seems this should be supported, since, for example, capture-example.c from
> v4l2-apps by default doesn't issue an S_FMT. This patch configures a default
> image format on open().
(snip)
> Ok, you're right. I do call it now. How about this version?

Thank you for hard work.
but... It doesn't work either in same reason.

I'm not sure for detail.
but meybe there is a problem in the call order.

ov772x_try_fmt is called when soc_camera_open is called.
but sh_mobile_ceu_init_videobuf that set filed to ANY
is called after soc_camera_open.
And ov772x_try_fmt should be called after sh_mobile_ceu_init_videobuf.

Best regards
--
Kuninori Morimoto
 
