Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail.renesas.com ([202.234.163.13]:36547 "EHLO
	mail05.idc.renesas.com" rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org
	with ESMTP id S1751062AbZAZJXS (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Mon, 26 Jan 2009 04:23:18 -0500
Date: Mon, 26 Jan 2009 18:23:04 +0900
From: morimoto.kuninori@renesas.com
Subject: Re: [PATCH] ov772x: add support S_CROP operation.
In-reply-to: <Pine.LNX.4.64.0901260854010.4236@axis700.grange>
To: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Cc: Linux Media <linux-media@vger.kernel.org>
Message-id: <ur62qifpj.wl%morimoto.kuninori@renesas.com>
MIME-version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-type: text/plain; charset=US-ASCII
References: <uskna4qh8.wl%morimoto.kuninori@renesas.com>
 <Pine.LNX.4.64.0901250245440.4969@axis700.grange>
 <uzlheep1l.wl%morimoto.kuninori@renesas.com>
 <Pine.LNX.4.64.0901260854010.4236@axis700.grange>
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>


Dear Guennadi

> > If pixfmt is 0, it said "Format 0 not found" to me.
> 
> Yes, this will be fixed by this:
> 
> http://www.mail-archive.com/linux-media@vger.kernel.org/msg00161.html

wow !!
I will use this. thank you.

> > If sh_mobile_ceu use V4L2_FIELD_NONE on sh_mobile_ceu_init_videobuf,
> > kernel will not run this BUG_ON.
> > But tw9910 and I want sh_mobile_ceu_init_videobuf to use V4L2_FIELD_ANY.
> > Do you remember this problem ?
> 
> Well, I looked through the old emails, but chenged a few things since 
> then, so I am not sure what the behaviour would be like now, if we do 
> switch back to _NONE? It looks like you should be prepared to run without 
> a call to S_FMT, which also means, your ->field should have a value other 
> than _ANY. What would break if you use _ANY now?

hmm. difficult English for me...

if sh_mobile_ceu use ANY
  -> ov772x can not use capture_example.
     -> run BUG_ON

if sh_mobile_ceu use NONE
  -> tw9910 can not works.
     -> try_fmt needs ANY or INTERLACED.

if sh_mobile_ceu use INTERLACED,
ov772x and tw9910 are works well now.
but this is niche fix and I don't know this is correct way or not.

if sh_mobile_ceu use NONE,
tw9910 needs some modify on try_fmt.

> > And capture_example doesn't works even If
> > sh_mobile_ceu_init_videobuf use V4L2_FIELD_NONE.
> > It said "select timeout" to me.
> > I don't know why.
> 
> This is probably because you don't setup a default mode in 
> sh_mobile_ceu_camera.c or ov772x.c if S_FMT is never called. This should 
> be fixed. I'm not sure if other drivers would deliver anything meaningful 
> without a call to S_FMT - has to be tested / fixed...
(snip)
> > In this case, shoud ov772x use defaul color format
> > when S_CROP order ?
> 
> The thing is that older versions of capture.c always called S_FMT, newer 
> ones don't unless forced per "-f" switch.

Yes. Now, sh_mobile_ceu :: set_bus_param must be called to use camera.
We need -f option. Thank you.


Best regards
--
Kuninori Morimoto
 
