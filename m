Return-path: <linux-media-owner@vger.kernel.org>
Received: from mx08-00178001.pphosted.com ([91.207.212.93]:38783 "EHLO
        mx07-00178001.pphosted.com" rhost-flags-OK-OK-OK-FAIL)
        by vger.kernel.org with ESMTP id S1726951AbeHGLHD (ORCPT
        <rfc822;linux-media@vger.kernel.org>);
        Tue, 7 Aug 2018 07:07:03 -0400
From: Hugues FRUCHET <hugues.fruchet@st.com>
To: jacopo mondi <jacopo@jmondi.org>,
        "mchehab@kernel.org" <mchehab@kernel.org>,
        "laurent.pinchart@ideasonboard.com"
        <laurent.pinchart@ideasonboard.com>,
        "maxime.ripard@bootlin.com" <maxime.ripard@bootlin.com>,
        "sam@elite-embedded.com" <sam@elite-embedded.com>,
        "jagan@amarulasolutions.com" <jagan@amarulasolutions.com>,
        "festevam@gmail.com" <festevam@gmail.com>,
        "pza@pengutronix.de" <pza@pengutronix.de>,
        "steve_longerbeam@mentor.com" <steve_longerbeam@mentor.com>,
        "loic.poulain@linaro.org" <loic.poulain@linaro.org>,
        "daniel@zonque.org" <daniel@zonque.org>,
        "Sakari Ailus" <sakari.ailus@iki.fi>
CC: "linux-media@vger.kernel.org" <linux-media@vger.kernel.org>
Subject: Re: [PATCH 2/2] media: ov5640: Fix auto-exposure disabling
Date: Tue, 7 Aug 2018 08:53:23 +0000
Message-ID: <d7dff287-d02c-38cb-3a73-d0c578cb2758@st.com>
References: <1531912743-24767-1-git-send-email-jacopo@jmondi.org>
 <1531912743-24767-3-git-send-email-jacopo@jmondi.org>
 <20180718130407.GU8180@w540>
In-Reply-To: <20180718130407.GU8180@w540>
Content-Language: en-US
Content-Type: text/plain; charset="utf-8"
Content-ID: <16F7CF0EC2164141B8D797BC86D4F54F@st.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

SGkgSmFjb3BvLA0KDQpJbiBzZXJpZSAiW1BBVENIIDAvNV0gRml4IE9WNTY0MCBleHBvc3VyZSAm
IGdhaW4iDQpodHRwczovL3d3dy5tYWlsLWFyY2hpdmUuY29tL2xpbnV4LW1lZGlhQHZnZXIua2Vy
bmVsLm9yZy9tc2cxMzMyNjkuaHRtbA0KSSd2ZSB0cmllZCB0byBjb2xsZWN0IGZpeGVzIGFyb3Vu
ZCBleHBvc3VyZS9nYWluLCBub3Qgb25seSB0aGUgZXhwb3N1cmUgDQpyZWdyZXNzaW9uIGFuZCBJ
IHdvdWxkIHByZWZlciB0byBrZWVwIGl0IGNvbnNpc3RlbnQgd2l0aCB0aGUgYXNzb2NpYXRlZCAN
CnByb2NlZHVyZSB0ZXN0Lg0KTW9yZW92ZXIgSSBkaXNsaWtlIHRoZSBpbnRlcm5hbCB1c2Ugb2Yg
Y29udHJvbCBmcmFtZXdvcmsgZnVuY3Rpb25zIHRvIA0KZGlzYWJsZS9lbmFibGUgZXhwb3N1cmUv
Z2Fpbiwgb24gbXkgb3BpbmlvbiB0aGlzIGhhcyB0byBiZSBrZXB0IHNpbXBsZXINCmJ5IGp1c3Qg
ZGlzYWJsaW5nL2VuYWJsaW5nIHRoZSByaWdodCByZWdpc3RlcnMuDQpXb3VsZCBpdCBiZSBwb3Nz
aWJsZSB0aGF0IHlvdSB0ZXN0IG15IDUgcGF0Y2hlcyBzZXJpZSBvbiB5b3VyIHNpZGUgPw0KDQpC
ZXN0IHJlZ2FyZHMsDQpIdWd1ZXMuDQoNCk9uIDA3LzE4LzIwMTggMDM6MDQgUE0sIGphY29wbyBt
b25kaSB3cm90ZToNCj4gSGkgYWdhaW4sDQo+IA0KPiBPbiBXZWQsIEp1bCAxOCwgMjAxOCBhdCAw
MToxOTowM1BNICswMjAwLCBKYWNvcG8gTW9uZGkgd3JvdGU6DQo+PiBBcyBvZjoNCj4+IGNvbW1p
dCBiZjRhNGI1MThjMjAgKCJtZWRpYTogb3Y1NjQwOiBEb24ndCBmb3JjZSB0aGUgYXV0byBleHBv
c3VyZSBzdGF0ZSBhdA0KPj4gc3RhcnQgdGltZSIpIGF1dG8tZXhwb3N1cmUgZ290IGRpc2FibGVk
IGJlZm9yZSBwcm9ncmFtbWluZyBuZXcgY2FwdHVyZSBtb2RlcyB0bw0KPj4gdGhlIHNlbnNvci4g
VW5mb3J0dW5hdGVseSB0aGUgZnVuY3Rpb24gdXNlZCB0byBkbyB0aGF0IChvdjU2NDBfc2V0X2V4
cG9zdXJlKCkpDQo+PiBkb2VzIG5vdCBlbmFibGUvZGlzYWJsZSBhdXRvLWV4cG9zdXJlIGVuZ2lu
ZSB0aHJvdWdoIHJlZ2lzdGVyIDB4MzUwM1swXSBiaXQsIGJ1dA0KPj4gcHJvZ3JhbXMgcmVnaXN0
ZXJzIFsweDM1MDAgLSAweDM1MDJdIHdoaWNoIHJlcHJlc2VudCB0aGUgZGVzaXJlZCBleHBvc3Vy
ZSB0aW1lDQo+PiB3aGVuIHJ1bm5pbmcgd2l0aCBtYW51YWwgZXhwb3N1cmUuIEFzIGEgcmVzdWx0
LCBhdXRvLWV4cG9zdXJlIHdhcyBub3QgYWN0dWFsbHkNCj4+IGRpc2FibGVkIGF0IGFsbC4NCj4+
DQo+PiBUbyBhY3R1YWxseSBkaXNhYmxlIGF1dG8tZXhwb3N1cmUsIGdvIHRocm91Z2ggdGhlIGNv
bnRyb2wgZnJhbWV3b3JrIGluc3RlYWQgb2YNCj4+IGNhbGxpbmcgb3Y1NjQwX3NldF9leHBvc3Vy
ZSgpIGZ1bmN0aW9uIGRpcmVjdGx5Lg0KPj4NCj4+IEFsc28sIGFzIGF1dG8tZ2FpbiBhbmQgYXV0
by1leHBvc3VyZSBhcmUgZGlzYWJsZWQgdW4tY29uZGl0aW9uYWxseSBidXQgb25seQ0KPj4gcmVz
dG9yZWQgdG8gdGhlaXIgcHJldmlvdXMgdmFsdWVzIGluIG92NTY0MF9zZXRfbW9kZV9kaXJlY3Qo
KSBmdW5jdGlvbiwgbW92ZQ0KPj4gY29udHJvbHMgcmVzdG9yaW5nIHNvIHRoYXQgdGhlaXIgdmFs
dWUgaXMgcmUtcHJvZ3JhbW1lZCBvcHBvcnR1bmVseSBhZnRlcg0KPj4gZWl0aGVyIG92NTY0MF9z
ZXRfbW9kZV9kaXJlY3QoKSBvciBvdjU2NDBfc2V0X21vZGVfZXhwb3N1cmVfY2FsYygpIGhhdmUg
YmVlbg0KPj4gZXhlY3V0ZWQuDQo+Pg0KPj4gRml4ZXM6IGJmNGE0YjUxOGMyMCAoIm1lZGlhOiBv
djU2NDA6IERvbid0IGZvcmNlIHRoZSBhdXRvIGV4cG9zdXJlIHN0YXRlIGF0IHN0YXJ0IHRpbWUi
KQ0KPj4gU2lnbmVkLW9mZi1ieTogSmFjb3BvIE1vbmRpIDxqYWNvcG9Aam1vbmRpLm9yZz4NCj4+
DQo+PiAtLS0NCj4+IElzIGl0IHdvcnRoIGRvaW5nIHdpdGggYXV0by1nYWluIHdoYXQgd2UncmUg
ZG9pbmcgd2l0aCBhdXRvLWV4cG9zdXJlPyBDYWNoZSB0aGUNCj4+IHZhbHVlIGFuZCB0aGVuIHJl
LXByb2dyYW0gaXQgaW5zdGVhZCBvZiB1bmNvbmRpdGlvbmFsbHkgZGlzYWJsZS9lbmFibGUgaXQ/
DQo+IA0KPiBJIGhhdmUgbWlzc2VkIHRoaXMgcGF0Y2ggZnJvbSBIdWd1ZXMgdGhhdCBhZGRyZXNz
IGFsbW9zdCB0aGUgc2FtZQ0KPiBpc3N1ZQ0KPiBodHRwczovL3d3dy5tYWlsLWFyY2hpdmUuY29t
L2xpbnV4LW1lZGlhQHZnZXIua2VybmVsLm9yZy9tc2cxMzMyNjQuaHRtbA0KPiANCj4gSSBmZWVs
IHRoaXMgbmV3IG9uZSBpcyBzaW1wbGVyLCBhbmQgdW5sZXNzIHdlIHdhbnQgdG8gYXZvaWQgZ29p
bmcNCj4gdGhyb3VnaCB0aGUgY29udHJvbCBmcmFtZXdvcmssIGl0IGlzIG5vdCB3b3J0aCBhZGRp
bmcgbmV3IGZ1bmN0aW9ucyB0bw0KPiBoYW5kbGUgYXV0by1leHBvc3VyZSBhcyBIdWd1ZXMnIHBh
dGNoIGlzIGRvaW5nLg0KPiANCj4gSHVndWVzLCBkbyB5b3UgaGF2ZSBjb21tZW50cz8gRmVlbCBm
cmVlIHRvIGFkZCB5b3VyIHNvYiBvciByYiB0YWdzIGlmDQo+IHlvdSBsaWtlIHRvLg0KPiANCj4g
VGhhbmtzDQo+ICAgICBqDQo+IA0KPj4NCj4+IFRoYW5rcw0KPj4gICAgag0KPj4gLS0tDQo+PiAt
LS0NCj4+ICAgZHJpdmVycy9tZWRpYS9pMmMvb3Y1NjQwLmMgfCAyOSArKysrKysrKysrKysrLS0t
LS0tLS0tLS0tLS0tLQ0KPj4gICAxIGZpbGUgY2hhbmdlZCwgMTMgaW5zZXJ0aW9ucygrKSwgMTYg
ZGVsZXRpb25zKC0pDQo+Pg0KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWVkaWEvaTJjL292NTY0
MC5jIGIvZHJpdmVycy9tZWRpYS9pMmMvb3Y1NjQwLmMNCj4+IGluZGV4IDEyYjM0OTYuLmJjNzVj
YjcgMTAwNjQ0DQo+PiAtLS0gYS9kcml2ZXJzL21lZGlhL2kyYy9vdjU2NDAuYw0KPj4gKysrIGIv
ZHJpdmVycy9tZWRpYS9pMmMvb3Y1NjQwLmMNCj4+IEBAIC0xNTg4LDI1ICsxNTg4LDEzIEBAIHN0
YXRpYyBpbnQgb3Y1NjQwX3NldF9tb2RlX2V4cG9zdXJlX2NhbGMoc3RydWN0IG92NTY0MF9kZXYg
KnNlbnNvciwNCj4+ICAgICogY2hhbmdlIG1vZGUgZGlyZWN0bHkNCj4+ICAgICovDQo+PiAgIHN0
YXRpYyBpbnQgb3Y1NjQwX3NldF9tb2RlX2RpcmVjdChzdHJ1Y3Qgb3Y1NjQwX2RldiAqc2Vuc29y
LA0KPj4gLQkJCQkgIGNvbnN0IHN0cnVjdCBvdjU2NDBfbW9kZV9pbmZvICptb2RlLA0KPj4gLQkJ
CQkgIHMzMiBleHBvc3VyZSkNCj4+ICsJCQkJICBjb25zdCBzdHJ1Y3Qgb3Y1NjQwX21vZGVfaW5m
byAqbW9kZSkNCj4+ICAgew0KPj4gLQlpbnQgcmV0Ow0KPj4gLQ0KPj4gICAJaWYgKCFtb2RlLT5y
ZWdfZGF0YSkNCj4+ICAgCQlyZXR1cm4gLUVJTlZBTDsNCj4+DQo+PiAgIAkvKiBXcml0ZSBjYXB0
dXJlIHNldHRpbmcgKi8NCj4+IC0JcmV0ID0gb3Y1NjQwX2xvYWRfcmVncyhzZW5zb3IsIG1vZGUp
Ow0KPj4gLQlpZiAocmV0IDwgMCkNCj4+IC0JCXJldHVybiByZXQ7DQo+PiAtDQo+PiAtCS8qIHR1
cm4gYXV0byBnYWluL2V4cG9zdXJlIGJhY2sgb24gZm9yIGRpcmVjdCBtb2RlICovDQo+PiAtCXJl
dCA9IF9fdjRsMl9jdHJsX3NfY3RybChzZW5zb3ItPmN0cmxzLmF1dG9fZ2FpbiwgMSk7DQo+PiAt
CWlmIChyZXQpDQo+PiAtCQlyZXR1cm4gcmV0Ow0KPj4gLQ0KPj4gLQlyZXR1cm4gX192NGwyX2N0
cmxfc19jdHJsKHNlbnNvci0+Y3RybHMuYXV0b19leHAsIGV4cG9zdXJlKTsNCj4+ICsJcmV0dXJu
ICBvdjU2NDBfbG9hZF9yZWdzKHNlbnNvciwgbW9kZSk7DQo+PiAgIH0NCj4+DQo+PiAgIHN0YXRp
YyBpbnQgb3Y1NjQwX3NldF9tb2RlKHN0cnVjdCBvdjU2NDBfZGV2ICpzZW5zb3IsDQo+PiBAQCAt
MTYyNiw3ICsxNjE0LDcgQEAgc3RhdGljIGludCBvdjU2NDBfc2V0X21vZGUoc3RydWN0IG92NTY0
MF9kZXYgKnNlbnNvciwNCj4+ICAgCQlyZXR1cm4gcmV0Ow0KPj4NCj4+ICAgCWV4cG9zdXJlID0g
c2Vuc29yLT5jdHJscy5hdXRvX2V4cC0+dmFsOw0KPj4gLQlyZXQgPSBvdjU2NDBfc2V0X2V4cG9z
dXJlKHNlbnNvciwgVjRMMl9FWFBPU1VSRV9NQU5VQUwpOw0KPj4gKwlyZXQgPSBfX3Y0bDJfY3Ry
bF9zX2N0cmwoc2Vuc29yLT5jdHJscy5hdXRvX2V4cCwgVjRMMl9FWFBPU1VSRV9NQU5VQUwpOw0K
Pj4gICAJaWYgKHJldCkNCj4+ICAgCQlyZXR1cm4gcmV0Ow0KPj4NCj4+IEBAIC0xNjQyLDEyICsx
NjMwLDIxIEBAIHN0YXRpYyBpbnQgb3Y1NjQwX3NldF9tb2RlKHN0cnVjdCBvdjU2NDBfZGV2ICpz
ZW5zb3IsDQo+PiAgIAkJICogY2hhbmdlIGluc2lkZSBzdWJzYW1wbGluZyBvciBzY2FsaW5nDQo+
PiAgIAkJICogZG93bmxvYWQgZmlybXdhcmUgZGlyZWN0bHkNCj4+ICAgCQkgKi8NCj4+IC0JCXJl
dCA9IG92NTY0MF9zZXRfbW9kZV9kaXJlY3Qoc2Vuc29yLCBtb2RlLCBleHBvc3VyZSk7DQo+PiAr
CQlyZXQgPSBvdjU2NDBfc2V0X21vZGVfZGlyZWN0KHNlbnNvciwgbW9kZSk7DQo+PiAgIAl9DQo+
Pg0KPj4gICAJaWYgKHJldCA8IDApDQo+PiAgIAkJcmV0dXJuIHJldDsNCj4+DQo+PiArCS8qIFJl
c3RvcmUgYXV0by1nYWluIGFuZCBhdXRvLWV4cG9zdXJlIGFmdGVyIG1vZGUgaGFzIGNoYW5nZWQu
ICovDQo+PiArCXJldCA9IF9fdjRsMl9jdHJsX3NfY3RybChzZW5zb3ItPmN0cmxzLmF1dG9fZ2Fp
biwgMSk7DQo+PiArCWlmIChyZXQpDQo+PiArCQlyZXR1cm4gcmV0Ow0KPj4gKw0KPj4gKwlyZXQg
PSBfX3Y0bDJfY3RybF9zX2N0cmwoc2Vuc29yLT5jdHJscy5hdXRvX2V4cCwgZXhwb3N1cmUpDQo+
PiArCWlmIChyZXQpDQo+PiArCQlyZXR1cm4gcmV0Ow0KPj4gKw0KPj4gICAJcmV0ID0gb3Y1NjQw
X3NldF9iaW5uaW5nKHNlbnNvciwgZG5fbW9kZSAhPSBTQ0FMSU5HKTsNCj4+ICAgCWlmIChyZXQg
PCAwKQ0KPj4gICAJCXJldHVybiByZXQ7DQo+PiAtLQ0KPj4gMi43LjQNCj4+
