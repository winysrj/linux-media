Return-path: <linux-media-owner@vger.kernel.org>
Received: from mx2.suse.de ([195.135.220.15]:42820 "EHLO mx1.suse.de"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1729554AbeKTBhY (ORCPT <rfc822;linux-media@vger.kernel.org>);
        Mon, 19 Nov 2018 20:37:24 -0500
Date: Mon, 19 Nov 2018 16:13:29 +0100
Message-ID: <s5hbm6l5cdi.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Mauro Carvalho Chehab <mchehab@kernel.org>
Cc: Stakanov Schufter <stakanov@freenet.de>,
        linux-media@vger.kernel.org, linux-kernel@vger.kernel.org
Subject: DVB-S PCI card regression on 4.19 / 4.20
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

Hi,

we've got a regression report on openSUSE Bugzilla regarding DVB-S PCI
card:
  https://bugzilla.opensuse.org/show_bug.cgi?id=1116374

According to the reporter (Stakanov, Cc'ed), the card worked fine on
4.18.15, but since 4.19, it doesn't give any channels, sound nor
picture, but only EPG is received.

The following errors might be relevant:

================
[    4.845180] b2c2-flexcop: B2C2 FlexcopII/II(b)/III digital TV receiver chip loaded successfully
[    4.869703] b2c2-flexcop: MAC address = xx:xx:xx:xx:xx:xx
[    5.100318] b2c2-flexcop: found 'ST STV0299 DVB-S' .
[    5.100323] b2c2_flexcop_pci 0000:06:06.0: DVB: registering adapter 0 frontend 0 (ST STV0299 DVB-S)...
[    5.100370] b2c2-flexcop: initialization of 'Sky2PC/SkyStar 2 DVB-S rev 2.6' at the 'PCI' bus controlled by a 'FlexCopIIb' complete
[  117.513086] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0 frequency 1549000 out of range (950000..2150)
[  124.905222] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0 frequency 1880000 out of range (950000..2150)
[  127.337079] b2c2_flexcop_pci 0000:06:06.0: DVB: adapter 0 frontend 0 frequency 1353500 out of range (950000..2150)
================

The lspci shows:
================
06:06.0 Network controller: Techsan Electronics Co Ltd B2C2 FlexCopII DVB chip / Technisat SkyStar2 DVB card (rev 02)
        Subsystem: Techsan Electronics Co Ltd B2C2 FlexCopII DVB chip / Technisat SkyStar2 DVB card
        Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
        Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=slow >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
        Latency: 32
        Interrupt: pin A routed to IRQ 20
        NUMA node: 0
        Region 0: Memory at fe500000 (32-bit, non-prefetchable) [size=64K]
        Region 1: I/O ports at b040 [size=32]
        Kernel driver in use: b2c2_flexcop_pci
        Kernel modules: b2c2_flexcop_pci
================

Other details can be found in the bugzilla entry above.

If any fix is known, please let me know.  I'll build a test kernel for
openSUSE to confirm it.


Thanks!

Takashi
