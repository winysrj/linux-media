Return-path: <linux-media-owner@vger.kernel.org>
Received: from forward19.mail.yandex.net ([95.108.253.144]:39421 "EHLO
	forward19.mail.yandex.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1752483Ab2GMXV3 (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Fri, 13 Jul 2012 19:21:29 -0400
Received: from web18g.yandex.ru (web18g.yandex.ru [95.108.252.118])
	by forward19.mail.yandex.net (Yandex) with ESMTP id 1635C1121DD9
	for <linux-media@vger.kernel.org>; Sat, 14 Jul 2012 03:15:04 +0400 (MSK)
From: CrazyCat <crazycat69@yandex.ru>
To: "linux-media@vger.kernel.org" <linux-media@vger.kernel.org>
Subject: [PATCH] DVB-S2 multistream support
MIME-Version: 1.0
Message-Id: <59951342221302@web18g.yandex.ru>
Date: Sat, 14 Jul 2012 02:15:02 +0300
Content-Type: multipart/mixed;
	boundary="----==--bound.5996.web18g.yandex.ru"
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>


------==--bound.5996.web18g.yandex.ru
Content-Transfer-Encoding: 7bit
Content-Type: text/plain

Now present DTV_DVBT2_PLP_ID property for DVB-T2, so i add alias DTV_DVBS2_MIS_ID (same feature for advanced DVB-S2). Now DVB-S2 multistream filtration supported for current STV090x demod cut 3.0, so i implement support for stv090x demod driver. Additional fe-caps FE_CAN_MULTISTREAM also added.

------==--bound.5996.web18g.yandex.ru
Content-Disposition: attachment;
	filename="frontend-mis.patch"
Content-Transfer-Encoding: base64
Content-Type: text/x-c;
	name="frontend-mis.patch"

ZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZHZiL2Zyb250ZW5kLmggYi9pbmNsdWRlL2xpbnV4
L2R2Yi9mcm9udGVuZC5oCmluZGV4IGY1MGQ0MDUuLmY2MjVmOGQgMTAwNjQ0Ci0tLSBhL2luY2x1
ZGUvbGludXgvZHZiL2Zyb250ZW5kLmgKKysrIGIvaW5jbHVkZS9saW51eC9kdmIvZnJvbnRlbmQu
aApAQCAtNjIsNiArNjIsNyBAQCB0eXBlZGVmIGVudW0gZmVfY2FwcyB7CiAJRkVfQ0FOXzhWU0IJ
CQk9IDB4MjAwMDAwLAogCUZFX0NBTl8xNlZTQgkJCT0gMHg0MDAwMDAsCiAJRkVfSEFTX0VYVEVO
REVEX0NBUFMJCT0gMHg4MDAwMDAsICAgLyogV2UgbmVlZCBtb3JlIGJpdHNwYWNlIGZvciBuZXdl
ciBBUElzLCBpbmRpY2F0ZSB0aGlzLiAqLworCUZFX0NBTl9NVUxUSVNUUkVBTQkJPSAweDQwMDAw
MDAsICAvKiBmcm9udGVuZCBzdXBwb3J0cyBEVkItUzIgbXVsdGlzdHJlYW0gZmlsdGVyaW5nICov
CiAJRkVfQ0FOX1RVUkJPX0ZFQwkJPSAweDgwMDAwMDAsICAvKiBmcm9udGVuZCBzdXBwb3J0cyAi
dHVyYm8gZmVjIG1vZHVsYXRpb24iICovCiAJRkVfQ0FOXzJHX01PRFVMQVRJT04JCT0gMHgxMDAw
MDAwMCwgLyogZnJvbnRlbmQgc3VwcG9ydHMgIjJuZCBnZW5lcmF0aW9uIG1vZHVsYXRpb24iIChE
VkItUzIpICovCiAJRkVfTkVFRFNfQkVORElORwkJPSAweDIwMDAwMDAwLCAvKiBub3Qgc3VwcG9y
dGVkIGFueW1vcmUsIGRvbid0IHVzZSAoZnJvbnRlbmQgcmVxdWlyZXMgZnJlcXVlbmN5IGJlbmRp
bmcpICovCkBAIC0zMTcsNiArMzE4LDcgQEAgc3RydWN0IGR2Yl9mcm9udGVuZF9ldmVudCB7CiAj
ZGVmaW5lIERUVl9JU0RCU19UU19JRAkJNDIKIAogI2RlZmluZSBEVFZfRFZCVDJfUExQX0lECTQz
CisjZGVmaW5lIERUVl9EVkJTMl9NSVNfSUQJNDMKIAogI2RlZmluZSBEVFZfRU5VTV9ERUxTWVMJ
CTQ0CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWVkaWEvZHZiL2R2Yi1jb3JlL2R2Yl9mcm9udGVu
ZC5jIGIvZHJpdmVycy9tZWRpYS9kdmIvZHZiLWNvcmUvZHZiX2Zyb250ZW5kLmMKaW5kZXggYWVi
Y2RmMi4uODNlNTFmOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9tZWRpYS9kdmIvZHZiLWNvcmUvZHZi
X2Zyb250ZW5kLmMKKysrIGIvZHJpdmVycy9tZWRpYS9kdmIvZHZiLWNvcmUvZHZiX2Zyb250ZW5k
LmMKQEAgLTk0Nyw3ICs5NDcsNyBAQCBzdGF0aWMgaW50IGR2Yl9mcm9udGVuZF9jbGVhcl9jYWNo
ZShzdHJ1Y3QgZHZiX2Zyb250ZW5kICpmZSkKIAl9CiAKIAljLT5pc2Ric190c19pZCA9IDA7Ci0J
Yy0+ZHZidDJfcGxwX2lkID0gMDsKKwljLT5kdmJ0Ml9wbHBfaWQgPSAtMTsKIAogCXN3aXRjaCAo
Yy0+ZGVsaXZlcnlfc3lzdGVtKSB7CiAJY2FzZSBTWVNfRFZCUzoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbWVkaWEvZHZiL2Zyb250ZW5kcy9zdHYwOTB4LmMgYi9kcml2ZXJzL21lZGlhL2R2Yi9mcm9u
dGVuZHMvc3R2MDkweC5jCmluZGV4IGVhODZhNTYuLmViNmYxY2YgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvbWVkaWEvZHZiL2Zyb250ZW5kcy9zdHYwOTB4LmMKKysrIGIvZHJpdmVycy9tZWRpYS9kdmIv
ZnJvbnRlbmRzL3N0djA5MHguYwpAQCAtMzQyNSw2ICszNDI1LDMzIEBAIGVycjoKIAlyZXR1cm4g
LTE7CiB9CiAKK3N0YXRpYyBpbnQgc3R2MDkweF9zZXRfbWlzKHN0cnVjdCBzdHYwOTB4X3N0YXRl
ICpzdGF0ZSwgaW50IG1pcykKK3sKKwl1MzIgcmVnOworCisJaWYgKG1pczwwIHx8IG1pcz4yNTUp
IHsKKwkJZHByaW50ayhGRV9ERUJVRywgMSwgIkRpc2FibGUgTUlTIGZpbHRlcmluZyIpOworCQly
ZWcgPSBTVFYwOTB4X1JFQURfREVNT0Qoc3RhdGUsIFBERUxDVFJMMSk7CisJCVNUVjA5MHhfU0VU
RklFTERfUHgocmVnLCBGSUxURVJfRU5fRklFTEQsIDB4MDApOworCQlpZiAoU1RWMDkweF9XUklU
RV9ERU1PRChzdGF0ZSwgUERFTENUUkwxLCByZWcpIDwgMCkKKwkJCWdvdG8gZXJyOworCX0gZWxz
ZSB7CisJCWRwcmludGsoRkVfREVCVUcsIDEsICJFbmFibGUgTUlTIGZpbHRlcmluZyAtICVkIiwg
bWlzKTsKKwkJcmVnID0gU1RWMDkweF9SRUFEX0RFTU9EKHN0YXRlLCBQREVMQ1RSTDEpOworCQlT
VFYwOTB4X1NFVEZJRUxEX1B4KHJlZywgRklMVEVSX0VOX0ZJRUxELCAweDAxKTsKKwkJaWYgKFNU
VjA5MHhfV1JJVEVfREVNT0Qoc3RhdGUsIFBERUxDVFJMMSwgcmVnKSA8IDApCisJCQlnb3RvIGVy
cjsKKwkJaWYgKFNUVjA5MHhfV1JJVEVfREVNT0Qoc3RhdGUsIElTSUVOVFJZLCBtaXMpIDwgMCkK
KwkJCWdvdG8gZXJyOworCQlpZiAoU1RWMDkweF9XUklURV9ERU1PRChzdGF0ZSwgSVNJQklURU5B
LCAweGZmKSA8IDApCisJCQlnb3RvIGVycjsKKwl9CisJcmV0dXJuIDA7CitlcnI6CisJZHByaW50
ayhGRV9FUlJPUiwgMSwgIkkvTyBlcnJvciIpOworCXJldHVybiAtMTsKK30KKwogc3RhdGljIGVu
dW0gZHZiZmVfc2VhcmNoIHN0djA5MHhfc2VhcmNoKHN0cnVjdCBkdmJfZnJvbnRlbmQgKmZlKQog
ewogCXN0cnVjdCBzdHYwOTB4X3N0YXRlICpzdGF0ZSA9IGZlLT5kZW1vZHVsYXRvcl9wcml2OwpA
QCAtMzQzMyw2ICszNDYwLDggQEAgc3RhdGljIGVudW0gZHZiZmVfc2VhcmNoIHN0djA5MHhfc2Vh
cmNoKHN0cnVjdCBkdmJfZnJvbnRlbmQgKmZlKQogCWlmIChwcm9wcy0+ZnJlcXVlbmN5ID09IDAp
CiAJCXJldHVybiBEVkJGRV9BTEdPX1NFQVJDSF9JTlZBTElEOwogCisJc3R2MDkweF9zZXRfbWlz
KHN0YXRlLHByb3BzLT5kdmJ0Ml9wbHBfaWQpOworCiAJc3RhdGUtPmRlbHN5cyA9IHByb3BzLT5k
ZWxpdmVyeV9zeXN0ZW07CiAJc3RhdGUtPmZyZXF1ZW5jeSA9IHByb3BzLT5mcmVxdWVuY3k7CiAJ
c3RhdGUtPnNyYXRlID0gcHJvcHMtPnN5bWJvbF9yYXRlOwpAQCAtMzQ0Nyw2ICszNDc2LDggQEAg
c3RhdGljIGVudW0gZHZiZmVfc2VhcmNoIHN0djA5MHhfc2VhcmNoKHN0cnVjdCBkdmJfZnJvbnRl
bmQgKmZlKQogCQlzdGF0ZS0+c2VhcmNoX3JhbmdlID0gNTAwMDAwMDsKIAl9CiAKKwlzdHYwOTB4
X3NldF9taXMoc3RhdGUscHJvcHMtPmR2YnQyX3BscF9pZCk7CisKIAlpZiAoc3R2MDkweF9hbGdv
KHN0YXRlKSA9PSBTVFYwOTB4X1JBTkdFT0spIHsKIAkJZHByaW50ayhGRV9ERUJVRywgMSwgIlNl
YXJjaCBzdWNjZXNzISIpOwogCQlyZXR1cm4gRFZCRkVfQUxHT19TRUFSQ0hfU1VDQ0VTUzsKQEAg
LTQ3OTgsNiArNDgyOSw5IEBAIHN0cnVjdCBkdmJfZnJvbnRlbmQgKnN0djA5MHhfYXR0YWNoKGNv
bnN0IHN0cnVjdCBzdHYwOTB4X2NvbmZpZyAqY29uZmlnLAogCQl9CiAJfQogCisJaWYgKHN0YXRl
LT5pbnRlcm5hbC0+ZGV2X3Zlcj49MHgzMCkKKwkgICAgc3RhdGUtPmZyb250ZW5kLm9wcy5pbmZv
LmNhcHMgfD0gRkVfQ0FOX01VTFRJU1RSRUFNOworCiAJLyogd29ya2Fyb3VuZCBmb3Igc3R1Y2sg
RGlTRXFDIG91dHB1dCAqLwogCWlmIChjb25maWctPmRpc2VxY19lbnZlbG9wZV9tb2RlKQogCQlz
dHYwOTB4X3NlbmRfZGlzZXFjX2J1cnN0KCZzdGF0ZS0+ZnJvbnRlbmQsIFNFQ19NSU5JX0EpOwo=
------==--bound.5996.web18g.yandex.ru--
