Return-path: <linux-media-owner@vger.kernel.org>
Received: from ch1ehsobe004.messaging.microsoft.com ([216.32.181.184]:51465
	"EHLO ch1outboundpool.messaging.microsoft.com" rhost-flags-OK-OK-OK-OK)
	by vger.kernel.org with ESMTP id S1750977Ab2KALRu convert rfc822-to-8bit
	(ORCPT <rfc822;linux-media@vger.kernel.org>);
	Thu, 1 Nov 2012 07:17:50 -0400
From: Florian Neuhaus <florian.neuhaus@reberinformatik.ch>
To: "Laurent Pinchart <laurent.pinchart@ideasonboard.com>
	(laurent.pinchart@ideasonboard.com)"
	<laurent.pinchart@ideasonboard.com>
CC: "linux-media@vger.kernel.org" <linux-media@vger.kernel.org>,
	"sakari.ailus@iki.fi" <sakari.ailus@iki.fi>,
	"dacohen@gmail.com" <dacohen@gmail.com>
Subject: [omap3-isp-live] Autofocus buffer interpretation of H3A engine
Date: Thu, 1 Nov 2012 11:17:44 +0000
Message-ID: <6EE9CD707FBED24483D4CB0162E854671007E05D@AM2PRD0710MB375.eurprd07.prod.outlook.com>
Content-Language: de-DE
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 8BIT
MIME-Version: 1.0
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

Hi Laurent

I am adapting your current omap3-isp-live application to fit our needs (http://git.ideasonboard.org/omap3-isp-live.git/commit/619164a994c8d878249d6c1b8b16c27074a04209).
For this I need to implement an autofocus algorithm to control an attached actuator. 
Let me summarize what components I use:

- beagleboard-xm
- mt9p031 on leopardimaging li-5m03
- own developed voice-coil-motor (vcm) driven by current regulator ad5821
- kernel 3.5 out of the linux-omap tree

To generate a control signal for my vcm, I need to interpret the values generated by 
the AF engine of the omap3isp, h3a module. I see, that you have already implemented 
a working auto-exposure functionality with the AEWB module - so I have done the same 
with the AF module. But now I have problems to interpret the generated values in omap3_isp_af_process. Do you know how the paxel-buffer is structured? 
I see that the received buffer has the size of

buf_size = af->paxel.h_cnt * af->paxel.v_cnt * OMAP3ISP_AF_PAXEL_SIZE;

where  OMAP3ISP_AF_PAXEL_SIZE is 48 bytes, but what is in the 48 bytes?

Have you made some progress in implementing an autofocus algorithm?

Thank you for your help and greetings,
Florian

