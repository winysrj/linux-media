Return-path: <video4linux-list-bounces@redhat.com>
Received: from mx3.redhat.com (mx3.redhat.com [172.16.48.32])
	by int-mx1.corp.redhat.com (8.13.1/8.13.1) with ESMTP id m3B2AFsG032600
	for <video4linux-list@redhat.com>; Thu, 10 Apr 2008 22:10:15 -0400
Received: from wr-out-0506.google.com (wr-out-0506.google.com [64.233.184.230])
	by mx3.redhat.com (8.13.8/8.13.8) with ESMTP id m3B2A1f4002876
	for <video4linux-list@redhat.com>; Thu, 10 Apr 2008 22:10:01 -0400
Received: by wr-out-0506.google.com with SMTP id c57so306322wra.9
	for <video4linux-list@redhat.com>; Thu, 10 Apr 2008 19:10:01 -0700 (PDT)
Message-ID: <68cac7520804101910l650d593dk59402cb397ada4ee@mail.gmail.com>
Date: Thu, 10 Apr 2008 23:10:00 -0300
From: "Douglas Landgraf" <dougsland@gmail.com>
To: video4linux-list <video4linux-list@redhat.com>,
	v4lm <v4l-dvb-maintainer@linuxtv.org>,
	"Mauro Carvalho Chehab" <mchehab@linuxtv.org>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_Part_22927_18845019.1207879800898"
Cc: 
Subject: meye driver - video_ioctl2 (testers needed)
List-Unsubscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/mailman/private/video4linux-list>
List-Post: <mailto:video4linux-list@redhat.com>
List-Help: <mailto:video4linux-list-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=subscribe>
Sender: video4linux-list-bounces@redhat.com
Errors-To: video4linux-list-bounces@redhat.com
List-ID: <video4linux-list@redhat.com>

------=_Part_22927_18845019.1207879800898
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

    I've converted meye driver to use video_ioctl2 instead of
meye_do_ioctl, but I don't have this webcam for tests.
Could anybody test it and report the results please?

Repository: http://linuxtv.org/hg/~dougsland/meye-video2/

Thanks!

Cheers,
Douglas

------=_Part_22927_18845019.1207879800898
Content-Type: text/x-diff; name=patch-meye-video2.diff
Content-Transfer-Encoding: base64
X-Attachment-Id: f_few4f6340
Content-Disposition: attachment; filename=patch-meye-video2.diff

ZGlmZiAtciBhNjcwYzM1ZDQ2ZTMgbGludXgvZHJpdmVycy9tZWRpYS92aWRlby9tZXllLmMKLS0t
IGEvbGludXgvZHJpdmVycy9tZWRpYS92aWRlby9tZXllLmMJV2VkIEFwciAwOSAyMjoxODo1NiAy
MDA4IC0wMzAwCisrKyBiL2xpbnV4L2RyaXZlcnMvbWVkaWEvdmlkZW8vbWV5ZS5jCVdlZCBBcHIg
MDkgMjI6NDY6MDcgMjAwOCAtMDMwMApAQCAtNDMsMTQgKzQzLDkgQEAKICNpbmNsdWRlIDxsaW51
eC9tZXllLmg+CiAKIE1PRFVMRV9BVVRIT1IoIlN0ZWxpYW4gUG9wIDxzdGVsaWFuQHBvcGllcy5u
ZXQ+Iik7Ci1NT0RVTEVfREVTQ1JJUFRJT04oInY0bC92NGwyIGRyaXZlciBmb3IgdGhlIE1vdGlv
bkV5ZSBjYW1lcmEiKTsKK01PRFVMRV9ERVNDUklQVElPTigidjRsMiBkcml2ZXIgZm9yIHRoZSBN
b3Rpb25FeWUgY2FtZXJhIik7CiBNT0RVTEVfTElDRU5TRSgiR1BMIik7CiBNT0RVTEVfVkVSU0lP
TihNRVlFX0RSSVZFUl9WRVJTSU9OKTsKLQotLyogZm9yY2UgdXNhZ2Ugb2YgVjRMMSBBUEkgKi8K
LXN0YXRpYyBpbnQgZm9yY2V2NGwxOyAvKiA9IDAgKi8KLW1vZHVsZV9wYXJhbShmb3JjZXY0bDEs
IGludCwgMDY0NCk7Ci1NT0RVTEVfUEFSTV9ERVNDKGZvcmNldjRsMSwgImZvcmNlIHVzZSBvZiBW
NEwxIGluc3RlYWQgb2YgVjRMMiIpOwogCiAvKiBudW1iZXIgb2YgZ3JhYiBidWZmZXJzICovCiBz
dGF0aWMgdW5zaWduZWQgaW50IGdidWZmZXJzID0gMjsKQEAgLTg4MSw4MDMgKzg3Niw3MzAgQEAg
c3RhdGljIGludCBtZXllX3JlbGVhc2Uoc3RydWN0IGlub2RlICppbgogCXJldHVybiAwOwogfQog
Ci1zdGF0aWMgaW50IG1leWVfZG9faW9jdGwoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZp
bGUgKmZpbGUsCi0JCQkgdW5zaWduZWQgaW50IGNtZCwgdm9pZCAqYXJnKQorc3RhdGljIGludCBt
ZXllaW9jX2dfcGFyYW1zKHN0cnVjdCBtZXllX3BhcmFtcyAqcCkKIHsKLQlzd2l0Y2ggKGNtZCkg
eworCSpwID0gbWV5ZS5wYXJhbXM7CisJcmV0dXJuIDA7Cit9CiAKLQljYXNlIFZJRElPQ0dDQVA6
IHsKLQkJc3RydWN0IHZpZGVvX2NhcGFiaWxpdHkgKmIgPSBhcmc7Ci0JCXN0cmNweShiLT5uYW1l
LG1leWUudmlkZW9fZGV2LT5uYW1lKTsKLQkJYi0+dHlwZSA9IFZJRF9UWVBFX0NBUFRVUkU7Ci0J
CWItPmNoYW5uZWxzID0gMTsKLQkJYi0+YXVkaW9zID0gMDsKLQkJYi0+bWF4d2lkdGggPSA2NDA7
Ci0JCWItPm1heGhlaWdodCA9IDQ4MDsKLQkJYi0+bWlud2lkdGggPSAzMjA7Ci0JCWItPm1pbmhl
aWdodCA9IDI0MDsKLQkJYnJlYWs7CitzdGF0aWMgaW50IG1leWVpb2Nfc19wYXJhbXMoc3RydWN0
IG1leWVfcGFyYW1zICpqcCkKK3sKKwlpZiAoanAtPnN1YnNhbXBsZSA+IDEpCisJCXJldHVybiAt
RUlOVkFMOworCisJaWYgKGpwLT5xdWFsaXR5ID4gMTApCisJCXJldHVybiAtRUlOVkFMOworCisJ
aWYgKGpwLT5zaGFycG5lc3MgPiA2MyB8fCBqcC0+YWdjID4gNjMgfHwganAtPnBpY3R1cmUgPiA2
MykKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoanAtPmZyYW1lcmF0ZSA+IDMxKQorCQlyZXR1
cm4gLUVJTlZBTDsKKworCW11dGV4X2xvY2soJm1leWUubG9jayk7CisKKwlpZiAobWV5ZS5wYXJh
bXMuc3Vic2FtcGxlICE9IGpwLT5zdWJzYW1wbGUgfHwKKwkgICAgbWV5ZS5wYXJhbXMucXVhbGl0
eSAhPSBqcC0+cXVhbGl0eSkKKwkJbWNoaXBfaGljX3N0b3AoKTsJLyogbmVlZCByZXN0YXJ0ICov
CisKKwltZXllLnBhcmFtcyA9ICpqcDsKKwlzb255X3BpY19jYW1lcmFfY29tbWFuZChTT05ZX1BJ
Q19DT01NQU5EX1NFVENBTUVSQVNIQVJQTkVTUywKKwkJCSAgICAgIG1leWUucGFyYW1zLnNoYXJw
bmVzcyk7CisJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQoU09OWV9QSUNfQ09NTUFORF9TRVRDQU1F
UkFBR0MsCisJCQkgICAgICBtZXllLnBhcmFtcy5hZ2MpOworCXNvbnlfcGljX2NhbWVyYV9jb21t
YW5kKFNPTllfUElDX0NPTU1BTkRfU0VUQ0FNRVJBUElDVFVSRSwKKwkJCSAgICAgIG1leWUucGFy
YW1zLnBpY3R1cmUpOworCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgaW50IG1leWVpb2NfcWJ1Zl9jYXB0KGludCAqbmIpCit7CisJaWYgKCFtZXll
LmdyYWJfZmJ1ZmZlcikKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoKm5iID49IGdidWZmZXJz
KQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWlmICgqbmIgPCAwKSB7CisJCS8qIHN0b3AgY2FwdHVy
ZSAqLworCQltY2hpcF9oaWNfc3RvcCgpOworCQlyZXR1cm4gMDsKIAl9CiAKLQljYXNlIFZJRElP
Q0dDSEFOOiB7Ci0JCXN0cnVjdCB2aWRlb19jaGFubmVsICp2ID0gYXJnOwotCQl2LT5mbGFncyA9
IDA7Ci0JCXYtPnR1bmVycyA9IDA7Ci0JCXYtPnR5cGUgPSBWSURFT19UWVBFX0NBTUVSQTsKLQkJ
aWYgKHYtPmNoYW5uZWwgIT0gMCkKLQkJCXJldHVybiAtRUlOVkFMOwotCQlzdHJjcHkodi0+bmFt
ZSwiQ2FtZXJhIik7Ci0JCWJyZWFrOwotCX0KKwlpZiAobWV5ZS5ncmFiX2J1ZmZlclsqbmJdLnN0
YXRlICE9IE1FWUVfQlVGX1VOVVNFRCkKKwkJcmV0dXJuIC1FQlVTWTsKIAotCWNhc2UgVklESU9D
U0NIQU46IHsKLQkJc3RydWN0IHZpZGVvX2NoYW5uZWwgKnYgPSBhcmc7Ci0JCWlmICh2LT5jaGFu
bmVsICE9IDApCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJYnJlYWs7Ci0JfQorCW11dGV4X2xvY2so
Jm1leWUubG9jayk7CiAKLQljYXNlIFZJRElPQ0dQSUNUOiB7Ci0JCXN0cnVjdCB2aWRlb19waWN0
dXJlICpwID0gYXJnOwotCQkqcCA9IG1leWUucGljdHVyZTsKLQkJYnJlYWs7Ci0JfQorCWlmICht
ZXllLm1jaGlwX21vZGUgIT0gTUNISVBfSElDX01PREVfQ09OVF9DT01QKQorCQltY2hpcF9jb250
X2NvbXByZXNzaW9uX3N0YXJ0KCk7CiAKLQljYXNlIFZJRElPQ1NQSUNUOiB7Ci0JCXN0cnVjdCB2
aWRlb19waWN0dXJlICpwID0gYXJnOwotCQlpZiAocC0+ZGVwdGggIT0gMTYpCi0JCQlyZXR1cm4g
LUVJTlZBTDsKLQkJaWYgKHAtPnBhbGV0dGUgIT0gVklERU9fUEFMRVRURV9ZVVY0MjIgJiYgcC0+
cGFsZXR0ZSAhPSBWSURFT19QQUxFVFRFX1lVWVYpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJbXV0
ZXhfbG9jaygmbWV5ZS5sb2NrKTsKLQkJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQoU09OWV9QSUNf
Q09NTUFORF9TRVRDQU1FUkFCUklHSFRORVNTLAotCQkJCSAgICAgIHAtPmJyaWdodG5lc3MgPj4g
MTApOwotCQlzb255X3BpY19jYW1lcmFfY29tbWFuZChTT05ZX1BJQ19DT01NQU5EX1NFVENBTUVS
QUhVRSwKLQkJCQkgICAgICBwLT5odWUgPj4gMTApOwotCQlzb255X3BpY19jYW1lcmFfY29tbWFu
ZChTT05ZX1BJQ19DT01NQU5EX1NFVENBTUVSQUNPTE9SLAotCQkJCSAgICAgIHAtPmNvbG91ciA+
PiAxMCk7Ci0JCXNvbnlfcGljX2NhbWVyYV9jb21tYW5kKFNPTllfUElDX0NPTU1BTkRfU0VUQ0FN
RVJBQ09OVFJBU1QsCi0JCQkJICAgICAgcC0+Y29udHJhc3QgPj4gMTApOwotCQltZXllLnBpY3R1
cmUgPSAqcDsKKwltZXllLmdyYWJfYnVmZmVyWypuYl0uc3RhdGUgPSBNRVlFX0JVRl9VU0lORzsK
KwlrZmlmb19wdXQobWV5ZS5ncmFicSwgKHVuc2lnbmVkIGNoYXIgKiluYiwgc2l6ZW9mKGludCkp
OworCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
aW50IG1leWVpb2Nfc3luYyhzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIGludCAqaSkKK3sK
KwlpbnQgdW51c2VkOworCisJaWYgKCppIDwgMCB8fCAqaSA+PSBnYnVmZmVycykKKwkJcmV0dXJu
IC1FSU5WQUw7CisKKwltdXRleF9sb2NrKCZtZXllLmxvY2spOworCXN3aXRjaCAobWV5ZS5ncmFi
X2J1ZmZlclsqaV0uc3RhdGUpIHsKKworCWNhc2UgTUVZRV9CVUZfVU5VU0VEOgogCQltdXRleF91
bmxvY2soJm1leWUubG9jayk7Ci0JCWJyZWFrOwotCX0KLQotCWNhc2UgVklESU9DU1lOQzogewot
CQlpbnQgKmkgPSBhcmc7Ci0JCWludCB1bnVzZWQ7Ci0KLQkJaWYgKCppIDwgMCB8fCAqaSA+PSBn
YnVmZmVycykKLQkJCXJldHVybiAtRUlOVkFMOwotCi0JCW11dGV4X2xvY2soJm1leWUubG9jayk7
Ci0KLQkJc3dpdGNoIChtZXllLmdyYWJfYnVmZmVyWyppXS5zdGF0ZSkgewotCi0JCWNhc2UgTUVZ
RV9CVUZfVU5VU0VEOgotCQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOwotCQkJcmV0dXJuIC1F
SU5WQUw7Ci0JCWNhc2UgTUVZRV9CVUZfVVNJTkc6Ci0JCQlpZiAoZmlsZS0+Zl9mbGFncyAmIE9f
Tk9OQkxPQ0spIHsKLQkJCQltdXRleF91bmxvY2soJm1leWUubG9jayk7Ci0JCQkJcmV0dXJuIC1F
QUdBSU47Ci0JCQl9Ci0JCQlpZiAod2FpdF9ldmVudF9pbnRlcnJ1cHRpYmxlKG1leWUucHJvY19s
aXN0LAotCQkJCQkJICAgICAobWV5ZS5ncmFiX2J1ZmZlclsqaV0uc3RhdGUgIT0gTUVZRV9CVUZf
VVNJTkcpKSkgewotCQkJCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKLQkJCQlyZXR1cm4gLUVJ
TlRSOwotCQkJfQotCQkJLyogZmFsbCB0aHJvdWdoICovCi0JCWNhc2UgTUVZRV9CVUZfRE9ORToK
LQkJCW1leWUuZ3JhYl9idWZmZXJbKmldLnN0YXRlID0gTUVZRV9CVUZfVU5VU0VEOwotCQkJa2Zp
Zm9fZ2V0KG1leWUuZG9uZXEsICh1bnNpZ25lZCBjaGFyICopJnVudXNlZCwgc2l6ZW9mKGludCkp
OwotCQl9Ci0JCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKLQkJYnJlYWs7Ci0JfQotCi0JY2Fz
ZSBWSURJT0NNQ0FQVFVSRTogewotCQlzdHJ1Y3QgdmlkZW9fbW1hcCAqdm0gPSBhcmc7Ci0JCWlu
dCByZXN0YXJ0ID0gMDsKLQotCQlpZiAodm0tPmZyYW1lID49IGdidWZmZXJzIHx8IHZtLT5mcmFt
ZSA8IDApCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKHZtLT5mb3JtYXQgIT0gVklERU9fUEFM
RVRURV9ZVVY0MjIgJiYgdm0tPmZvcm1hdCAhPSBWSURFT19QQUxFVFRFX1lVWVYpCi0JCQlyZXR1
cm4gLUVJTlZBTDsKLQkJaWYgKHZtLT5oZWlnaHQgKiB2bS0+d2lkdGggKiAyID4gZ2J1ZnNpemUp
Ci0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKCFtZXllLmdyYWJfZmJ1ZmZlcikKLQkJCXJldHVy
biAtRUlOVkFMOwotCQlpZiAobWV5ZS5ncmFiX2J1ZmZlclt2bS0+ZnJhbWVdLnN0YXRlICE9IE1F
WUVfQlVGX1VOVVNFRCkKLQkJCXJldHVybiAtRUJVU1k7Ci0KLQkJbXV0ZXhfbG9jaygmbWV5ZS5s
b2NrKTsKLQkJaWYgKHZtLT53aWR0aCA9PSA2NDAgJiYgdm0tPmhlaWdodCA9PSA0ODApIHsKLQkJ
CWlmIChtZXllLnBhcmFtcy5zdWJzYW1wbGUpIHsKLQkJCQltZXllLnBhcmFtcy5zdWJzYW1wbGUg
PSAwOwotCQkJCXJlc3RhcnQgPSAxOwotCQkJfQotCQl9IGVsc2UgaWYgKHZtLT53aWR0aCA9PSAz
MjAgJiYgdm0tPmhlaWdodCA9PSAyNDApIHsKLQkJCWlmICghbWV5ZS5wYXJhbXMuc3Vic2FtcGxl
KSB7Ci0JCQkJbWV5ZS5wYXJhbXMuc3Vic2FtcGxlID0gMTsKLQkJCQlyZXN0YXJ0ID0gMTsKLQkJ
CX0KLQkJfSBlbHNlIHsKLQkJCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKLQkJCXJldHVybiAt
RUlOVkFMOwotCQl9Ci0KLQkJaWYgKHJlc3RhcnQgfHwgbWV5ZS5tY2hpcF9tb2RlICE9IE1DSElQ
X0hJQ19NT0RFX0NPTlRfT1VUKQotCQkJbWNoaXBfY29udGludW91c19zdGFydCgpOwotCQltZXll
LmdyYWJfYnVmZmVyW3ZtLT5mcmFtZV0uc3RhdGUgPSBNRVlFX0JVRl9VU0lORzsKLQkJa2ZpZm9f
cHV0KG1leWUuZ3JhYnEsICh1bnNpZ25lZCBjaGFyICopJnZtLT5mcmFtZSwgc2l6ZW9mKGludCkp
OwotCQltdXRleF91bmxvY2soJm1leWUubG9jayk7Ci0JCWJyZWFrOwotCX0KLQotCWNhc2UgVklE
SU9DR01CVUY6IHsKLQkJc3RydWN0IHZpZGVvX21idWYgKnZtID0gYXJnOwotCQlpbnQgaTsKLQot
CQltZW1zZXQodm0sIDAgLCBzaXplb2YoKnZtKSk7Ci0JCXZtLT5zaXplID0gZ2J1ZnNpemUgKiBn
YnVmZmVyczsKLQkJdm0tPmZyYW1lcyA9IGdidWZmZXJzOwotCQlmb3IgKGkgPSAwOyBpIDwgZ2J1
ZmZlcnM7IGkrKykKLQkJCXZtLT5vZmZzZXRzW2ldID0gaSAqIGdidWZzaXplOwotCQlicmVhazsK
LQl9Ci0KLQljYXNlIE1FWUVJT0NfR19QQVJBTVM6IHsKLQkJc3RydWN0IG1leWVfcGFyYW1zICpw
ID0gYXJnOwotCQkqcCA9IG1leWUucGFyYW1zOwotCQlicmVhazsKLQl9Ci0KLQljYXNlIE1FWUVJ
T0NfU19QQVJBTVM6IHsKLQkJc3RydWN0IG1leWVfcGFyYW1zICpqcCA9IGFyZzsKLQkJaWYgKGpw
LT5zdWJzYW1wbGUgPiAxKQotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCWlmIChqcC0+cXVhbGl0eSA+
IDEwKQotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCWlmIChqcC0+c2hhcnBuZXNzID4gNjMgfHwganAt
PmFnYyA+IDYzIHx8IGpwLT5waWN0dXJlID4gNjMpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYg
KGpwLT5mcmFtZXJhdGUgPiAzMSkKLQkJCXJldHVybiAtRUlOVkFMOwotCQltdXRleF9sb2NrKCZt
ZXllLmxvY2spOwotCQlpZiAobWV5ZS5wYXJhbXMuc3Vic2FtcGxlICE9IGpwLT5zdWJzYW1wbGUg
fHwKLQkJICAgIG1leWUucGFyYW1zLnF1YWxpdHkgIT0ganAtPnF1YWxpdHkpCi0JCQltY2hpcF9o
aWNfc3RvcCgpOwkvKiBuZWVkIHJlc3RhcnQgKi8KLQkJbWV5ZS5wYXJhbXMgPSAqanA7Ci0JCXNv
bnlfcGljX2NhbWVyYV9jb21tYW5kKFNPTllfUElDX0NPTU1BTkRfU0VUQ0FNRVJBU0hBUlBORVNT
LAotCQkJCSAgICAgIG1leWUucGFyYW1zLnNoYXJwbmVzcyk7Ci0JCXNvbnlfcGljX2NhbWVyYV9j
b21tYW5kKFNPTllfUElDX0NPTU1BTkRfU0VUQ0FNRVJBQUdDLAotCQkJCSAgICAgIG1leWUucGFy
YW1zLmFnYyk7Ci0JCXNvbnlfcGljX2NhbWVyYV9jb21tYW5kKFNPTllfUElDX0NPTU1BTkRfU0VU
Q0FNRVJBUElDVFVSRSwKLQkJCQkgICAgICBtZXllLnBhcmFtcy5waWN0dXJlKTsKLQkJbXV0ZXhf
dW5sb2NrKCZtZXllLmxvY2spOwotCQlicmVhazsKLQl9Ci0KLQljYXNlIE1FWUVJT0NfUUJVRl9D
QVBUOiB7Ci0JCWludCAqbmIgPSBhcmc7Ci0KLQkJaWYgKCFtZXllLmdyYWJfZmJ1ZmZlcikKLQkJ
CXJldHVybiAtRUlOVkFMOwotCQlpZiAoKm5iID49IGdidWZmZXJzKQotCQkJcmV0dXJuIC1FSU5W
QUw7Ci0JCWlmICgqbmIgPCAwKSB7Ci0JCQkvKiBzdG9wIGNhcHR1cmUgKi8KLQkJCW1jaGlwX2hp
Y19zdG9wKCk7Ci0JCQlyZXR1cm4gMDsKLQkJfQotCQlpZiAobWV5ZS5ncmFiX2J1ZmZlclsqbmJd
LnN0YXRlICE9IE1FWUVfQlVGX1VOVVNFRCkKLQkJCXJldHVybiAtRUJVU1k7Ci0JCW11dGV4X2xv
Y2soJm1leWUubG9jayk7Ci0JCWlmIChtZXllLm1jaGlwX21vZGUgIT0gTUNISVBfSElDX01PREVf
Q09OVF9DT01QKQotCQkJbWNoaXBfY29udF9jb21wcmVzc2lvbl9zdGFydCgpOwotCQltZXllLmdy
YWJfYnVmZmVyWypuYl0uc3RhdGUgPSBNRVlFX0JVRl9VU0lORzsKLQkJa2ZpZm9fcHV0KG1leWUu
Z3JhYnEsICh1bnNpZ25lZCBjaGFyICopbmIsIHNpemVvZihpbnQpKTsKLQkJbXV0ZXhfdW5sb2Nr
KCZtZXllLmxvY2spOwotCQlicmVhazsKLQl9Ci0KLQljYXNlIE1FWUVJT0NfU1lOQzogewotCQlp
bnQgKmkgPSBhcmc7Ci0JCWludCB1bnVzZWQ7Ci0KLQkJaWYgKCppIDwgMCB8fCAqaSA+PSBnYnVm
ZmVycykKLQkJCXJldHVybiAtRUlOVkFMOwotCi0JCW11dGV4X2xvY2soJm1leWUubG9jayk7Ci0J
CXN3aXRjaCAobWV5ZS5ncmFiX2J1ZmZlclsqaV0uc3RhdGUpIHsKLQotCQljYXNlIE1FWUVfQlVG
X1VOVVNFRDoKLQkJCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKLQkJCXJldHVybiAtRUlOVkFM
OwotCQljYXNlIE1FWUVfQlVGX1VTSU5HOgotCQkJaWYgKGZpbGUtPmZfZmxhZ3MgJiBPX05PTkJM
T0NLKSB7Ci0JCQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOwotCQkJCXJldHVybiAtRUFHQUlO
OwotCQkJfQotCQkJaWYgKHdhaXRfZXZlbnRfaW50ZXJydXB0aWJsZShtZXllLnByb2NfbGlzdCwK
LQkJCQkJCSAgICAgKG1leWUuZ3JhYl9idWZmZXJbKmldLnN0YXRlICE9IE1FWUVfQlVGX1VTSU5H
KSkpIHsKLQkJCQltdXRleF91bmxvY2soJm1leWUubG9jayk7Ci0JCQkJcmV0dXJuIC1FSU5UUjsK
LQkJCX0KLQkJCS8qIGZhbGwgdGhyb3VnaCAqLwotCQljYXNlIE1FWUVfQlVGX0RPTkU6Ci0JCQlt
ZXllLmdyYWJfYnVmZmVyWyppXS5zdGF0ZSA9IE1FWUVfQlVGX1VOVVNFRDsKLQkJCWtmaWZvX2dl
dChtZXllLmRvbmVxLCAodW5zaWduZWQgY2hhciAqKSZ1bnVzZWQsIHNpemVvZihpbnQpKTsKLQkJ
fQotCQkqaSA9IG1leWUuZ3JhYl9idWZmZXJbKmldLnNpemU7Ci0JCW11dGV4X3VubG9jaygmbWV5
ZS5sb2NrKTsKLQkJYnJlYWs7Ci0JfQotCi0JY2FzZSBNRVlFSU9DX1NUSUxMQ0FQVDogewotCi0J
CWlmICghbWV5ZS5ncmFiX2ZidWZmZXIpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKG1leWUu
Z3JhYl9idWZmZXJbMF0uc3RhdGUgIT0gTUVZRV9CVUZfVU5VU0VEKQotCQkJcmV0dXJuIC1FQlVT
WTsKLQkJbXV0ZXhfbG9jaygmbWV5ZS5sb2NrKTsKLQkJbWV5ZS5ncmFiX2J1ZmZlclswXS5zdGF0
ZSA9IE1FWUVfQlVGX1VTSU5HOwotCQltY2hpcF90YWtlX3BpY3R1cmUoKTsKLQkJbWNoaXBfZ2V0
X3BpY3R1cmUoCi0JCQltZXllLmdyYWJfZmJ1ZmZlciwKLQkJCW1jaGlwX2hzaXplKCkgKiBtY2hp
cF92c2l6ZSgpICogMik7Ci0JCW1leWUuZ3JhYl9idWZmZXJbMF0uc3RhdGUgPSBNRVlFX0JVRl9E
T05FOwotCQltdXRleF91bmxvY2soJm1leWUubG9jayk7Ci0JCWJyZWFrOwotCX0KLQotCWNhc2Ug
TUVZRUlPQ19TVElMTEpDQVBUOiB7Ci0JCWludCAqbGVuID0gYXJnOwotCi0JCWlmICghbWV5ZS5n
cmFiX2ZidWZmZXIpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKG1leWUuZ3JhYl9idWZmZXJb
MF0uc3RhdGUgIT0gTUVZRV9CVUZfVU5VU0VEKQotCQkJcmV0dXJuIC1FQlVTWTsKLQkJbXV0ZXhf
bG9jaygmbWV5ZS5sb2NrKTsKLQkJbWV5ZS5ncmFiX2J1ZmZlclswXS5zdGF0ZSA9IE1FWUVfQlVG
X1VTSU5HOwotCQkqbGVuID0gLTE7Ci0JCXdoaWxlICgqbGVuID09IC0xKSB7Ci0JCQltY2hpcF90
YWtlX3BpY3R1cmUoKTsKLQkJCSpsZW4gPSBtY2hpcF9jb21wcmVzc19mcmFtZShtZXllLmdyYWJf
ZmJ1ZmZlciwgZ2J1ZnNpemUpOwotCQl9Ci0JCW1leWUuZ3JhYl9idWZmZXJbMF0uc3RhdGUgPSBN
RVlFX0JVRl9ET05FOwotCQltdXRleF91bmxvY2soJm1leWUubG9jayk7Ci0JCWJyZWFrOwotCX0K
LQotCWNhc2UgVklESU9DX1FVRVJZQ0FQOiB7Ci0JCXN0cnVjdCB2NGwyX2NhcGFiaWxpdHkgKmNh
cCA9IGFyZzsKLQotCQlpZiAoZm9yY2V2NGwxKQotCQkJcmV0dXJuIC1FSU5WQUw7Ci0KLQkJbWVt
c2V0KGNhcCwgMCwgc2l6ZW9mKCpjYXApKTsKLQkJc3RyY3B5KGNhcC0+ZHJpdmVyLCAibWV5ZSIp
OwotCQlzdHJjcHkoY2FwLT5jYXJkLCAibWV5ZSIpOwotCQlzcHJpbnRmKGNhcC0+YnVzX2luZm8s
ICJQQ0k6JXMiLCBwY2lfbmFtZShtZXllLm1jaGlwX2RldikpOwotCQljYXAtPnZlcnNpb24gPSAo
TUVZRV9EUklWRVJfTUFKT1JWRVJTSU9OIDw8IDgpICsKLQkJCSAgICAgICBNRVlFX0RSSVZFUl9N
SU5PUlZFUlNJT047Ci0JCWNhcC0+Y2FwYWJpbGl0aWVzID0gVjRMMl9DQVBfVklERU9fQ0FQVFVS
RSB8Ci0JCQkJICAgIFY0TDJfQ0FQX1NUUkVBTUlORzsKLQkJYnJlYWs7Ci0JfQotCi0JY2FzZSBW
SURJT0NfRU5VTUlOUFVUOiB7Ci0JCXN0cnVjdCB2NGwyX2lucHV0ICppID0gYXJnOwotCi0JCWlm
IChpLT5pbmRleCAhPSAwKQotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCW1lbXNldChpLCAwLCBzaXpl
b2YoKmkpKTsKLQkJaS0+aW5kZXggPSAwOwotCQlzdHJjcHkoaS0+bmFtZSwgIkNhbWVyYSIpOwot
CQlpLT50eXBlID0gVjRMMl9JTlBVVF9UWVBFX0NBTUVSQTsKLQkJYnJlYWs7Ci0JfQotCi0JY2Fz
ZSBWSURJT0NfR19JTlBVVDogewotCQlpbnQgKmkgPSBhcmc7Ci0KLQkJKmkgPSAwOwotCQlicmVh
azsKLQl9Ci0KLQljYXNlIFZJRElPQ19TX0lOUFVUOiB7Ci0JCWludCAqaSA9IGFyZzsKLQotCQlp
ZiAoKmkgIT0gMCkKLQkJCXJldHVybiAtRUlOVkFMOwotCQlicmVhazsKLQl9Ci0KLQljYXNlIFZJ
RElPQ19RVUVSWUNUUkw6IHsKLQkJc3RydWN0IHY0bDJfcXVlcnljdHJsICpjID0gYXJnOwotCi0J
CXN3aXRjaCAoYy0+aWQpIHsKLQotCQljYXNlIFY0TDJfQ0lEX0JSSUdIVE5FU1M6Ci0JCQljLT50
eXBlID0gVjRMMl9DVFJMX1RZUEVfSU5URUdFUjsKLQkJCXN0cmNweShjLT5uYW1lLCAiQnJpZ2h0
bmVzcyIpOwotCQkJYy0+bWluaW11bSA9IDA7Ci0JCQljLT5tYXhpbXVtID0gNjM7Ci0JCQljLT5z
dGVwID0gMTsKLQkJCWMtPmRlZmF1bHRfdmFsdWUgPSAzMjsKLQkJCWMtPmZsYWdzID0gMDsKLQkJ
CWJyZWFrOwotCQljYXNlIFY0TDJfQ0lEX0hVRToKLQkJCWMtPnR5cGUgPSBWNEwyX0NUUkxfVFlQ
RV9JTlRFR0VSOwotCQkJc3RyY3B5KGMtPm5hbWUsICJIdWUiKTsKLQkJCWMtPm1pbmltdW0gPSAw
OwotCQkJYy0+bWF4aW11bSA9IDYzOwotCQkJYy0+c3RlcCA9IDE7Ci0JCQljLT5kZWZhdWx0X3Zh
bHVlID0gMzI7Ci0JCQljLT5mbGFncyA9IDA7Ci0JCQlicmVhazsKLQkJY2FzZSBWNEwyX0NJRF9D
T05UUkFTVDoKLQkJCWMtPnR5cGUgPSBWNEwyX0NUUkxfVFlQRV9JTlRFR0VSOwotCQkJc3RyY3B5
KGMtPm5hbWUsICJDb250cmFzdCIpOwotCQkJYy0+bWluaW11bSA9IDA7Ci0JCQljLT5tYXhpbXVt
ID0gNjM7Ci0JCQljLT5zdGVwID0gMTsKLQkJCWMtPmRlZmF1bHRfdmFsdWUgPSAzMjsKLQkJCWMt
PmZsYWdzID0gMDsKLQkJCWJyZWFrOwotCQljYXNlIFY0TDJfQ0lEX1NBVFVSQVRJT046Ci0JCQlj
LT50eXBlID0gVjRMMl9DVFJMX1RZUEVfSU5URUdFUjsKLQkJCXN0cmNweShjLT5uYW1lLCAiU2F0
dXJhdGlvbiIpOwotCQkJYy0+bWluaW11bSA9IDA7Ci0JCQljLT5tYXhpbXVtID0gNjM7Ci0JCQlj
LT5zdGVwID0gMTsKLQkJCWMtPmRlZmF1bHRfdmFsdWUgPSAzMjsKLQkJCWMtPmZsYWdzID0gMDsK
LQkJCWJyZWFrOwotCQljYXNlIFY0TDJfQ0lEX0FHQzoKLQkJCWMtPnR5cGUgPSBWNEwyX0NUUkxf
VFlQRV9JTlRFR0VSOwotCQkJc3RyY3B5KGMtPm5hbWUsICJBZ2MiKTsKLQkJCWMtPm1pbmltdW0g
PSAwOwotCQkJYy0+bWF4aW11bSA9IDYzOwotCQkJYy0+c3RlcCA9IDE7Ci0JCQljLT5kZWZhdWx0
X3ZhbHVlID0gNDg7Ci0JCQljLT5mbGFncyA9IDA7Ci0JCQlicmVhazsKLQkJY2FzZSBWNEwyX0NJ
RF9NRVlFX1NIQVJQTkVTUzoKLQkJY2FzZSBWNEwyX0NJRF9TSEFSUE5FU1M6Ci0JCQljLT50eXBl
ID0gVjRMMl9DVFJMX1RZUEVfSU5URUdFUjsKLQkJCXN0cmNweShjLT5uYW1lLCAiU2hhcnBuZXNz
Iik7Ci0JCQljLT5taW5pbXVtID0gMDsKLQkJCWMtPm1heGltdW0gPSA2MzsKLQkJCWMtPnN0ZXAg
PSAxOwotCQkJYy0+ZGVmYXVsdF92YWx1ZSA9IDMyOwotCi0JCQkvKiBDb250aW51ZSB0byByZXBv
cnQgbGVnYWN5IHByaXZhdGUgU0hBUlBORVNTIGN0cmwgYnV0Ci0JCQkgKiBzYXkgaXQgaXMgZGlz
YWJsZWQgaW4gcHJlZmVyZW5jZSB0byBjdHJsIGluIHRoZSBzcGVjCi0JCQkgKi8KLQkJCWMtPmZs
YWdzID0gKGMtPmlkID09IFY0TDJfQ0lEX1NIQVJQTkVTUykgPyAwIDoKLQkJCQkJCQlWNEwyX0NU
UkxfRkxBR19ESVNBQkxFRDsKLQkJCWJyZWFrOwotCQljYXNlIFY0TDJfQ0lEX1BJQ1RVUkU6Ci0J
CQljLT50eXBlID0gVjRMMl9DVFJMX1RZUEVfSU5URUdFUjsKLQkJCXN0cmNweShjLT5uYW1lLCAi
UGljdHVyZSIpOwotCQkJYy0+bWluaW11bSA9IDA7Ci0JCQljLT5tYXhpbXVtID0gNjM7Ci0JCQlj
LT5zdGVwID0gMTsKLQkJCWMtPmRlZmF1bHRfdmFsdWUgPSAwOwotCQkJYy0+ZmxhZ3MgPSAwOwot
CQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURfSlBFR1FVQUw6Ci0JCQljLT50eXBlID0gVjRMMl9D
VFJMX1RZUEVfSU5URUdFUjsKLQkJCXN0cmNweShjLT5uYW1lLCAiSlBFRyBxdWFsaXR5Iik7Ci0J
CQljLT5taW5pbXVtID0gMDsKLQkJCWMtPm1heGltdW0gPSAxMDsKLQkJCWMtPnN0ZXAgPSAxOwot
CQkJYy0+ZGVmYXVsdF92YWx1ZSA9IDg7Ci0JCQljLT5mbGFncyA9IDA7Ci0JCQlicmVhazsKLQkJ
Y2FzZSBWNEwyX0NJRF9GUkFNRVJBVEU6Ci0JCQljLT50eXBlID0gVjRMMl9DVFJMX1RZUEVfSU5U
RUdFUjsKLQkJCXN0cmNweShjLT5uYW1lLCAiRnJhbWVyYXRlIik7Ci0JCQljLT5taW5pbXVtID0g
MDsKLQkJCWMtPm1heGltdW0gPSAzMTsKLQkJCWMtPnN0ZXAgPSAxOwotCQkJYy0+ZGVmYXVsdF92
YWx1ZSA9IDA7Ci0JCQljLT5mbGFncyA9IDA7Ci0JCQlicmVhazsKLQkJZGVmYXVsdDoKLQkJCXJl
dHVybiAtRUlOVkFMOwotCQl9Ci0JCWJyZWFrOwotCX0KLQotCWNhc2UgVklESU9DX1NfQ1RSTDog
ewotCQlzdHJ1Y3QgdjRsMl9jb250cm9sICpjID0gYXJnOwotCi0JCW11dGV4X2xvY2soJm1leWUu
bG9jayk7Ci0JCXN3aXRjaCAoYy0+aWQpIHsKLQkJY2FzZSBWNEwyX0NJRF9CUklHSFRORVNTOgot
CQkJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQoCi0JCQkJU09OWV9QSUNfQ09NTUFORF9TRVRDQU1F
UkFCUklHSFRORVNTLCBjLT52YWx1ZSk7Ci0JCQltZXllLnBpY3R1cmUuYnJpZ2h0bmVzcyA9IGMt
PnZhbHVlIDw8IDEwOwotCQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURfSFVFOgotCQkJc29ueV9w
aWNfY2FtZXJhX2NvbW1hbmQoCi0JCQkJU09OWV9QSUNfQ09NTUFORF9TRVRDQU1FUkFIVUUsIGMt
PnZhbHVlKTsKLQkJCW1leWUucGljdHVyZS5odWUgPSBjLT52YWx1ZSA8PCAxMDsKLQkJCWJyZWFr
OwotCQljYXNlIFY0TDJfQ0lEX0NPTlRSQVNUOgotCQkJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQo
Ci0JCQkJU09OWV9QSUNfQ09NTUFORF9TRVRDQU1FUkFDT05UUkFTVCwgYy0+dmFsdWUpOwotCQkJ
bWV5ZS5waWN0dXJlLmNvbnRyYXN0ID0gYy0+dmFsdWUgPDwgMTA7Ci0JCQlicmVhazsKLQkJY2Fz
ZSBWNEwyX0NJRF9TQVRVUkFUSU9OOgotCQkJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQoCi0JCQkJ
U09OWV9QSUNfQ09NTUFORF9TRVRDQU1FUkFDT0xPUiwgYy0+dmFsdWUpOwotCQkJbWV5ZS5waWN0
dXJlLmNvbG91ciA9IGMtPnZhbHVlIDw8IDEwOwotCQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURf
QUdDOgotCQkJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQoCi0JCQkJU09OWV9QSUNfQ09NTUFORF9T
RVRDQU1FUkFBR0MsIGMtPnZhbHVlKTsKLQkJCW1leWUucGFyYW1zLmFnYyA9IGMtPnZhbHVlOwot
CQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURfU0hBUlBORVNTOgotCQljYXNlIFY0TDJfQ0lEX01F
WUVfU0hBUlBORVNTOgotCQkJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQoCi0JCQkJU09OWV9QSUNf
Q09NTUFORF9TRVRDQU1FUkFTSEFSUE5FU1MsIGMtPnZhbHVlKTsKLQkJCW1leWUucGFyYW1zLnNo
YXJwbmVzcyA9IGMtPnZhbHVlOwotCQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURfUElDVFVSRToK
LQkJCXNvbnlfcGljX2NhbWVyYV9jb21tYW5kKAotCQkJCVNPTllfUElDX0NPTU1BTkRfU0VUQ0FN
RVJBUElDVFVSRSwgYy0+dmFsdWUpOwotCQkJbWV5ZS5wYXJhbXMucGljdHVyZSA9IGMtPnZhbHVl
OwotCQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURfSlBFR1FVQUw6Ci0JCQltZXllLnBhcmFtcy5x
dWFsaXR5ID0gYy0+dmFsdWU7Ci0JCQlicmVhazsKLQkJY2FzZSBWNEwyX0NJRF9GUkFNRVJBVEU6
Ci0JCQltZXllLnBhcmFtcy5mcmFtZXJhdGUgPSBjLT52YWx1ZTsKLQkJCWJyZWFrOwotCQlkZWZh
dWx0OgotCQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOwotCQkJcmV0dXJuIC1FSU5WQUw7Ci0J
CX0KLQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOwotCQlicmVhazsKLQl9Ci0KLQljYXNlIFZJ
RElPQ19HX0NUUkw6IHsKLQkJc3RydWN0IHY0bDJfY29udHJvbCAqYyA9IGFyZzsKLQotCQltdXRl
eF9sb2NrKCZtZXllLmxvY2spOwotCQlzd2l0Y2ggKGMtPmlkKSB7Ci0JCWNhc2UgVjRMMl9DSURf
QlJJR0hUTkVTUzoKLQkJCWMtPnZhbHVlID0gbWV5ZS5waWN0dXJlLmJyaWdodG5lc3MgPj4gMTA7
Ci0JCQlicmVhazsKLQkJY2FzZSBWNEwyX0NJRF9IVUU6Ci0JCQljLT52YWx1ZSA9IG1leWUucGlj
dHVyZS5odWUgPj4gMTA7Ci0JCQlicmVhazsKLQkJY2FzZSBWNEwyX0NJRF9DT05UUkFTVDoKLQkJ
CWMtPnZhbHVlID0gbWV5ZS5waWN0dXJlLmNvbnRyYXN0ID4+IDEwOwotCQkJYnJlYWs7Ci0JCWNh
c2UgVjRMMl9DSURfU0FUVVJBVElPTjoKLQkJCWMtPnZhbHVlID0gbWV5ZS5waWN0dXJlLmNvbG91
ciA+PiAxMDsKLQkJCWJyZWFrOwotCQljYXNlIFY0TDJfQ0lEX0FHQzoKLQkJCWMtPnZhbHVlID0g
bWV5ZS5wYXJhbXMuYWdjOwotCQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURfU0hBUlBORVNTOgot
CQljYXNlIFY0TDJfQ0lEX01FWUVfU0hBUlBORVNTOgotCQkJYy0+dmFsdWUgPSBtZXllLnBhcmFt
cy5zaGFycG5lc3M7Ci0JCQlicmVhazsKLQkJY2FzZSBWNEwyX0NJRF9QSUNUVVJFOgotCQkJYy0+
dmFsdWUgPSBtZXllLnBhcmFtcy5waWN0dXJlOwotCQkJYnJlYWs7Ci0JCWNhc2UgVjRMMl9DSURf
SlBFR1FVQUw6Ci0JCQljLT52YWx1ZSA9IG1leWUucGFyYW1zLnF1YWxpdHk7Ci0JCQlicmVhazsK
LQkJY2FzZSBWNEwyX0NJRF9GUkFNRVJBVEU6Ci0JCQljLT52YWx1ZSA9IG1leWUucGFyYW1zLmZy
YW1lcmF0ZTsKLQkJCWJyZWFrOwotCQlkZWZhdWx0OgotCQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxv
Y2spOwotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCX0KLQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2sp
OwotCQlicmVhazsKLQl9Ci0KLQljYXNlIFZJRElPQ19FTlVNX0ZNVDogewotCQlzdHJ1Y3QgdjRs
Ml9mbXRkZXNjICpmID0gYXJnOwotCi0JCWlmIChmLT5pbmRleCA+IDEpCi0JCQlyZXR1cm4gLUVJ
TlZBTDsKLQkJaWYgKGYtPnR5cGUgIT0gVjRMMl9CVUZfVFlQRV9WSURFT19DQVBUVVJFKQotCQkJ
cmV0dXJuIC1FSU5WQUw7Ci0JCWlmIChmLT5pbmRleCA9PSAwKSB7Ci0JCQkvKiBzdGFuZGFyZCBZ
VVYgNDIyIGNhcHR1cmUgKi8KLQkJCW1lbXNldChmLCAwLCBzaXplb2YoKmYpKTsKLQkJCWYtPmlu
ZGV4ID0gMDsKLQkJCWYtPnR5cGUgPSBWNEwyX0JVRl9UWVBFX1ZJREVPX0NBUFRVUkU7Ci0JCQlm
LT5mbGFncyA9IDA7Ci0JCQlzdHJjcHkoZi0+ZGVzY3JpcHRpb24sICJZVVY0MjIiKTsKLQkJCWYt
PnBpeGVsZm9ybWF0ID0gVjRMMl9QSVhfRk1UX1lVWVY7Ci0JCX0gZWxzZSB7Ci0JCQkvKiBjb21w
cmVzc2VkIE1KUEVHIGNhcHR1cmUgKi8KLQkJCW1lbXNldChmLCAwLCBzaXplb2YoKmYpKTsKLQkJ
CWYtPmluZGV4ID0gMTsKLQkJCWYtPnR5cGUgPSBWNEwyX0JVRl9UWVBFX1ZJREVPX0NBUFRVUkU7
Ci0JCQlmLT5mbGFncyA9IFY0TDJfRk1UX0ZMQUdfQ09NUFJFU1NFRDsKLQkJCXN0cmNweShmLT5k
ZXNjcmlwdGlvbiwgIk1KUEVHIik7Ci0JCQlmLT5waXhlbGZvcm1hdCA9IFY0TDJfUElYX0ZNVF9N
SlBFRzsKLQkJfQotCQlicmVhazsKLQl9Ci0KLQljYXNlIFZJRElPQ19UUllfRk1UOiB7Ci0JCXN0
cnVjdCB2NGwyX2Zvcm1hdCAqZiA9IGFyZzsKLQotCQlpZiAoZi0+dHlwZSAhPSBWNEwyX0JVRl9U
WVBFX1ZJREVPX0NBUFRVUkUpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKGYtPmZtdC5waXgu
cGl4ZWxmb3JtYXQgIT0gVjRMMl9QSVhfRk1UX1lVWVYgJiYKLQkJICAgIGYtPmZtdC5waXgucGl4
ZWxmb3JtYXQgIT0gVjRMMl9QSVhfRk1UX01KUEVHKQotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCWlm
IChmLT5mbXQucGl4LmZpZWxkICE9IFY0TDJfRklFTERfQU5ZICYmCi0JCSAgICBmLT5mbXQucGl4
LmZpZWxkICE9IFY0TDJfRklFTERfTk9ORSkKLQkJCXJldHVybiAtRUlOVkFMOwotCQlmLT5mbXQu
cGl4LmZpZWxkID0gVjRMMl9GSUVMRF9OT05FOwotCQlpZiAoZi0+Zm10LnBpeC53aWR0aCA8PSAz
MjApIHsKLQkJCWYtPmZtdC5waXgud2lkdGggPSAzMjA7Ci0JCQlmLT5mbXQucGl4LmhlaWdodCA9
IDI0MDsKLQkJfSBlbHNlIHsKLQkJCWYtPmZtdC5waXgud2lkdGggPSA2NDA7Ci0JCQlmLT5mbXQu
cGl4LmhlaWdodCA9IDQ4MDsKLQkJfQotCQlmLT5mbXQucGl4LmJ5dGVzcGVybGluZSA9IGYtPmZt
dC5waXgud2lkdGggKiAyOwotCQlmLT5mbXQucGl4LnNpemVpbWFnZSA9IGYtPmZtdC5waXguaGVp
Z2h0ICoKLQkJCQkgICAgICAgZi0+Zm10LnBpeC5ieXRlc3BlcmxpbmU7Ci0JCWYtPmZtdC5waXgu
Y29sb3JzcGFjZSA9IDA7Ci0JCWYtPmZtdC5waXgucHJpdiA9IDA7Ci0JCWJyZWFrOwotCX0KLQot
CWNhc2UgVklESU9DX0dfRk1UOiB7Ci0JCXN0cnVjdCB2NGwyX2Zvcm1hdCAqZiA9IGFyZzsKLQot
CQlpZiAoZi0+dHlwZSAhPSBWNEwyX0JVRl9UWVBFX1ZJREVPX0NBUFRVUkUpCi0JCQlyZXR1cm4g
LUVJTlZBTDsKLQkJbWVtc2V0KCZmLT5mbXQucGl4LCAwLCBzaXplb2Yoc3RydWN0IHY0bDJfcGl4
X2Zvcm1hdCkpOwotCQlmLT50eXBlID0gVjRMMl9CVUZfVFlQRV9WSURFT19DQVBUVVJFOwotCQlz
d2l0Y2ggKG1leWUubWNoaXBfbW9kZSkgewotCQljYXNlIE1DSElQX0hJQ19NT0RFX0NPTlRfT1VU
OgotCQlkZWZhdWx0OgotCQkJZi0+Zm10LnBpeC5waXhlbGZvcm1hdCA9IFY0TDJfUElYX0ZNVF9Z
VVlWOwotCQkJYnJlYWs7Ci0JCWNhc2UgTUNISVBfSElDX01PREVfQ09OVF9DT01QOgotCQkJZi0+
Zm10LnBpeC5waXhlbGZvcm1hdCA9IFY0TDJfUElYX0ZNVF9NSlBFRzsKLQkJCWJyZWFrOwotCQl9
Ci0JCWYtPmZtdC5waXguZmllbGQgPSBWNEwyX0ZJRUxEX05PTkU7Ci0JCWYtPmZtdC5waXgud2lk
dGggPSBtY2hpcF9oc2l6ZSgpOwotCQlmLT5mbXQucGl4LmhlaWdodCA9IG1jaGlwX3ZzaXplKCk7
Ci0JCWYtPmZtdC5waXguYnl0ZXNwZXJsaW5lID0gZi0+Zm10LnBpeC53aWR0aCAqIDI7Ci0JCWYt
PmZtdC5waXguc2l6ZWltYWdlID0gZi0+Zm10LnBpeC5oZWlnaHQgKgotCQkJCSAgICAgICBmLT5m
bXQucGl4LmJ5dGVzcGVybGluZTsKLQkJZi0+Zm10LnBpeC5jb2xvcnNwYWNlID0gMDsKLQkJZi0+
Zm10LnBpeC5wcml2ID0gMDsKLQkJYnJlYWs7Ci0JfQotCi0JY2FzZSBWSURJT0NfU19GTVQ6IHsK
LQkJc3RydWN0IHY0bDJfZm9ybWF0ICpmID0gYXJnOwotCi0JCWlmIChmLT50eXBlICE9IFY0TDJf
QlVGX1RZUEVfVklERU9fQ0FQVFVSRSkKLQkJCXJldHVybiAtRUlOVkFMOwotCQlpZiAoZi0+Zm10
LnBpeC5waXhlbGZvcm1hdCAhPSBWNEwyX1BJWF9GTVRfWVVZViAmJgotCQkgICAgZi0+Zm10LnBp
eC5waXhlbGZvcm1hdCAhPSBWNEwyX1BJWF9GTVRfTUpQRUcpCi0JCQlyZXR1cm4gLUVJTlZBTDsK
LQkJaWYgKGYtPmZtdC5waXguZmllbGQgIT0gVjRMMl9GSUVMRF9BTlkgJiYKLQkJICAgIGYtPmZt
dC5waXguZmllbGQgIT0gVjRMMl9GSUVMRF9OT05FKQotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCWYt
PmZtdC5waXguZmllbGQgPSBWNEwyX0ZJRUxEX05PTkU7Ci0JCW11dGV4X2xvY2soJm1leWUubG9j
ayk7Ci0JCWlmIChmLT5mbXQucGl4LndpZHRoIDw9IDMyMCkgewotCQkJZi0+Zm10LnBpeC53aWR0
aCA9IDMyMDsKLQkJCWYtPmZtdC5waXguaGVpZ2h0ID0gMjQwOwotCQkJbWV5ZS5wYXJhbXMuc3Vi
c2FtcGxlID0gMTsKLQkJfSBlbHNlIHsKLQkJCWYtPmZtdC5waXgud2lkdGggPSA2NDA7Ci0JCQlm
LT5mbXQucGl4LmhlaWdodCA9IDQ4MDsKLQkJCW1leWUucGFyYW1zLnN1YnNhbXBsZSA9IDA7Ci0J
CX0KLQkJc3dpdGNoIChmLT5mbXQucGl4LnBpeGVsZm9ybWF0KSB7Ci0JCWNhc2UgVjRMMl9QSVhf
Rk1UX1lVWVY6Ci0JCQltZXllLm1jaGlwX21vZGUgPSBNQ0hJUF9ISUNfTU9ERV9DT05UX09VVDsK
LQkJCWJyZWFrOwotCQljYXNlIFY0TDJfUElYX0ZNVF9NSlBFRzoKLQkJCW1leWUubWNoaXBfbW9k
ZSA9IE1DSElQX0hJQ19NT0RFX0NPTlRfQ09NUDsKLQkJCWJyZWFrOwotCQl9Ci0JCW11dGV4X3Vu
bG9jaygmbWV5ZS5sb2NrKTsKLQkJZi0+Zm10LnBpeC5ieXRlc3BlcmxpbmUgPSBmLT5mbXQucGl4
LndpZHRoICogMjsKLQkJZi0+Zm10LnBpeC5zaXplaW1hZ2UgPSBmLT5mbXQucGl4LmhlaWdodCAq
Ci0JCQkJICAgICAgIGYtPmZtdC5waXguYnl0ZXNwZXJsaW5lOwotCQlmLT5mbXQucGl4LmNvbG9y
c3BhY2UgPSAwOwotCQlmLT5mbXQucGl4LnByaXYgPSAwOwotCi0JCWJyZWFrOwotCX0KLQotCWNh
c2UgVklESU9DX1JFUUJVRlM6IHsKLQkJc3RydWN0IHY0bDJfcmVxdWVzdGJ1ZmZlcnMgKnJlcSA9
IGFyZzsKLQkJaW50IGk7Ci0KLQkJaWYgKHJlcS0+dHlwZSAhPSBWNEwyX0JVRl9UWVBFX1ZJREVP
X0NBUFRVUkUpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKHJlcS0+bWVtb3J5ICE9IFY0TDJf
TUVNT1JZX01NQVApCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKG1leWUuZ3JhYl9mYnVmZmVy
ICYmIHJlcS0+Y291bnQgPT0gZ2J1ZmZlcnMpIHsKLQkJCS8qIGFscmVhZHkgYWxsb2NhdGVkLCBu
byBtb2RpZmljYXRpb25zICovCi0JCQlicmVhazsKLQkJfQotCQltdXRleF9sb2NrKCZtZXllLmxv
Y2spOwotCQlpZiAobWV5ZS5ncmFiX2ZidWZmZXIpIHsKLQkJCWZvciAoaSA9IDA7IGkgPCBnYnVm
ZmVyczsgaSsrKQotCQkJCWlmIChtZXllLnZtYV91c2VfY291bnRbaV0pIHsKLQkJCQkJbXV0ZXhf
dW5sb2NrKCZtZXllLmxvY2spOwotCQkJCQlyZXR1cm4gLUVJTlZBTDsKLQkJCQl9Ci0JCQlydmZy
ZWUobWV5ZS5ncmFiX2ZidWZmZXIsIGdidWZmZXJzICogZ2J1ZnNpemUpOwotCQkJbWV5ZS5ncmFi
X2ZidWZmZXIgPSBOVUxMOwotCQl9Ci0JCWdidWZmZXJzID0gbWF4KDIsIG1pbigoaW50KXJlcS0+
Y291bnQsIE1FWUVfTUFYX0JVRk5CUlMpKTsKLQkJcmVxLT5jb3VudCA9IGdidWZmZXJzOwotCQlt
ZXllLmdyYWJfZmJ1ZmZlciA9IHJ2bWFsbG9jKGdidWZmZXJzICogZ2J1ZnNpemUpOwotCQlpZiAo
IW1leWUuZ3JhYl9mYnVmZmVyKSB7Ci0JCQlwcmludGsoS0VSTl9FUlIgIm1leWU6IHY0bCBmcmFt
ZWJ1ZmZlciBhbGxvY2F0aW9uIgotCQkJCQkiIGZhaWxlZFxuIik7Ci0JCQltdXRleF91bmxvY2so
Jm1leWUubG9jayk7Ci0JCQlyZXR1cm4gLUVOT01FTTsKLQkJfQotCQlmb3IgKGkgPSAwOyBpIDwg
Z2J1ZmZlcnM7IGkrKykKLQkJCW1leWUudm1hX3VzZV9jb3VudFtpXSA9IDA7Ci0JCW11dGV4X3Vu
bG9jaygmbWV5ZS5sb2NrKTsKLQkJYnJlYWs7Ci0JfQotCi0JY2FzZSBWSURJT0NfUVVFUllCVUY6
IHsKLQkJc3RydWN0IHY0bDJfYnVmZmVyICpidWYgPSBhcmc7Ci0JCWludCBpbmRleCA9IGJ1Zi0+
aW5kZXg7Ci0KLQkJaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBnYnVmZmVycykKLQkJCXJldHVy
biAtRUlOVkFMOwotCQltZW1zZXQoYnVmLCAwLCBzaXplb2YoKmJ1ZikpOwotCQlidWYtPnR5cGUg
PSBWNEwyX0JVRl9UWVBFX1ZJREVPX0NBUFRVUkU7Ci0JCWJ1Zi0+aW5kZXggPSBpbmRleDsKLQkJ
YnVmLT5ieXRlc3VzZWQgPSBtZXllLmdyYWJfYnVmZmVyW2luZGV4XS5zaXplOwotCQlidWYtPmZs
YWdzID0gVjRMMl9CVUZfRkxBR19NQVBQRUQ7Ci0JCWlmIChtZXllLmdyYWJfYnVmZmVyW2luZGV4
XS5zdGF0ZSA9PSBNRVlFX0JVRl9VU0lORykKLQkJCWJ1Zi0+ZmxhZ3MgfD0gVjRMMl9CVUZfRkxB
R19RVUVVRUQ7Ci0JCWlmIChtZXllLmdyYWJfYnVmZmVyW2luZGV4XS5zdGF0ZSA9PSBNRVlFX0JV
Rl9ET05FKQotCQkJYnVmLT5mbGFncyB8PSBWNEwyX0JVRl9GTEFHX0RPTkU7Ci0JCWJ1Zi0+Zmll
bGQgPSBWNEwyX0ZJRUxEX05PTkU7Ci0JCWJ1Zi0+dGltZXN0YW1wID0gbWV5ZS5ncmFiX2J1ZmZl
cltpbmRleF0udGltZXN0YW1wOwotCQlidWYtPnNlcXVlbmNlID0gbWV5ZS5ncmFiX2J1ZmZlcltp
bmRleF0uc2VxdWVuY2U7Ci0JCWJ1Zi0+bWVtb3J5ID0gVjRMMl9NRU1PUllfTU1BUDsKLQkJYnVm
LT5tLm9mZnNldCA9IGluZGV4ICogZ2J1ZnNpemU7Ci0JCWJ1Zi0+bGVuZ3RoID0gZ2J1ZnNpemU7
Ci0JCWJyZWFrOwotCX0KLQotCWNhc2UgVklESU9DX1FCVUY6IHsKLQkJc3RydWN0IHY0bDJfYnVm
ZmVyICpidWYgPSBhcmc7Ci0KLQkJaWYgKGJ1Zi0+dHlwZSAhPSBWNEwyX0JVRl9UWVBFX1ZJREVP
X0NBUFRVUkUpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKGJ1Zi0+bWVtb3J5ICE9IFY0TDJf
TUVNT1JZX01NQVApCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKGJ1Zi0+aW5kZXggPCAwIHx8
IGJ1Zi0+aW5kZXggPj0gZ2J1ZmZlcnMpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKG1leWUu
Z3JhYl9idWZmZXJbYnVmLT5pbmRleF0uc3RhdGUgIT0gTUVZRV9CVUZfVU5VU0VEKQotCQkJcmV0
dXJuIC1FSU5WQUw7Ci0JCW11dGV4X2xvY2soJm1leWUubG9jayk7Ci0JCWJ1Zi0+ZmxhZ3MgfD0g
VjRMMl9CVUZfRkxBR19RVUVVRUQ7Ci0JCWJ1Zi0+ZmxhZ3MgJj0gflY0TDJfQlVGX0ZMQUdfRE9O
RTsKLQkJbWV5ZS5ncmFiX2J1ZmZlcltidWYtPmluZGV4XS5zdGF0ZSA9IE1FWUVfQlVGX1VTSU5H
OwotCQlrZmlmb19wdXQobWV5ZS5ncmFicSwgKHVuc2lnbmVkIGNoYXIgKikmYnVmLT5pbmRleCwg
c2l6ZW9mKGludCkpOwotCQltdXRleF91bmxvY2soJm1leWUubG9jayk7Ci0JCWJyZWFrOwotCX0K
LQotCWNhc2UgVklESU9DX0RRQlVGOiB7Ci0JCXN0cnVjdCB2NGwyX2J1ZmZlciAqYnVmID0gYXJn
OwotCQlpbnQgcmVxbnI7Ci0KLQkJaWYgKGJ1Zi0+dHlwZSAhPSBWNEwyX0JVRl9UWVBFX1ZJREVP
X0NBUFRVUkUpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJaWYgKGJ1Zi0+bWVtb3J5ICE9IFY0TDJf
TUVNT1JZX01NQVApCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQotCQltdXRleF9sb2NrKCZtZXllLmxv
Y2spOwotCQlpZiAoa2ZpZm9fbGVuKG1leWUuZG9uZXEpID09IDAgJiYgZmlsZS0+Zl9mbGFncyAm
IE9fTk9OQkxPQ0spIHsKKwkJcmV0dXJuIC1FSU5WQUw7CisJY2FzZSBNRVlFX0JVRl9VU0lORzoK
KwkJaWYgKGZpbGUtPmZfZmxhZ3MgJiBPX05PTkJMT0NLKSB7CiAJCQltdXRleF91bmxvY2soJm1l
eWUubG9jayk7CiAJCQlyZXR1cm4gLUVBR0FJTjsKIAkJfQogCQlpZiAod2FpdF9ldmVudF9pbnRl
cnJ1cHRpYmxlKG1leWUucHJvY19saXN0LAotCQkJCQkgICAgIGtmaWZvX2xlbihtZXllLmRvbmVx
KSAhPSAwKSA8IDApIHsKKwkJCQkJICAgICAobWV5ZS5ncmFiX2J1ZmZlclsqaV0uc3RhdGUgIT0g
TUVZRV9CVUZfVVNJTkcpKSkgewogCQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOwogCQkJcmV0
dXJuIC1FSU5UUjsKIAkJfQotCQlpZiAoIWtmaWZvX2dldChtZXllLmRvbmVxLCAodW5zaWduZWQg
Y2hhciAqKSZyZXFuciwKLQkJCSAgICAgICBzaXplb2YoaW50KSkpIHsKLQkJCW11dGV4X3VubG9j
aygmbWV5ZS5sb2NrKTsKLQkJCXJldHVybiAtRUJVU1k7Ci0JCX0KLQkJaWYgKG1leWUuZ3JhYl9i
dWZmZXJbcmVxbnJdLnN0YXRlICE9IE1FWUVfQlVGX0RPTkUpIHsKLQkJCW11dGV4X3VubG9jaygm
bWV5ZS5sb2NrKTsKLQkJCXJldHVybiAtRUlOVkFMOwotCQl9Ci0JCWJ1Zi0+aW5kZXggPSByZXFu
cjsKLQkJYnVmLT5ieXRlc3VzZWQgPSBtZXllLmdyYWJfYnVmZmVyW3JlcW5yXS5zaXplOwotCQli
dWYtPmZsYWdzID0gVjRMMl9CVUZfRkxBR19NQVBQRUQ7Ci0JCWJ1Zi0+ZmllbGQgPSBWNEwyX0ZJ
RUxEX05PTkU7Ci0JCWJ1Zi0+dGltZXN0YW1wID0gbWV5ZS5ncmFiX2J1ZmZlcltyZXFucl0udGlt
ZXN0YW1wOwotCQlidWYtPnNlcXVlbmNlID0gbWV5ZS5ncmFiX2J1ZmZlcltyZXFucl0uc2VxdWVu
Y2U7Ci0JCWJ1Zi0+bWVtb3J5ID0gVjRMMl9NRU1PUllfTU1BUDsKLQkJYnVmLT5tLm9mZnNldCA9
IHJlcW5yICogZ2J1ZnNpemU7Ci0JCWJ1Zi0+bGVuZ3RoID0gZ2J1ZnNpemU7Ci0JCW1leWUuZ3Jh
Yl9idWZmZXJbcmVxbnJdLnN0YXRlID0gTUVZRV9CVUZfVU5VU0VEOwotCQltdXRleF91bmxvY2so
Jm1leWUubG9jayk7Ci0JCWJyZWFrOworCQkvKiBmYWxsIHRocm91Z2ggKi8KKwljYXNlIE1FWUVf
QlVGX0RPTkU6CisJCW1leWUuZ3JhYl9idWZmZXJbKmldLnN0YXRlID0gTUVZRV9CVUZfVU5VU0VE
OworCQlrZmlmb19nZXQobWV5ZS5kb25lcSwgKHVuc2lnbmVkIGNoYXIgKikmdW51c2VkLCBzaXpl
b2YoaW50KSk7CisJfQorCSppID0gbWV5ZS5ncmFiX2J1ZmZlclsqaV0uc2l6ZTsKKwltdXRleF91
bmxvY2soJm1leWUubG9jayk7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbWV5ZWlvY19z
dGlsbGNhcHQodm9pZCkKK3sKKwlpZiAoIW1leWUuZ3JhYl9mYnVmZmVyKQorCQlyZXR1cm4gLUVJ
TlZBTDsKKworCWlmIChtZXllLmdyYWJfYnVmZmVyWzBdLnN0YXRlICE9IE1FWUVfQlVGX1VOVVNF
RCkKKwkJcmV0dXJuIC1FQlVTWTsKKworCW11dGV4X2xvY2soJm1leWUubG9jayk7CisJbWV5ZS5n
cmFiX2J1ZmZlclswXS5zdGF0ZSA9IE1FWUVfQlVGX1VTSU5HOworCW1jaGlwX3Rha2VfcGljdHVy
ZSgpOworCisJbWNoaXBfZ2V0X3BpY3R1cmUoIG1leWUuZ3JhYl9mYnVmZmVyLCAKKwkJCW1jaGlw
X2hzaXplKCkgKiBtY2hpcF92c2l6ZSgpICogMik7CisKKwltZXllLmdyYWJfYnVmZmVyWzBdLnN0
YXRlID0gTUVZRV9CVUZfRE9ORTsKKwltdXRleF91bmxvY2soJm1leWUubG9jayk7CisKKwlyZXR1
cm4gMDsKK30KKworc3RhdGljIGludCBtZXllaW9jX3N0aWxsamNhcHQoaW50ICpsZW4pCit7CisJ
aWYgKCFtZXllLmdyYWJfZmJ1ZmZlcikKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAobWV5ZS5n
cmFiX2J1ZmZlclswXS5zdGF0ZSAhPSBNRVlFX0JVRl9VTlVTRUQpCisJCXJldHVybiAtRUJVU1k7
CisKKwltdXRleF9sb2NrKCZtZXllLmxvY2spOworCW1leWUuZ3JhYl9idWZmZXJbMF0uc3RhdGUg
PSBNRVlFX0JVRl9VU0lORzsKKwkqbGVuID0gLTE7CisKKwl3aGlsZSAoKmxlbiA9PSAtMSkgewor
CQltY2hpcF90YWtlX3BpY3R1cmUoKTsKKwkJKmxlbiA9IG1jaGlwX2NvbXByZXNzX2ZyYW1lKG1l
eWUuZ3JhYl9mYnVmZmVyLCBnYnVmc2l6ZSk7CiAJfQogCi0JY2FzZSBWSURJT0NfU1RSRUFNT046
IHsKLQkJbXV0ZXhfbG9jaygmbWV5ZS5sb2NrKTsKLQkJc3dpdGNoIChtZXllLm1jaGlwX21vZGUp
IHsKLQkJY2FzZSBNQ0hJUF9ISUNfTU9ERV9DT05UX09VVDoKLQkJCW1jaGlwX2NvbnRpbnVvdXNf
c3RhcnQoKTsKLQkJCWJyZWFrOwotCQljYXNlIE1DSElQX0hJQ19NT0RFX0NPTlRfQ09NUDoKLQkJ
CW1jaGlwX2NvbnRfY29tcHJlc3Npb25fc3RhcnQoKTsKLQkJCWJyZWFrOwotCQlkZWZhdWx0Ogot
CQkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOwotCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCX0KLQkJ
bXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOworCW1leWUuZ3JhYl9idWZmZXJbMF0uc3RhdGUgPSBN
RVlFX0JVRl9ET05FOworCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKKwlyZXR1cm4gMDsKK30K
Kworc3RhdGljIGludCB2aWRpb2NfcXVlcnljYXAoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQgKmZo
LCBzdHJ1Y3QgdjRsMl9jYXBhYmlsaXR5ICpjYXApIAoreworCW1lbXNldChjYXAsIDAsIHNpemVv
ZigqY2FwKSk7CisJc3RyY3B5KGNhcC0+ZHJpdmVyLCAibWV5ZSIpOworCXN0cmNweShjYXAtPmNh
cmQsICJtZXllIik7CisJc3ByaW50ZihjYXAtPmJ1c19pbmZvLCAiUENJOiVzIiwgcGNpX25hbWUo
bWV5ZS5tY2hpcF9kZXYpKTsKKworCWNhcC0+dmVyc2lvbiA9IChNRVlFX0RSSVZFUl9NQUpPUlZF
UlNJT04gPDwgOCkgKworCQkgICAgICAgTUVZRV9EUklWRVJfTUlOT1JWRVJTSU9OOworCisJY2Fw
LT5jYXBhYmlsaXRpZXMgPSBWNEwyX0NBUF9WSURFT19DQVBUVVJFIHwKKwkJCSAgICBWNEwyX0NB
UF9TVFJFQU1JTkc7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCB2aWRpb2NfZW51bV9p
bnB1dChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHN0cnVjdCB2NGwyX2lucHV0ICppKQor
eworCWlmIChpLT5pbmRleCAhPSAwKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCW1lbXNldChpLCAw
LCBzaXplb2YoKmkpKTsKKwlpLT5pbmRleCA9IDA7CisJc3RyY3B5KGktPm5hbWUsICJDYW1lcmEi
KTsKKwlpLT50eXBlID0gVjRMMl9JTlBVVF9UWVBFX0NBTUVSQTsKKworCXJldHVybiAwOworfQor
CitzdGF0aWMgaW50IHZpZGlvY19nX2lucHV0KHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpmaCwg
dW5zaWduZWQgaW50ICppKQoreworCSppID0gMDsKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGlu
dCB2aWRpb2Nfc19pbnB1dChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHVuc2lnbmVkIGlu
dCBpKQoreworCWlmIChpICE9IDApCisJCXJldHVybiAtRUlOVkFMOworCisJcmV0dXJuIDA7Cit9
CisKK3N0YXRpYyBpbnQgdmlkaW9jX3F1ZXJ5Y3RybChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAq
ZmgsIHN0cnVjdCB2NGwyX3F1ZXJ5Y3RybCAqYykKK3sKKwlzd2l0Y2ggKGMtPmlkKSB7CisKKwlj
YXNlIFY0TDJfQ0lEX0JSSUdIVE5FU1M6CisJCWMtPnR5cGUgPSBWNEwyX0NUUkxfVFlQRV9JTlRF
R0VSOworCQlzdHJjcHkoYy0+bmFtZSwgIkJyaWdodG5lc3MiKTsKKwkJYy0+bWluaW11bSA9IDA7
CisJCWMtPm1heGltdW0gPSA2MzsKKwkJYy0+c3RlcCA9IDE7CisJCWMtPmRlZmF1bHRfdmFsdWUg
PSAzMjsKKwkJYy0+ZmxhZ3MgPSAwOwogCQlicmVhazsKLQl9CisJY2FzZSBWNEwyX0NJRF9IVUU6
CisJCWMtPnR5cGUgPSBWNEwyX0NUUkxfVFlQRV9JTlRFR0VSOworCQlzdHJjcHkoYy0+bmFtZSwg
Ikh1ZSIpOworCQljLT5taW5pbXVtID0gMDsKKwkJYy0+bWF4aW11bSA9IDYzOworCQljLT5zdGVw
ID0gMTsKKwkJYy0+ZGVmYXVsdF92YWx1ZSA9IDMyOworCQljLT5mbGFncyA9IDA7CisJCWJyZWFr
OworCWNhc2UgVjRMMl9DSURfQ09OVFJBU1Q6CisJCWMtPnR5cGUgPSBWNEwyX0NUUkxfVFlQRV9J
TlRFR0VSOworCQlzdHJjcHkoYy0+bmFtZSwgIkNvbnRyYXN0Iik7CisJCWMtPm1pbmltdW0gPSAw
OworCQljLT5tYXhpbXVtID0gNjM7CisJCWMtPnN0ZXAgPSAxOworCQljLT5kZWZhdWx0X3ZhbHVl
ID0gMzI7CisJCWMtPmZsYWdzID0gMDsKKwkJYnJlYWs7CisJY2FzZSBWNEwyX0NJRF9TQVRVUkFU
SU9OOgorCQljLT50eXBlID0gVjRMMl9DVFJMX1RZUEVfSU5URUdFUjsKKwkJc3RyY3B5KGMtPm5h
bWUsICJTYXR1cmF0aW9uIik7CisJCWMtPm1pbmltdW0gPSAwOworCQljLT5tYXhpbXVtID0gNjM7
CisJCWMtPnN0ZXAgPSAxOworCQljLT5kZWZhdWx0X3ZhbHVlID0gMzI7CisJCWMtPmZsYWdzID0g
MDsKKwkJYnJlYWs7CisJY2FzZSBWNEwyX0NJRF9BR0M6CisJCWMtPnR5cGUgPSBWNEwyX0NUUkxf
VFlQRV9JTlRFR0VSOworCQlzdHJjcHkoYy0+bmFtZSwgIkFnYyIpOworCQljLT5taW5pbXVtID0g
MDsKKwkJYy0+bWF4aW11bSA9IDYzOworCQljLT5zdGVwID0gMTsKKwkJYy0+ZGVmYXVsdF92YWx1
ZSA9IDQ4OworCQljLT5mbGFncyA9IDA7CisJCWJyZWFrOworCWNhc2UgVjRMMl9DSURfTUVZRV9T
SEFSUE5FU1M6CisJY2FzZSBWNEwyX0NJRF9TSEFSUE5FU1M6CisJCWMtPnR5cGUgPSBWNEwyX0NU
UkxfVFlQRV9JTlRFR0VSOworCQlzdHJjcHkoYy0+bmFtZSwgIlNoYXJwbmVzcyIpOworCQljLT5t
aW5pbXVtID0gMDsKKwkJYy0+bWF4aW11bSA9IDYzOworCQljLT5zdGVwID0gMTsKKwkJYy0+ZGVm
YXVsdF92YWx1ZSA9IDMyOwogCi0JY2FzZSBWSURJT0NfU1RSRUFNT0ZGOiB7Ci0JCWludCBpOwot
Ci0JCW11dGV4X2xvY2soJm1leWUubG9jayk7Ci0JCW1jaGlwX2hpY19zdG9wKCk7Ci0JCWtmaWZv
X3Jlc2V0KG1leWUuZ3JhYnEpOwotCQlrZmlmb19yZXNldChtZXllLmRvbmVxKTsKLQkJZm9yIChp
ID0gMDsgaSA8IE1FWUVfTUFYX0JVRk5CUlM7IGkrKykKLQkJCW1leWUuZ3JhYl9idWZmZXJbaV0u
c3RhdGUgPSBNRVlFX0JVRl9VTlVTRUQ7Ci0JCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKKwkJ
LyogQ29udGludWUgdG8gcmVwb3J0IGxlZ2FjeSBwcml2YXRlIFNIQVJQTkVTUyBjdHJsIGJ1dAor
CQkgKiBzYXkgaXQgaXMgZGlzYWJsZWQgaW4gcHJlZmVyZW5jZSB0byBjdHJsIGluIHRoZSBzcGVj
CisJCSAqLworCQljLT5mbGFncyA9IChjLT5pZCA9PSBWNEwyX0NJRF9TSEFSUE5FU1MpID8gMCA6
CisJCQkJCQlWNEwyX0NUUkxfRkxBR19ESVNBQkxFRDsKIAkJYnJlYWs7Ci0JfQotCi0JLyoKLQkg
KiBYWFggd2hhdCBhYm91dCBwcml2YXRlIHNuYXBzaG90IGlvY3RscyA/Ci0JICogRG8gdGhleSBu
ZWVkIHRvIGJlIGNvbnZlcnRlZCB0byBWNEwyID8KLQkqLwotCisJY2FzZSBWNEwyX0NJRF9QSUNU
VVJFOgorCQljLT50eXBlID0gVjRMMl9DVFJMX1RZUEVfSU5URUdFUjsKKwkJc3RyY3B5KGMtPm5h
bWUsICJQaWN0dXJlIik7CisJCWMtPm1pbmltdW0gPSAwOworCQljLT5tYXhpbXVtID0gNjM7CisJ
CWMtPnN0ZXAgPSAxOworCQljLT5kZWZhdWx0X3ZhbHVlID0gMDsKKwkJYy0+ZmxhZ3MgPSAwOwor
CQlicmVhazsKKwljYXNlIFY0TDJfQ0lEX0pQRUdRVUFMOgorCQljLT50eXBlID0gVjRMMl9DVFJM
X1RZUEVfSU5URUdFUjsKKwkJc3RyY3B5KGMtPm5hbWUsICJKUEVHIHF1YWxpdHkiKTsKKwkJYy0+
bWluaW11bSA9IDA7CisJCWMtPm1heGltdW0gPSAxMDsKKwkJYy0+c3RlcCA9IDE7CisJCWMtPmRl
ZmF1bHRfdmFsdWUgPSA4OworCQljLT5mbGFncyA9IDA7CisJCWJyZWFrOworCWNhc2UgVjRMMl9D
SURfRlJBTUVSQVRFOgorCQljLT50eXBlID0gVjRMMl9DVFJMX1RZUEVfSU5URUdFUjsKKwkJc3Ry
Y3B5KGMtPm5hbWUsICJGcmFtZXJhdGUiKTsKKwkJYy0+bWluaW11bSA9IDA7CisJCWMtPm1heGlt
dW0gPSAzMTsKKwkJYy0+c3RlcCA9IDE7CisJCWMtPmRlZmF1bHRfdmFsdWUgPSAwOworCQljLT5m
bGFncyA9IDA7CisJCWJyZWFrOwogCWRlZmF1bHQ6Ci0JCXJldHVybiAtRU5PSU9DVExDTUQ7CisJ
CXJldHVybiAtRUlOVkFMOwogCX0KIAogCXJldHVybiAwOwogfQogCi1zdGF0aWMgaW50IG1leWVf
aW9jdGwoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbGUsCi0JCSAgICAgdW5z
aWduZWQgaW50IGNtZCwgdW5zaWduZWQgbG9uZyBhcmcpCitzdGF0aWMgaW50IHZpZGlvY19zX2N0
cmwoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQgKmZoLCBzdHJ1Y3QgdjRsMl9jb250cm9sICpjKQog
ewotCXJldHVybiB2aWRlb191c2VyY29weShpbm9kZSwgZmlsZSwgY21kLCBhcmcsIG1leWVfZG9f
aW9jdGwpOworCW11dGV4X2xvY2soJm1leWUubG9jayk7CisJc3dpdGNoIChjLT5pZCkgeworCWNh
c2UgVjRMMl9DSURfQlJJR0hUTkVTUzoKKwkJc29ueV9waWNfY2FtZXJhX2NvbW1hbmQoCisJCQlT
T05ZX1BJQ19DT01NQU5EX1NFVENBTUVSQUJSSUdIVE5FU1MsIGMtPnZhbHVlKTsKKwkJbWV5ZS5w
aWN0dXJlLmJyaWdodG5lc3MgPSBjLT52YWx1ZSA8PCAxMDsKKwkJYnJlYWs7CisJY2FzZSBWNEwy
X0NJRF9IVUU6CisJCXNvbnlfcGljX2NhbWVyYV9jb21tYW5kKAorCQkJU09OWV9QSUNfQ09NTUFO
RF9TRVRDQU1FUkFIVUUsIGMtPnZhbHVlKTsKKwkJbWV5ZS5waWN0dXJlLmh1ZSA9IGMtPnZhbHVl
IDw8IDEwOworCQlicmVhazsKKwljYXNlIFY0TDJfQ0lEX0NPTlRSQVNUOgorCQlzb255X3BpY19j
YW1lcmFfY29tbWFuZCgKKwkJCVNPTllfUElDX0NPTU1BTkRfU0VUQ0FNRVJBQ09OVFJBU1QsIGMt
PnZhbHVlKTsKKwkJbWV5ZS5waWN0dXJlLmNvbnRyYXN0ID0gYy0+dmFsdWUgPDwgMTA7CisJCWJy
ZWFrOworCWNhc2UgVjRMMl9DSURfU0FUVVJBVElPTjoKKwkJc29ueV9waWNfY2FtZXJhX2NvbW1h
bmQoCisJCQlTT05ZX1BJQ19DT01NQU5EX1NFVENBTUVSQUNPTE9SLCBjLT52YWx1ZSk7CisJCW1l
eWUucGljdHVyZS5jb2xvdXIgPSBjLT52YWx1ZSA8PCAxMDsKKwkJYnJlYWs7CisJY2FzZSBWNEwy
X0NJRF9BR0M6CisJCXNvbnlfcGljX2NhbWVyYV9jb21tYW5kKAorCQkJU09OWV9QSUNfQ09NTUFO
RF9TRVRDQU1FUkFBR0MsIGMtPnZhbHVlKTsKKwkJbWV5ZS5wYXJhbXMuYWdjID0gYy0+dmFsdWU7
CisJCWJyZWFrOworCWNhc2UgVjRMMl9DSURfU0hBUlBORVNTOgorCWNhc2UgVjRMMl9DSURfTUVZ
RV9TSEFSUE5FU1M6CisJCXNvbnlfcGljX2NhbWVyYV9jb21tYW5kKAorCQkJU09OWV9QSUNfQ09N
TUFORF9TRVRDQU1FUkFTSEFSUE5FU1MsIGMtPnZhbHVlKTsKKwkJbWV5ZS5wYXJhbXMuc2hhcnBu
ZXNzID0gYy0+dmFsdWU7CisJCWJyZWFrOworCWNhc2UgVjRMMl9DSURfUElDVFVSRToKKwkJc29u
eV9waWNfY2FtZXJhX2NvbW1hbmQoCisJCQlTT05ZX1BJQ19DT01NQU5EX1NFVENBTUVSQVBJQ1RV
UkUsIGMtPnZhbHVlKTsKKwkJbWV5ZS5wYXJhbXMucGljdHVyZSA9IGMtPnZhbHVlOworCQlicmVh
azsKKwljYXNlIFY0TDJfQ0lEX0pQRUdRVUFMOgorCQltZXllLnBhcmFtcy5xdWFsaXR5ID0gYy0+
dmFsdWU7CisJCWJyZWFrOworCWNhc2UgVjRMMl9DSURfRlJBTUVSQVRFOgorCQltZXllLnBhcmFt
cy5mcmFtZXJhdGUgPSBjLT52YWx1ZTsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJbXV0ZXhfdW5s
b2NrKCZtZXllLmxvY2spOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisJbXV0ZXhfdW5sb2NrKCZt
ZXllLmxvY2spOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgdmlkaW9jX2dfY3RybChz
dHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHN0cnVjdCB2NGwyX2NvbnRyb2wgKmMpCit7CisJ
bXV0ZXhfbG9jaygmbWV5ZS5sb2NrKTsKKwlzd2l0Y2ggKGMtPmlkKSB7CisJY2FzZSBWNEwyX0NJ
RF9CUklHSFRORVNTOgorCQljLT52YWx1ZSA9IG1leWUucGljdHVyZS5icmlnaHRuZXNzID4+IDEw
OworCQlicmVhazsKKwljYXNlIFY0TDJfQ0lEX0hVRToKKwkJYy0+dmFsdWUgPSBtZXllLnBpY3R1
cmUuaHVlID4+IDEwOworCQlicmVhazsKKwljYXNlIFY0TDJfQ0lEX0NPTlRSQVNUOgorCQljLT52
YWx1ZSA9IG1leWUucGljdHVyZS5jb250cmFzdCA+PiAxMDsKKwkJYnJlYWs7CisJY2FzZSBWNEwy
X0NJRF9TQVRVUkFUSU9OOgorCQljLT52YWx1ZSA9IG1leWUucGljdHVyZS5jb2xvdXIgPj4gMTA7
CisJCWJyZWFrOworCWNhc2UgVjRMMl9DSURfQUdDOgorCQljLT52YWx1ZSA9IG1leWUucGFyYW1z
LmFnYzsKKwkJYnJlYWs7CisJY2FzZSBWNEwyX0NJRF9TSEFSUE5FU1M6CisJY2FzZSBWNEwyX0NJ
RF9NRVlFX1NIQVJQTkVTUzoKKwkJYy0+dmFsdWUgPSBtZXllLnBhcmFtcy5zaGFycG5lc3M7CisJ
CWJyZWFrOworCWNhc2UgVjRMMl9DSURfUElDVFVSRToKKwkJYy0+dmFsdWUgPSBtZXllLnBhcmFt
cy5waWN0dXJlOworCQlicmVhazsKKwljYXNlIFY0TDJfQ0lEX0pQRUdRVUFMOgorCQljLT52YWx1
ZSA9IG1leWUucGFyYW1zLnF1YWxpdHk7CisJCWJyZWFrOworCWNhc2UgVjRMMl9DSURfRlJBTUVS
QVRFOgorCQljLT52YWx1ZSA9IG1leWUucGFyYW1zLmZyYW1lcmF0ZTsKKwkJYnJlYWs7CisJZGVm
YXVsdDoKKwkJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9
CisJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBp
bnQgdmlkaW9jX2VudW1fZm10X2NhcChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHN0cnVj
dCB2NGwyX2ZtdGRlc2MgKmYpCit7CisJaWYgKGYtPmluZGV4ID4gMSkKKwkJcmV0dXJuIC1FSU5W
QUw7CisKKwlpZiAoZi0+dHlwZSAhPSBWNEwyX0JVRl9UWVBFX1ZJREVPX0NBUFRVUkUpCisJCXJl
dHVybiAtRUlOVkFMOworCisJaWYgKGYtPmluZGV4ID09IDApIHsKKwkJLyogc3RhbmRhcmQgWVVW
IDQyMiBjYXB0dXJlICovCisJCW1lbXNldChmLCAwLCBzaXplb2YoKmYpKTsKKwkJZi0+aW5kZXgg
PSAwOworCQlmLT50eXBlID0gVjRMMl9CVUZfVFlQRV9WSURFT19DQVBUVVJFOworCQlmLT5mbGFn
cyA9IDA7CisJCXN0cmNweShmLT5kZXNjcmlwdGlvbiwgIllVVjQyMiIpOworCQlmLT5waXhlbGZv
cm1hdCA9IFY0TDJfUElYX0ZNVF9ZVVlWOworCX0gZWxzZSB7CisJCS8qIGNvbXByZXNzZWQgTUpQ
RUcgY2FwdHVyZSAqLworCQltZW1zZXQoZiwgMCwgc2l6ZW9mKCpmKSk7CisJCWYtPmluZGV4ID0g
MTsKKwkJZi0+dHlwZSA9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRTsKKwkJZi0+ZmxhZ3Mg
PSBWNEwyX0ZNVF9GTEFHX0NPTVBSRVNTRUQ7CisJCXN0cmNweShmLT5kZXNjcmlwdGlvbiwgIk1K
UEVHIik7CisJCWYtPnBpeGVsZm9ybWF0ID0gVjRMMl9QSVhfRk1UX01KUEVHOworCX0KKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgaW50IHZpZGlvY190cnlfZm10X2NhcChzdHJ1Y3QgZmlsZSAq
ZmlsZSwgdm9pZCAqZmgsIHN0cnVjdCB2NGwyX2Zvcm1hdCAqZikKK3sKKwlpZiAoZi0+dHlwZSAh
PSBWNEwyX0JVRl9UWVBFX1ZJREVPX0NBUFRVUkUpCisJCXJldHVybiAtRUlOVkFMOworCisJaWYg
KGYtPmZtdC5waXgucGl4ZWxmb3JtYXQgIT0gVjRMMl9QSVhfRk1UX1lVWVYgJiYKKwkgICAgZi0+
Zm10LnBpeC5waXhlbGZvcm1hdCAhPSBWNEwyX1BJWF9GTVRfTUpQRUcpCisJCXJldHVybiAtRUlO
VkFMOworCisJaWYgKGYtPmZtdC5waXguZmllbGQgIT0gVjRMMl9GSUVMRF9BTlkgJiYKKwkgICAg
Zi0+Zm10LnBpeC5maWVsZCAhPSBWNEwyX0ZJRUxEX05PTkUpCisJCXJldHVybiAtRUlOVkFMOwor
CisJZi0+Zm10LnBpeC5maWVsZCA9IFY0TDJfRklFTERfTk9ORTsKKworCWlmIChmLT5mbXQucGl4
LndpZHRoIDw9IDMyMCkgeworCQlmLT5mbXQucGl4LndpZHRoID0gMzIwOworCQlmLT5mbXQucGl4
LmhlaWdodCA9IDI0MDsKKwl9IGVsc2UgeworCQlmLT5mbXQucGl4LndpZHRoID0gNjQwOworCQlm
LT5mbXQucGl4LmhlaWdodCA9IDQ4MDsKKwl9CisKKwlmLT5mbXQucGl4LmJ5dGVzcGVybGluZSA9
IGYtPmZtdC5waXgud2lkdGggKiAyOworCWYtPmZtdC5waXguc2l6ZWltYWdlID0gZi0+Zm10LnBp
eC5oZWlnaHQgKgorCQkJICAgICAgIGYtPmZtdC5waXguYnl0ZXNwZXJsaW5lOworCWYtPmZtdC5w
aXguY29sb3JzcGFjZSA9IDA7CisJZi0+Zm10LnBpeC5wcml2ID0gMDsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgaW50IHZpZGlvY19nX2ZtdF9jYXAoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQg
KmZoLCBzdHJ1Y3QgdjRsMl9mb3JtYXQgKmYpCit7CisJaWYgKGYtPnR5cGUgIT0gVjRMMl9CVUZf
VFlQRV9WSURFT19DQVBUVVJFKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCW1lbXNldCgmZi0+Zm10
LnBpeCwgMCwgc2l6ZW9mKHN0cnVjdCB2NGwyX3BpeF9mb3JtYXQpKTsKKwlmLT50eXBlID0gVjRM
Ml9CVUZfVFlQRV9WSURFT19DQVBUVVJFOworCisJc3dpdGNoIChtZXllLm1jaGlwX21vZGUpIHsK
KwljYXNlIE1DSElQX0hJQ19NT0RFX0NPTlRfT1VUOgorCWRlZmF1bHQ6CisJCWYtPmZtdC5waXgu
cGl4ZWxmb3JtYXQgPSBWNEwyX1BJWF9GTVRfWVVZVjsKKwkJYnJlYWs7CisJY2FzZSBNQ0hJUF9I
SUNfTU9ERV9DT05UX0NPTVA6CisJCWYtPmZtdC5waXgucGl4ZWxmb3JtYXQgPSBWNEwyX1BJWF9G
TVRfTUpQRUc7CisJCWJyZWFrOworCX0KKworCWYtPmZtdC5waXguZmllbGQgPSBWNEwyX0ZJRUxE
X05PTkU7CisJZi0+Zm10LnBpeC53aWR0aCA9IG1jaGlwX2hzaXplKCk7CisJZi0+Zm10LnBpeC5o
ZWlnaHQgPSBtY2hpcF92c2l6ZSgpOworCWYtPmZtdC5waXguYnl0ZXNwZXJsaW5lID0gZi0+Zm10
LnBpeC53aWR0aCAqIDI7CisJZi0+Zm10LnBpeC5zaXplaW1hZ2UgPSBmLT5mbXQucGl4LmhlaWdo
dCAqCisJCQkgICAgICAgZi0+Zm10LnBpeC5ieXRlc3BlcmxpbmU7CisJZi0+Zm10LnBpeC5jb2xv
cnNwYWNlID0gMDsKKwlmLT5mbXQucGl4LnByaXYgPSAwOworCisJcmV0dXJuIDA7Cit9CisKK3N0
YXRpYyBpbnQgdmlkaW9jX3NfZm10X2NhcChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHN0
cnVjdCB2NGwyX2Zvcm1hdCAqZikKK3sKKwlpZiAoZi0+dHlwZSAhPSBWNEwyX0JVRl9UWVBFX1ZJ
REVPX0NBUFRVUkUpCisJCXJldHVybiAtRUlOVkFMOworCisJaWYgKGYtPmZtdC5waXgucGl4ZWxm
b3JtYXQgIT0gVjRMMl9QSVhfRk1UX1lVWVYgJiYKKwkgICAgZi0+Zm10LnBpeC5waXhlbGZvcm1h
dCAhPSBWNEwyX1BJWF9GTVRfTUpQRUcpCisJCXJldHVybiAtRUlOVkFMOworCisJaWYgKGYtPmZt
dC5waXguZmllbGQgIT0gVjRMMl9GSUVMRF9BTlkgJiYKKwkgICAgZi0+Zm10LnBpeC5maWVsZCAh
PSBWNEwyX0ZJRUxEX05PTkUpCisJCXJldHVybiAtRUlOVkFMOworCisJZi0+Zm10LnBpeC5maWVs
ZCA9IFY0TDJfRklFTERfTk9ORTsKKwltdXRleF9sb2NrKCZtZXllLmxvY2spOworCisJaWYgKGYt
PmZtdC5waXgud2lkdGggPD0gMzIwKSB7CisJCWYtPmZtdC5waXgud2lkdGggPSAzMjA7CisJCWYt
PmZtdC5waXguaGVpZ2h0ID0gMjQwOworCQltZXllLnBhcmFtcy5zdWJzYW1wbGUgPSAxOworCX0g
ZWxzZSB7CisJCWYtPmZtdC5waXgud2lkdGggPSA2NDA7CisJCWYtPmZtdC5waXguaGVpZ2h0ID0g
NDgwOworCQltZXllLnBhcmFtcy5zdWJzYW1wbGUgPSAwOworCX0KKworCXN3aXRjaCAoZi0+Zm10
LnBpeC5waXhlbGZvcm1hdCkgeworCWNhc2UgVjRMMl9QSVhfRk1UX1lVWVY6CisJCW1leWUubWNo
aXBfbW9kZSA9IE1DSElQX0hJQ19NT0RFX0NPTlRfT1VUOworCQlicmVhazsKKwljYXNlIFY0TDJf
UElYX0ZNVF9NSlBFRzoKKwkJbWV5ZS5tY2hpcF9tb2RlID0gTUNISVBfSElDX01PREVfQ09OVF9D
T01QOworCQlicmVhazsKKwl9CisKKwltdXRleF91bmxvY2soJm1leWUubG9jayk7CisJZi0+Zm10
LnBpeC5ieXRlc3BlcmxpbmUgPSBmLT5mbXQucGl4LndpZHRoICogMjsKKwlmLT5mbXQucGl4LnNp
emVpbWFnZSA9IGYtPmZtdC5waXguaGVpZ2h0ICoKKwkJCSAgICAgICBmLT5mbXQucGl4LmJ5dGVz
cGVybGluZTsKKwlmLT5mbXQucGl4LmNvbG9yc3BhY2UgPSAwOworCWYtPmZtdC5waXgucHJpdiA9
IDA7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCB2aWRpb2NfcmVxYnVmcyhzdHJ1Y3Qg
ZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHN0cnVjdCB2NGwyX3JlcXVlc3RidWZmZXJzICpyZXEpCit7
CisJaW50IGk7CisKKwlpZiAocmVxLT50eXBlICE9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVS
RSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAocmVxLT5tZW1vcnkgIT0gVjRMMl9NRU1PUllf
TU1BUCkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAobWV5ZS5ncmFiX2ZidWZmZXIgJiYgcmVx
LT5jb3VudCA9PSBnYnVmZmVycykgeworCQkvKiBhbHJlYWR5IGFsbG9jYXRlZCwgbm8gbW9kaWZp
Y2F0aW9ucyAqLworCQlyZXR1cm4gMDsKKwl9CisKKwltdXRleF9sb2NrKCZtZXllLmxvY2spOwor
CWlmIChtZXllLmdyYWJfZmJ1ZmZlcikgeworCQlmb3IgKGkgPSAwOyBpIDwgZ2J1ZmZlcnM7IGkr
KykKKwkJCWlmIChtZXllLnZtYV91c2VfY291bnRbaV0pIHsKKwkJCQltdXRleF91bmxvY2soJm1l
eWUubG9jayk7CisJCQkJcmV0dXJuIC1FSU5WQUw7CisJCQl9CisJCXJ2ZnJlZShtZXllLmdyYWJf
ZmJ1ZmZlciwgZ2J1ZmZlcnMgKiBnYnVmc2l6ZSk7CisJCW1leWUuZ3JhYl9mYnVmZmVyID0gTlVM
TDsKKwl9CisKKwlnYnVmZmVycyA9IG1heCgyLCBtaW4oKGludClyZXEtPmNvdW50LCBNRVlFX01B
WF9CVUZOQlJTKSk7CisJcmVxLT5jb3VudCA9IGdidWZmZXJzOworCW1leWUuZ3JhYl9mYnVmZmVy
ID0gcnZtYWxsb2MoZ2J1ZmZlcnMgKiBnYnVmc2l6ZSk7CisKKwlpZiAoIW1leWUuZ3JhYl9mYnVm
ZmVyKSB7CisJCXByaW50ayhLRVJOX0VSUiAibWV5ZTogdjRsIGZyYW1lYnVmZmVyIGFsbG9jYXRp
b24iCisJCQkJIiBmYWlsZWRcbiIpOworCQltdXRleF91bmxvY2soJm1leWUubG9jayk7CisJCXJl
dHVybiAtRU5PTUVNOworCX0KKworCWZvciAoaSA9IDA7IGkgPCBnYnVmZmVyczsgaSsrKQorCQlt
ZXllLnZtYV91c2VfY291bnRbaV0gPSAwOworCisJbXV0ZXhfdW5sb2NrKCZtZXllLmxvY2spOwor
CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgdmlkaW9jX3F1ZXJ5YnVmKHN0cnVjdCBmaWxl
ICpmaWxlLCB2b2lkICpmaCwgc3RydWN0IHY0bDJfYnVmZmVyICpidWYpCit7CisJaW50IGluZGV4
ID0gYnVmLT5pbmRleDsKKworCWlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gZ2J1ZmZlcnMpCisJ
CXJldHVybiAtRUlOVkFMOworCisJbWVtc2V0KGJ1ZiwgMCwgc2l6ZW9mKCpidWYpKTsKKworCWJ1
Zi0+dHlwZSA9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRTsKKwlidWYtPmluZGV4ID0gaW5k
ZXg7CisJYnVmLT5ieXRlc3VzZWQgPSBtZXllLmdyYWJfYnVmZmVyW2luZGV4XS5zaXplOworCWJ1
Zi0+ZmxhZ3MgPSBWNEwyX0JVRl9GTEFHX01BUFBFRDsKKworCWlmIChtZXllLmdyYWJfYnVmZmVy
W2luZGV4XS5zdGF0ZSA9PSBNRVlFX0JVRl9VU0lORykKKwkJYnVmLT5mbGFncyB8PSBWNEwyX0JV
Rl9GTEFHX1FVRVVFRDsKKworCWlmIChtZXllLmdyYWJfYnVmZmVyW2luZGV4XS5zdGF0ZSA9PSBN
RVlFX0JVRl9ET05FKQorCQlidWYtPmZsYWdzIHw9IFY0TDJfQlVGX0ZMQUdfRE9ORTsKKworCWJ1
Zi0+ZmllbGQgPSBWNEwyX0ZJRUxEX05PTkU7CisJYnVmLT50aW1lc3RhbXAgPSBtZXllLmdyYWJf
YnVmZmVyW2luZGV4XS50aW1lc3RhbXA7CisJYnVmLT5zZXF1ZW5jZSA9IG1leWUuZ3JhYl9idWZm
ZXJbaW5kZXhdLnNlcXVlbmNlOworCWJ1Zi0+bWVtb3J5ID0gVjRMMl9NRU1PUllfTU1BUDsKKwli
dWYtPm0ub2Zmc2V0ID0gaW5kZXggKiBnYnVmc2l6ZTsKKwlidWYtPmxlbmd0aCA9IGdidWZzaXpl
OworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgdmlkaW9jX3FidWYoc3RydWN0IGZpbGUg
KmZpbGUsIHZvaWQgKmZoLCBzdHJ1Y3QgdjRsMl9idWZmZXIgKmJ1ZikKK3sKKwlpZiAoYnVmLT50
eXBlICE9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRSkKKwkJcmV0dXJuIC1FSU5WQUw7CisK
KwlpZiAoYnVmLT5tZW1vcnkgIT0gVjRMMl9NRU1PUllfTU1BUCkKKwkJcmV0dXJuIC1FSU5WQUw7
CisKKwlpZiAoYnVmLT5pbmRleCA8IDAgfHwgYnVmLT5pbmRleCA+PSBnYnVmZmVycykKKwkJcmV0
dXJuIC1FSU5WQUw7CisKKwlpZiAobWV5ZS5ncmFiX2J1ZmZlcltidWYtPmluZGV4XS5zdGF0ZSAh
PSBNRVlFX0JVRl9VTlVTRUQpCisJCXJldHVybiAtRUlOVkFMOworCisJbXV0ZXhfbG9jaygmbWV5
ZS5sb2NrKTsKKwlidWYtPmZsYWdzIHw9IFY0TDJfQlVGX0ZMQUdfUVVFVUVEOworCWJ1Zi0+Zmxh
Z3MgJj0gflY0TDJfQlVGX0ZMQUdfRE9ORTsKKwltZXllLmdyYWJfYnVmZmVyW2J1Zi0+aW5kZXhd
LnN0YXRlID0gTUVZRV9CVUZfVVNJTkc7CisJa2ZpZm9fcHV0KG1leWUuZ3JhYnEsICh1bnNpZ25l
ZCBjaGFyICopJmJ1Zi0+aW5kZXgsIHNpemVvZihpbnQpKTsKKwltdXRleF91bmxvY2soJm1leWUu
bG9jayk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCB2aWRpb2NfZHFidWYoc3RydWN0
IGZpbGUgKmZpbGUsIHZvaWQgKmZoLCBzdHJ1Y3QgdjRsMl9idWZmZXIgKmJ1ZikKK3sKKwlpbnQg
cmVxbnI7CisKKwlpZiAoYnVmLT50eXBlICE9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRSkK
KwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoYnVmLT5tZW1vcnkgIT0gVjRMMl9NRU1PUllfTU1B
UCkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwltdXRleF9sb2NrKCZtZXllLmxvY2spOworCisJaWYg
KGtmaWZvX2xlbihtZXllLmRvbmVxKSA9PSAwICYmIGZpbGUtPmZfZmxhZ3MgJiBPX05PTkJMT0NL
KSB7CisJCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKKwkJcmV0dXJuIC1FQUdBSU47CisJfQor
CisJaWYgKHdhaXRfZXZlbnRfaW50ZXJydXB0aWJsZShtZXllLnByb2NfbGlzdCwKKwkJCQkgICAg
IGtmaWZvX2xlbihtZXllLmRvbmVxKSAhPSAwKSA8IDApIHsKKwkJbXV0ZXhfdW5sb2NrKCZtZXll
LmxvY2spOworCQlyZXR1cm4gLUVJTlRSOworCX0KKworCWlmICgha2ZpZm9fZ2V0KG1leWUuZG9u
ZXEsICh1bnNpZ25lZCBjaGFyICopJnJlcW5yLAorCQkgICAgICAgc2l6ZW9mKGludCkpKSB7CisJ
CW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKKwkJcmV0dXJuIC1FQlVTWTsKKwl9CisKKwlpZiAo
bWV5ZS5ncmFiX2J1ZmZlcltyZXFucl0uc3RhdGUgIT0gTUVZRV9CVUZfRE9ORSkgeworCQltdXRl
eF91bmxvY2soJm1leWUubG9jayk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWJ1Zi0+aW5k
ZXggPSByZXFucjsKKwlidWYtPmJ5dGVzdXNlZCA9IG1leWUuZ3JhYl9idWZmZXJbcmVxbnJdLnNp
emU7CisJYnVmLT5mbGFncyA9IFY0TDJfQlVGX0ZMQUdfTUFQUEVEOworCWJ1Zi0+ZmllbGQgPSBW
NEwyX0ZJRUxEX05PTkU7CisJYnVmLT50aW1lc3RhbXAgPSBtZXllLmdyYWJfYnVmZmVyW3JlcW5y
XS50aW1lc3RhbXA7CisJYnVmLT5zZXF1ZW5jZSA9IG1leWUuZ3JhYl9idWZmZXJbcmVxbnJdLnNl
cXVlbmNlOworCWJ1Zi0+bWVtb3J5ID0gVjRMMl9NRU1PUllfTU1BUDsKKwlidWYtPm0ub2Zmc2V0
ID0gcmVxbnIgKiBnYnVmc2l6ZTsKKwlidWYtPmxlbmd0aCA9IGdidWZzaXplOworCW1leWUuZ3Jh
Yl9idWZmZXJbcmVxbnJdLnN0YXRlID0gTUVZRV9CVUZfVU5VU0VEOworCW11dGV4X3VubG9jaygm
bWV5ZS5sb2NrKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHZpZGlvY19zdHJlYW1v
bihzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIGVudW0gdjRsMl9idWZfdHlwZSBpKQorewor
CW11dGV4X2xvY2soJm1leWUubG9jayk7CisKKwlzd2l0Y2ggKG1leWUubWNoaXBfbW9kZSkgewor
CWNhc2UgTUNISVBfSElDX01PREVfQ09OVF9PVVQ6CisJCW1jaGlwX2NvbnRpbnVvdXNfc3RhcnQo
KTsKKwkJYnJlYWs7CisJY2FzZSBNQ0hJUF9ISUNfTU9ERV9DT05UX0NPTVA6CisJCW1jaGlwX2Nv
bnRfY29tcHJlc3Npb25fc3RhcnQoKTsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJbXV0ZXhfdW5s
b2NrKCZtZXllLmxvY2spOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwltdXRleF91bmxvY2so
Jm1leWUubG9jayk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCB2aWRpb2Nfc3RyZWFt
b2ZmKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpmaCwgZW51bSB2NGwyX2J1Zl90eXBlIGkpCit7
CisJbXV0ZXhfbG9jaygmbWV5ZS5sb2NrKTsKKwltY2hpcF9oaWNfc3RvcCgpOworCWtmaWZvX3Jl
c2V0KG1leWUuZ3JhYnEpOworCWtmaWZvX3Jlc2V0KG1leWUuZG9uZXEpOworCisJZm9yIChpID0g
MDsgaSA8IE1FWUVfTUFYX0JVRk5CUlM7IGkrKykKKwkJbWV5ZS5ncmFiX2J1ZmZlcltpXS5zdGF0
ZSA9IE1FWUVfQlVGX1VOVVNFRDsKKworCW11dGV4X3VubG9jaygmbWV5ZS5sb2NrKTsKKwlyZXR1
cm4gMDsKK30KKworc3RhdGljIGludCB2aWRpb2NfZGVmYXVsdChzdHJ1Y3QgZmlsZSAqZmlsZSwg
dm9pZCAqZmgsIGludCBjbWQsIHZvaWQgKmFyZykKK3sKKwlzd2l0Y2ggKGNtZCkgeworCWNhc2Ug
TUVZRUlPQ19HX1BBUkFNUzogCisJCXJldHVybiBtZXllaW9jX2dfcGFyYW1zKCAoc3RydWN0IG1l
eWVfcGFyYW1zICopIGFyZyk7CisKKwljYXNlIE1FWUVJT0NfU19QQVJBTVM6IAorCQlyZXR1cm4g
bWV5ZWlvY19zX3BhcmFtcyggKHN0cnVjdCBtZXllX3BhcmFtcyAqKSBhcmcpOworCisJY2FzZSBN
RVlFSU9DX1FCVUZfQ0FQVDogCisJCXJldHVybiBtZXllaW9jX3FidWZfY2FwdCggKGludCAqKSBh
cmcpOworCisJY2FzZSBNRVlFSU9DX1NZTkM6IAorCQlyZXR1cm4gbWV5ZWlvY19zeW5jKCBmaWxl
LCBmaCwgKGludCAqKSBhcmcpOworCisJY2FzZSBNRVlFSU9DX1NUSUxMQ0FQVDogCisJCXJldHVy
biBtZXllaW9jX3N0aWxsY2FwdCgpOworCisJY2FzZSBNRVlFSU9DX1NUSUxMSkNBUFQ6IAorCQly
ZXR1cm4gbWV5ZWlvY19zdGlsbGpjYXB0KCAoaW50ICopIGFyZyk7CisKKwlkZWZhdWx0OgorCQly
ZXR1cm4gLUVJTlZBTDsKKwl9CisKIH0KIAogc3RhdGljIHVuc2lnbmVkIGludCBtZXllX3BvbGwo
c3RydWN0IGZpbGUgKmZpbGUsIHBvbGxfdGFibGUgKndhaXQpCkBAIC0xNzY1LDcgKzE2ODcsNyBA
QCBzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyBtZXllCiAJLm9wZW4JCT0gbWV5
ZV9vcGVuLAogCS5yZWxlYXNlCT0gbWV5ZV9yZWxlYXNlLAogCS5tbWFwCQk9IG1leWVfbW1hcCwK
LQkuaW9jdGwJCT0gbWV5ZV9pb2N0bCwKKwkuaW9jdGwJCT0gdmlkZW9faW9jdGwyLAogI2lmZGVm
IENPTkZJR19DT01QQVQKIAkuY29tcGF0X2lvY3RsCT0gdjRsX2NvbXBhdF9pb2N0bDMyLAogI2Vu
ZGlmCkBAIC0xNzgwLDYgKzE3MDIsMjQgQEAgc3RhdGljIHN0cnVjdCB2aWRlb19kZXZpY2UgbWV5
ZV90ZW1wbGF0ZQogCS5mb3BzCQk9ICZtZXllX2ZvcHMsCiAJLnJlbGVhc2UJPSB2aWRlb19kZXZp
Y2VfcmVsZWFzZSwKIAkubWlub3IJCT0gLTEsCisJLnZpZGlvY19xdWVyeWNhcAk9IHZpZGlvY19x
dWVyeWNhcCwKKwkudmlkaW9jX2VudW1faW5wdXQJPSB2aWRpb2NfZW51bV9pbnB1dCwKKwkudmlk
aW9jX2dfaW5wdXQJCT0gdmlkaW9jX2dfaW5wdXQsCisJLnZpZGlvY19zX2lucHV0CQk9IHZpZGlv
Y19zX2lucHV0LAorCS52aWRpb2NfcXVlcnljdHJsCT0gdmlkaW9jX3F1ZXJ5Y3RybCwKKwkudmlk
aW9jX3NfY3RybAkJPSB2aWRpb2Nfc19jdHJsLAorCS52aWRpb2NfZ19jdHJsCQk9IHZpZGlvY19n
X2N0cmwsCisJLnZpZGlvY19lbnVtX2ZtdF9jYXAJPSB2aWRpb2NfZW51bV9mbXRfY2FwLAorCS52
aWRpb2NfdHJ5X2ZtdF9jYXAJPSB2aWRpb2NfdHJ5X2ZtdF9jYXAsCisJLnZpZGlvY19nX2ZtdF9j
YXAJPSB2aWRpb2NfZ19mbXRfY2FwLAorCS52aWRpb2Nfc19mbXRfY2FwCT0gdmlkaW9jX3NfZm10
X2NhcCwKKwkudmlkaW9jX3JlcWJ1ZnMJCT0gdmlkaW9jX3JlcWJ1ZnMsCisJLnZpZGlvY19xdWVy
eWJ1Zgk9IHZpZGlvY19xdWVyeWJ1ZiwKKwkudmlkaW9jX3FidWYJCT0gdmlkaW9jX3FidWYsCisJ
LnZpZGlvY19kcWJ1ZgkJPSB2aWRpb2NfZHFidWYsCisJLnZpZGlvY19zdHJlYW1vbgk9IHZpZGlv
Y19zdHJlYW1vbiwKKwkudmlkaW9jX3N0cmVhbW9mZgk9IHZpZGlvY19zdHJlYW1vZmYsCisJLnZp
ZGlvY19kZWZhdWx0CQk9IHZpZGlvY19kZWZhdWx0LAogfTsKIAogI2lmZGVmIENPTkZJR19QTQo=

------=_Part_22927_18845019.1207879800898
Content-Type: text/x-diff; name=patch-vidioc_default.diff
Content-Transfer-Encoding: base64
X-Attachment-Id: f_few4fdzl1
Content-Disposition: attachment; filename=patch-vidioc_default.diff

ZGlmZiAtciA3YmY1NjUwOGQzNGMgbGludXgvZHJpdmVycy9tZWRpYS92aWRlby92aWRlb2Rldi5j
Ci0tLSBhL2xpbnV4L2RyaXZlcnMvbWVkaWEvdmlkZW8vdmlkZW9kZXYuYwlUdWUgQXByIDA4IDAw
OjM3OjQxIDIwMDggLTAzMDAKKysrIGIvbGludXgvZHJpdmVycy9tZWRpYS92aWRlby92aWRlb2Rl
di5jCVdlZCBBcHIgMDkgMDE6MzE6MjEgMjAwOCAtMDMwMApAQCAtMTg5MCw2ICsxODkwLDEzIEBA
IHN0YXRpYyBpbnQgX192aWRlb19kb19pb2N0bChzdHJ1Y3QgaW5vZGUKIAkJCWRiZ2FyZyAoY21k
LCAiY2hpcF9pZGVudD0ldSwgcmV2aXNpb249MHgleFxuIiwgcC0+aWRlbnQsIHAtPnJldmlzaW9u
KTsKIAkJYnJlYWs7CiAJfQorCWRlZmF1bHQ6CisJeworCQlpZiAoIXZmZC0+dmlkaW9jX2RlZmF1
bHQpCisJCQlicmVhazsKKwkJcmV0ID0gdmZkLT52aWRpb2NfZGVmYXVsdChmaWxlLCBmaCwgY21k
LCBhcmcpOworCQlicmVhazsKKwl9CiAJfSAvKiBzd2l0Y2ggKi8KIAogCWlmICh2ZmQtPmRlYnVn
ICYgVjRMMl9ERUJVR19JT0NUTF9BUkcpIHsKZGlmZiAtciA3YmY1NjUwOGQzNGMgbGludXgvaW5j
bHVkZS9tZWRpYS92NGwyLWRldi5oCi0tLSBhL2xpbnV4L2luY2x1ZGUvbWVkaWEvdjRsMi1kZXYu
aAlUdWUgQXByIDA4IDAwOjM3OjQxIDIwMDggLTAzMDAKKysrIGIvbGludXgvaW5jbHVkZS9tZWRp
YS92NGwyLWRldi5oCVdlZCBBcHIgMDkgMDE6MzE6MjEgMjAwOCAtMDMwMApAQCAtMzM0LDYgKzMz
NCwxMCBAQCBzdHJ1Y3QgdmlkZW9fZGV2aWNlCiAJaW50ICgqdmlkaW9jX2dfY2hpcF9pZGVudCkg
ICAgIChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsCiAJCQkJCXN0cnVjdCB2NGwyX2NoaXBf
aWRlbnQgKmNoaXApOwogCisJLyogRm9yIG90aGVyIHByaXZhdGUgaW9jdGxzICovCisJaW50ICgq
dmlkaW9jX2RlZmF1bHQpCSAgICAgICAoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQgKmZoLAorCQkJ
CQlpbnQgY21kLCB2b2lkICphcmcpOworCiAjaWYgMAkvKiBvbGQsIG9ic29sZXRlIGludGVyZmFj
ZSAqLwogCWludCAoKm9wZW4pKHN0cnVjdCB2aWRlb19kZXZpY2UgKiwgaW50IG1vZGUpOwogCXZv
aWQgKCpjbG9zZSkoc3RydWN0IHZpZGVvX2RldmljZSAqKTsK
------=_Part_22927_18845019.1207879800898
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

--
video4linux-list mailing list
Unsubscribe mailto:video4linux-list-request@redhat.com?subject=unsubscribe
https://www.redhat.com/mailman/listinfo/video4linux-list
------=_Part_22927_18845019.1207879800898--
