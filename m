Return-path: <linux-media-owner@vger.kernel.org>
Received: from cantor2.suse.de ([195.135.220.15]:51750 "EHLO mx2.suse.de"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1750973AbZKYJNr (ORCPT <rfc822;linux-media@vger.kernel.org>);
	Wed, 25 Nov 2009 04:13:47 -0500
Date: Wed, 25 Nov 2009 10:13:53 +0100
Message-ID: <s5h638z7yr2.wl%tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Krzysztof Helt <krzysztof.h1@poczta.fm>
Cc: linux-media@vger.kernel.org
Subject: Re: [PATCH] New driver for the radio FM module on Miro PCM20 sound card
In-Reply-To: <20091124221236.92859c90.krzysztof.h1@poczta.fm>
References: <20091124221236.92859c90.krzysztof.h1@poczta.fm>
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

At Tue, 24 Nov 2009 22:12:36 +0100,
Krzysztof Helt wrote:
> 
> From: Krzysztof Helt <krzysztof.h1@wp.pl>
> 
> This is recreated driver for the FM module found on Miro
> PCM20 sound cards. This driver was removed around the 2.6.2x
> kernels because it relied on the removed OSS module. Now, it
> uses a current ALSA module (snd-miro) and is adapted to v4l2
> layer.
> 
> It provides only basic functionality: frequency changing and
> FM module muting.
> 
> Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl>
> ---
> This driver depends on changes to the snd-miro driver. These changes
> are already accepted to the ALSA tree, but these changes 
> won't be pushed into the 2.6.33 kernel.

Well, if we get ACK from V4L guys for this patch, I can merge it
together with snd-miro changes for 2.6.33.  But, it should be done
ASAP (preferably in this week).


>  drivers/media/radio/Kconfig           |   17 ++
>  drivers/media/radio/Makefile          |    1 +
>  drivers/media/radio/radio-miropcm20.c |  271 +++++++++++++++++++++++++++++++++
>  3 files changed, 289 insertions(+), 0 deletions(-)
>  create mode 100644 drivers/media/radio/radio-miropcm20.c
> 
> diff --git a/drivers/media/radio/Kconfig b/drivers/media/radio/Kconfig
> index a87a477..1c12f99 100644
> --- a/drivers/media/radio/Kconfig
> +++ b/drivers/media/radio/Kconfig
> @@ -195,6 +195,23 @@ config RADIO_MAESTRO
>  	  To compile this driver as a module, choose M here: the
>  	  module will be called radio-maestro.
>  
> +config RADIO_MIROPCM20
> +	tristate "miroSOUND PCM20 radio"
> +	depends on ISA && VIDEO_V4L2
> +	select SND_MIRO
> +	---help---
> +	  Choose Y here if you have this FM radio card. You also need to select
> +	  the "Miro miroSOUND PCM1pro/PCM12/PCM20radio driver" ALSA sound card
> +	  driver for this to work.

Better to rephrase "This driver will select ...."?  You cannot select it
in practice but it's forcibly set.

> --- /dev/null
> +++ b/drivers/media/radio/radio-miropcm20.c
(snip)
> +
> +static int radio_nr = -1;
> +module_param(radio_nr, int, 0);

Missing MODULE_PARM_DESC().


thanks,

Takashi
