Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail-qy0-f174.google.com ([209.85.216.174]:38240 "EHLO
	mail-qy0-f174.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751152Ab1GTEYc (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Wed, 20 Jul 2011 00:24:32 -0400
Received: by qyk29 with SMTP id 29so2454348qyk.19
        for <linux-media@vger.kernel.org>; Tue, 19 Jul 2011 21:24:31 -0700 (PDT)
MIME-Version: 1.0
In-Reply-To: <1309944193-11275-1-git-send-email-t.stanislaws@samsung.com>
References: <1309944193-11275-1-git-send-email-t.stanislaws@samsung.com>
From: Pawel Osciak <pawel@osciak.com>
Date: Tue, 19 Jul 2011 21:24:11 -0700
Message-ID: <CAMm-=zAG_L7FmaE4grNuS2ZVi_cnmfDavKi1GErs-dztD0izpg@mail.gmail.com>
Subject: Re: [PATCH] v4l: remove single to multiplane conversion
To: Tomasz Stanislawski <t.stanislaws@samsung.com>
Cc: linux-media@vger.kernel.org, m.szyprowski@samsung.com,
	kyungmin.park@samsung.com, mchehab@redhat.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: base64
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

T24gV2VkLCBKdWwgNiwgMjAxMSBhdCAwMjoyMywgVG9tYXN6IFN0YW5pc2xhd3NraQo8dC5zdGFu
aXNsYXdzQHNhbXN1bmcuY29tPiB3cm90ZToKPiBUaGlzIHBhdGNoIHJlbW92ZXMgYW4gaW1wbGlj
aXQgY29udmVyc2lvbiBiZXR3ZWVuIG11bHRpIGFuZCBzaW5nbGUgcGxhbmUKPiBmb3JtYXRzIGZy
b20gVjRMMiBmcmFtZXdvcmsuIFRoZSBjb252ZXJzaW9uIGlzIHRvIGJlIHBlcmZvcm1lZCBieSBs
aWJ2NGwyLgo+Cj4gU2lnbmVkLW9mZi1ieTogVG9tYXN6IFN0YW5pc2xhd3NraSA8dC5zdGFuaXNs
YXdzQHNhbXN1bmcuY29tPgo+IFNpZ25lZC1vZmYtYnk6IEt5dW5nbWluIFBhcmsgPGt5dW5nbWlu
LnBhcmtAc2Ftc3VuZy5jb20+Cj4gLS0tCgpBY2tlZC1ieTogUGF3ZWwgT3NjaWFrIDxwYXdlbEBv
c2NpYWsuY29tPgoKCgoKPiCgZHJpdmVycy9tZWRpYS92aWRlby92NGwyLWlvY3RsLmMgfCCgMjUw
ICsrLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4goDEgZmlsZXMgY2hhbmdl
ZCwgMTIgaW5zZXJ0aW9ucygrKSwgMjM4IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbWVkaWEvdmlkZW8vdjRsMi1pb2N0bC5jIGIvZHJpdmVycy9tZWRpYS92aWRlby92NGwy
LWlvY3RsLmMKPiBpbmRleCAyMTNiYTdkLi4wN2YyYWJkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
bWVkaWEvdmlkZW8vdjRsMi1pb2N0bC5jCj4gKysrIGIvZHJpdmVycy9tZWRpYS92aWRlby92NGwy
LWlvY3RsLmMKPiBAQCAtNDc2LDYzICs0NzYsNiBAQCBzdGF0aWMgaW50IGNoZWNrX2ZtdChjb25z
dCBzdHJ1Y3QgdjRsMl9pb2N0bF9vcHMgKm9wcywgZW51bSB2NGwyX2J1Zl90eXBlIHR5cGUpCj4g
oCCgIKAgoHJldHVybiAtRUlOVkFMOwo+IKB9Cj4KPiAtLyoqCj4gLSAqIGZtdF9zcF90b19tcCgp
IC0gQ29udmVydCBhIHNpbmdsZS1wbGFuZSBmb3JtYXQgdG8gaXRzIG11bHRpLXBsYW5hciAxLXBs
YW5lCj4gLSAqIGVxdWl2YWxlbnQKPiAtICovCj4gLXN0YXRpYyBpbnQgZm10X3NwX3RvX21wKGNv
bnN0IHN0cnVjdCB2NGwyX2Zvcm1hdCAqZl9zcCwKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBz
dHJ1Y3QgdjRsMl9mb3JtYXQgKmZfbXApCj4gLXsKPiAtIKAgoCCgIHN0cnVjdCB2NGwyX3BpeF9m
b3JtYXRfbXBsYW5lICpwaXhfbXAgPSAmZl9tcC0+Zm10LnBpeF9tcDsKPiAtIKAgoCCgIGNvbnN0
IHN0cnVjdCB2NGwyX3BpeF9mb3JtYXQgKnBpeCA9ICZmX3NwLT5mbXQucGl4Owo+IC0KPiAtIKAg
oCCgIGlmIChmX3NwLT50eXBlID09IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRSkKPiAtIKAg
oCCgIKAgoCCgIKAgZl9tcC0+dHlwZSA9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRV9NUExB
TkU7Cj4gLSCgIKAgoCBlbHNlIGlmIChmX3NwLT50eXBlID09IFY0TDJfQlVGX1RZUEVfVklERU9f
T1VUUFVUKQo+IC0goCCgIKAgoCCgIKAgoCBmX21wLT50eXBlID0gVjRMMl9CVUZfVFlQRV9WSURF
T19PVVRQVVRfTVBMQU5FOwo+IC0goCCgIKAgZWxzZQo+IC0goCCgIKAgoCCgIKAgoCByZXR1cm4g
LUVJTlZBTDsKPiAtCj4gLSCgIKAgoCBwaXhfbXAtPndpZHRoID0gcGl4LT53aWR0aDsKPiAtIKAg
oCCgIHBpeF9tcC0+aGVpZ2h0ID0gcGl4LT5oZWlnaHQ7Cj4gLSCgIKAgoCBwaXhfbXAtPnBpeGVs
Zm9ybWF0ID0gcGl4LT5waXhlbGZvcm1hdDsKPiAtIKAgoCCgIHBpeF9tcC0+ZmllbGQgPSBwaXgt
PmZpZWxkOwo+IC0goCCgIKAgcGl4X21wLT5jb2xvcnNwYWNlID0gcGl4LT5jb2xvcnNwYWNlOwo+
IC0goCCgIKAgcGl4X21wLT5udW1fcGxhbmVzID0gMTsKPiAtIKAgoCCgIHBpeF9tcC0+cGxhbmVf
Zm10WzBdLnNpemVpbWFnZSA9IHBpeC0+c2l6ZWltYWdlOwo+IC0goCCgIKAgcGl4X21wLT5wbGFu
ZV9mbXRbMF0uYnl0ZXNwZXJsaW5lID0gcGl4LT5ieXRlc3BlcmxpbmU7Cj4gLQo+IC0goCCgIKAg
cmV0dXJuIDA7Cj4gLX0KPiAtCj4gLS8qKgo+IC0gKiBmbXRfbXBfdG9fc3AoKSAtIENvbnZlcnQg
YSBtdWx0aS1wbGFuYXIgMS1wbGFuZSBmb3JtYXQgdG8gaXRzIHNpbmdsZS1wbGFuYXIKPiAtICog
ZXF1aXZhbGVudAo+IC0gKi8KPiAtc3RhdGljIGludCBmbXRfbXBfdG9fc3AoY29uc3Qgc3RydWN0
IHY0bDJfZm9ybWF0ICpmX21wLAo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIHN0cnVjdCB2NGwy
X2Zvcm1hdCAqZl9zcCkKPiAtewo+IC0goCCgIKAgY29uc3Qgc3RydWN0IHY0bDJfcGl4X2Zvcm1h
dF9tcGxhbmUgKnBpeF9tcCA9ICZmX21wLT5mbXQucGl4X21wOwo+IC0goCCgIKAgc3RydWN0IHY0
bDJfcGl4X2Zvcm1hdCAqcGl4ID0gJmZfc3AtPmZtdC5waXg7Cj4gLQo+IC0goCCgIKAgaWYgKGZf
bXAtPnR5cGUgPT0gVjRMMl9CVUZfVFlQRV9WSURFT19DQVBUVVJFX01QTEFORSkKPiAtIKAgoCCg
IKAgoCCgIKAgZl9zcC0+dHlwZSA9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRTsKPiAtIKAg
oCCgIGVsc2UgaWYgKGZfbXAtPnR5cGUgPT0gVjRMMl9CVUZfVFlQRV9WSURFT19PVVRQVVRfTVBM
QU5FKQo+IC0goCCgIKAgoCCgIKAgoCBmX3NwLT50eXBlID0gVjRMMl9CVUZfVFlQRV9WSURFT19P
VVRQVVQ7Cj4gLSCgIKAgoCBlbHNlCj4gLSCgIKAgoCCgIKAgoCCgIHJldHVybiAtRUlOVkFMOwo+
IC0KPiAtIKAgoCCgIHBpeC0+d2lkdGggPSBwaXhfbXAtPndpZHRoOwo+IC0goCCgIKAgcGl4LT5o
ZWlnaHQgPSBwaXhfbXAtPmhlaWdodDsKPiAtIKAgoCCgIHBpeC0+cGl4ZWxmb3JtYXQgPSBwaXhf
bXAtPnBpeGVsZm9ybWF0Owo+IC0goCCgIKAgcGl4LT5maWVsZCA9IHBpeF9tcC0+ZmllbGQ7Cj4g
LSCgIKAgoCBwaXgtPmNvbG9yc3BhY2UgPSBwaXhfbXAtPmNvbG9yc3BhY2U7Cj4gLSCgIKAgoCBw
aXgtPnNpemVpbWFnZSA9IHBpeF9tcC0+cGxhbmVfZm10WzBdLnNpemVpbWFnZTsKPiAtIKAgoCCg
IHBpeC0+Ynl0ZXNwZXJsaW5lID0gcGl4X21wLT5wbGFuZV9mbXRbMF0uYnl0ZXNwZXJsaW5lOwo+
IC0KPiAtIKAgoCCgIHJldHVybiAwOwo+IC19Cj4gLQo+IKBzdGF0aWMgbG9uZyBfX3ZpZGVvX2Rv
X2lvY3RsKHN0cnVjdCBmaWxlICpmaWxlLAo+IKAgoCCgIKAgoCCgIKAgoHVuc2lnbmVkIGludCBj
bWQsIHZvaWQgKmFyZykKPiCgewo+IEBAIC01NDAsNyArNDgzLDYgQEAgc3RhdGljIGxvbmcgX192
aWRlb19kb19pb2N0bChzdHJ1Y3QgZmlsZSAqZmlsZSwKPiCgIKAgoCCgY29uc3Qgc3RydWN0IHY0
bDJfaW9jdGxfb3BzICpvcHMgPSB2ZmQtPmlvY3RsX29wczsKPiCgIKAgoCCgdm9pZCAqZmggPSBm
aWxlLT5wcml2YXRlX2RhdGE7Cj4goCCgIKAgoHN0cnVjdCB2NGwyX2ZoICp2ZmggPSBOVUxMOwo+
IC0goCCgIKAgc3RydWN0IHY0bDJfZm9ybWF0IGZfY29weTsKPiCgIKAgoCCgaW50IHVzZV9maF9w
cmlvID0gMDsKPiCgIKAgoCCgbG9uZyByZXQgPSAtRUlOVkFMOwo+Cj4gQEAgLTcwMiw0MiArNjQ0
LDE1IEBAIHN0YXRpYyBsb25nIF9fdmlkZW9fZG9faW9jdGwoc3RydWN0IGZpbGUgKmZpbGUsCj4K
PiCgIKAgoCCgIKAgoCCgIKBzd2l0Y2ggKGYtPnR5cGUpIHsKPiCgIKAgoCCgIKAgoCCgIKBjYXNl
IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRToKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBp
ZiAob3BzLT52aWRpb2NfZ19mbXRfdmlkX2NhcCkgewo+ICsgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IGlmIChvcHMtPnZpZGlvY19nX2ZtdF92aWRfY2FwKQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKByZXQgPSBvcHMtPnZpZGlvY19nX2ZtdF92aWRfY2FwKGZpbGUsIGZoLCBmKTsKPiAt
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCB9IGVsc2UgaWYgKG9wcy0+dmlkaW9jX2dfZm10X3ZpZF9j
YXBfbXBsYW5lKSB7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAoZm10X3Nw
X3RvX21wKGYsICZmX2NvcHkpKQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCBicmVhazsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IG9wcy0+
dmlkaW9jX2dfZm10X3ZpZF9jYXBfbXBsYW5lKGZpbGUsIGZoLAo+IC0goCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgJmZf
Y29weSk7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAocmV0KQo+IC0goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBicmVhazsKPiAtCj4gLSCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCAvKiBEcml2ZXIgaXMgY3VycmVudGx5IGluIG11bHRpLXBs
YW5hciBmb3JtYXQsCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgKiB3ZSBjYW4n
dCByZXR1cm4gaXQgaW4gc2luZ2xlLXBsYW5hciBBUEkqLwo+IC0goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgaWYgKGZfY29weS5mbXQucGl4X21wLm51bV9wbGFuZXMgPiAxKSB7Cj4gLSCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IC1FQlVTWTsKPiAtIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJlYWs7Cj4gLSCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCB9Cj4gLQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgcmV0ID0gZm10X21wX3RvX3NwKCZmX2NvcHksIGYpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIH0KPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoGlmICghcmV0KQo+IKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKB2NGxfcHJpbnRfcGl4X2ZtdCh2ZmQsICZmLT5mbXQucGl4KTsKPiCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoGJyZWFrOwo+IKAgoCCgIKAgoCCgIKAgoGNhc2UgVjRMMl9C
VUZfVFlQRV9WSURFT19DQVBUVVJFX01QTEFORToKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBp
ZiAob3BzLT52aWRpb2NfZ19mbXRfdmlkX2NhcF9tcGxhbmUpIHsKPiArIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCBpZiAob3BzLT52aWRpb2NfZ19mbXRfdmlkX2NhcF9tcGxhbmUpCj4goCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoHJldCA9IG9wcy0+dmlkaW9jX2dfZm10X3ZpZF9jYXBfbXBs
YW5lKGZpbGUsCj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBmaCwgZik7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgfSBlbHNlIGlmIChvcHMtPnZpZGlvY19nX2ZtdF92aWRfY2FwKSB7Cj4gLSCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAoZm10X21wX3RvX3NwKGYsICZmX2NvcHkpKQo+IC0goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBicmVhazsKPiAtIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IG9wcy0+dmlkaW9jX2dfZm10X3ZpZF9jYXAoZmlsZSwK
PiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgZmgsICZmX2NvcHkpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
aWYgKHJldCkKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJlYWs7
Cj4gLQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0gZm10X3NwX3RvX21w
KCZmX2NvcHksIGYpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIH0KPiCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoGlmICghcmV0KQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKB2NGxf
cHJpbnRfcGl4X2ZtdF9tcGxhbmUodmZkLCAmZi0+Zm10LnBpeF9tcCk7Cj4goCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKBicmVhazsKPiBAQCAtNzQ3LDQyICs2NjIsMTUgQEAgc3RhdGljIGxvbmcgX192
aWRlb19kb19pb2N0bChzdHJ1Y3QgZmlsZSAqZmlsZSwKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgZmgsIGYpOwo+IKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgYnJlYWs7Cj4goCCgIKAgoCCgIKAgoCCgY2FzZSBWNEwyX0JV
Rl9UWVBFX1ZJREVPX09VVFBVVDoKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAob3BzLT52
aWRpb2NfZ19mbXRfdmlkX291dCkgewo+ICsgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChvcHMt
PnZpZGlvY19nX2ZtdF92aWRfb3V0KQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBy
ZXQgPSBvcHMtPnZpZGlvY19nX2ZtdF92aWRfb3V0KGZpbGUsIGZoLCBmKTsKPiAtIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCB9IGVsc2UgaWYgKG9wcy0+dmlkaW9jX2dfZm10X3ZpZF9vdXRfbXBsYW5l
KSB7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAoZm10X3NwX3RvX21wKGYs
ICZmX2NvcHkpKQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBicmVh
azsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IG9wcy0+dmlkaW9jX2df
Zm10X3ZpZF9vdXRfbXBsYW5lKGZpbGUsIGZoLAo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgICZmX2NvcHkpOwo+
IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKHJldCkKPiAtIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJlYWs7Cj4gLQo+IC0goCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgLyogRHJpdmVyIGlzIGN1cnJlbnRseSBpbiBtdWx0aS1wbGFuYXIgZm9y
bWF0LAo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCogd2UgY2FuJ3QgcmV0dXJu
IGl0IGluIHNpbmdsZS1wbGFuYXIgQVBJKi8KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIGlmIChmX2NvcHkuZm10LnBpeF9tcC5udW1fcGxhbmVzID4gMSkgewo+IC0goCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCByZXQgPSAtRUJVU1k7Cj4gLSCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGJyZWFrOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgfQo+IC0KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9
IGZtdF9tcF90b19zcCgmZl9jb3B5LCBmKTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCB9Cj4g
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBpZiAoIXJldCkKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgdjRsX3ByaW50X3BpeF9mbXQodmZkLCAmZi0+Zm10LnBpeCk7Cj4goCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKBicmVhazsKPiCgIKAgoCCgIKAgoCCgIKBjYXNlIFY0TDJfQlVGX1RZUEVf
VklERU9fT1VUUFVUX01QTEFORToKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAob3BzLT52
aWRpb2NfZ19mbXRfdmlkX291dF9tcGxhbmUpIHsKPiArIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBp
ZiAob3BzLT52aWRpb2NfZ19mbXRfdmlkX291dF9tcGxhbmUpCj4goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoHJldCA9IG9wcy0+dmlkaW9jX2dfZm10X3ZpZF9vdXRfbXBsYW5lKGZpbGUs
Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKBmaCwgZik7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgfSBlbHNl
IGlmIChvcHMtPnZpZGlvY19nX2ZtdF92aWRfb3V0KSB7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCBpZiAoZm10X21wX3RvX3NwKGYsICZmX2NvcHkpKQo+IC0goCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBicmVhazsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIHJldCA9IG9wcy0+dmlkaW9jX2dfZm10X3ZpZF9vdXQoZmlsZSwKPiAtIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
ZmgsICZmX2NvcHkpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKHJldCkK
PiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJlYWs7Cj4gLQo+IC0g
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0gZm10X3NwX3RvX21wKCZmX2NvcHks
IGYpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIH0KPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oGlmICghcmV0KQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKB2NGxfcHJpbnRfcGl4
X2ZtdF9tcGxhbmUodmZkLCAmZi0+Zm10LnBpeF9tcCk7Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKBicmVhazsKPiBAQCAtODI5LDQ0ICs3MTcsMTUgQEAgc3RhdGljIGxvbmcgX192aWRlb19kb19p
b2N0bChzdHJ1Y3QgZmlsZSAqZmlsZSwKPiCgIKAgoCCgIKAgoCCgIKBjYXNlIFY0TDJfQlVGX1RZ
UEVfVklERU9fQ0FQVFVSRToKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoENMRUFSX0FGVEVSX0ZJ
RUxEKGYsIGZtdC5waXgpOwo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgdjRsX3ByaW50X3BpeF9m
bXQodmZkLCAmZi0+Zm10LnBpeCk7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKG9wcy0+
dmlkaW9jX3NfZm10X3ZpZF9jYXApIHsKPiArIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAob3Bz
LT52aWRpb2Nfc19mbXRfdmlkX2NhcCkKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
cmV0ID0gb3BzLT52aWRpb2Nfc19mbXRfdmlkX2NhcChmaWxlLCBmaCwgZik7Cj4gLSCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgfSBlbHNlIGlmIChvcHMtPnZpZGlvY19zX2ZtdF92aWRfY2FwX21wbGFu
ZSkgewo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKGZtdF9zcF90b19tcChm
LCAmZl9jb3B5KSkKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJl
YWs7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCByZXQgPSBvcHMtPnZpZGlvY19z
X2ZtdF92aWRfY2FwX21wbGFuZShmaWxlLCBmaCwKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCAmZl9jb3B5KTsK
PiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChyZXQpCj4gLSCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGJyZWFrOwo+IC0KPiAtIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIGlmIChmX2NvcHkuZm10LnBpeF9tcC5udW1fcGxhbmVzID4gMSkgewo+
IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCAvKiBEcml2ZXJzIHNob3Vs
ZG4ndCBhZGp1c3QgZnJvbSAxLXBsYW5lCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAqIHRvIG1vcmUgdGhhbiAxLXBsYW5lIGZvcm1hdHMgKi8KPiAtIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0gLUVCVVNZOwo+IC0goCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBXQVJOX09OKDEpOwo+IC0goCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBicmVhazsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIH0KPiAtCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCByZXQgPSBm
bXRfbXBfdG9fc3AoJmZfY29weSwgZik7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgfQo+IKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgYnJlYWs7Cj4goCCgIKAgoCCgIKAgoCCgY2FzZSBWNEwyX0JV
Rl9UWVBFX1ZJREVPX0NBUFRVUkVfTVBMQU5FOgo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgQ0xF
QVJfQUZURVJfRklFTEQoZiwgZm10LnBpeF9tcCk7Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKB2
NGxfcHJpbnRfcGl4X2ZtdF9tcGxhbmUodmZkLCAmZi0+Zm10LnBpeF9tcCk7Cj4gLSCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgaWYgKG9wcy0+dmlkaW9jX3NfZm10X3ZpZF9jYXBfbXBsYW5lKSB7Cj4g
KyCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKG9wcy0+dmlkaW9jX3NfZm10X3ZpZF9jYXBfbXBs
YW5lKQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKByZXQgPSBvcHMtPnZpZGlvY19z
X2ZtdF92aWRfY2FwX21wbGFuZShmaWxlLAo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgZmgsIGYpOwo+IC0goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIH0gZWxzZSBpZiAob3BzLT52aWRpb2Nfc19mbXRfdmlkX2NhcCAm
Jgo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBmLT5mbXQucGl4X21w
Lm51bV9wbGFuZXMgPT0gMSkgewo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYg
KGZtdF9tcF90b19zcChmLCAmZl9jb3B5KSkKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgYnJlYWs7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCByZXQg
PSBvcHMtPnZpZGlvY19zX2ZtdF92aWRfY2FwKGZpbGUsCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGZoLCAmZl9jb3B5KTsK
PiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChyZXQpCj4gLSCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGJyZWFrOwo+IC0KPiAtIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIHJldCA9IGZtdF9zcF90b19tcCgmZl9jb3B5LCBmKTsKPiAtIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCB9Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBicmVhazsKPiCgIKAg
oCCgIKAgoCCgIKBjYXNlIFY0TDJfQlVGX1RZUEVfVklERU9fT1ZFUkxBWToKPiCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoENMRUFSX0FGVEVSX0ZJRUxEKGYsIGZtdC53aW4pOwo+IEBAIC04NzcsNDQg
KzczNiwxNSBAQCBzdGF0aWMgbG9uZyBfX3ZpZGVvX2RvX2lvY3RsKHN0cnVjdCBmaWxlICpmaWxl
LAo+IKAgoCCgIKAgoCCgIKAgoGNhc2UgVjRMMl9CVUZfVFlQRV9WSURFT19PVVRQVVQ6Cj4goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKBDTEVBUl9BRlRFUl9GSUVMRChmLCBmbXQucGl4KTsKPiCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoHY0bF9wcmludF9waXhfZm10KHZmZCwgJmYtPmZtdC5waXgpOwo+
IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChvcHMtPnZpZGlvY19zX2ZtdF92aWRfb3V0KSB7
Cj4gKyCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKG9wcy0+dmlkaW9jX3NfZm10X3ZpZF9vdXQp
Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoHJldCA9IG9wcy0+dmlkaW9jX3NfZm10
X3ZpZF9vdXQoZmlsZSwgZmgsIGYpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIH0gZWxzZSBp
ZiAob3BzLT52aWRpb2Nfc19mbXRfdmlkX291dF9tcGxhbmUpIHsKPiAtIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIGlmIChmbXRfc3BfdG9fbXAoZiwgJmZfY29weSkpCj4gLSCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGJyZWFrOwo+IC0goCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgcmV0ID0gb3BzLT52aWRpb2Nfc19mbXRfdmlkX291dF9tcGxhbmUoZmls
ZSwgZmgsCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgJmZfY29weSk7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCBpZiAocmV0KQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCBicmVhazsKPiAtCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAoZl9j
b3B5LmZtdC5waXhfbXAubnVtX3BsYW5lcyA+IDEpIHsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgLyogRHJpdmVycyBzaG91bGRuJ3QgYWRqdXN0IGZyb20gMS1wbGFu
ZQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgKiB0byBtb3JlIHRo
YW4gMS1wbGFuZSBmb3JtYXRzICovCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIHJldCA9IC1FQlVTWTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgV0FSTl9PTigxKTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgYnJlYWs7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCB9Cj4gLQo+IC0goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0gZm10X21wX3RvX3NwKCZmX2NvcHksIGYp
Owo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIH0KPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoGJy
ZWFrOwo+IKAgoCCgIKAgoCCgIKAgoGNhc2UgVjRMMl9CVUZfVFlQRV9WSURFT19PVVRQVVRfTVBM
QU5FOgo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgQ0xFQVJfQUZURVJfRklFTEQoZiwgZm10LnBp
eF9tcCk7Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKB2NGxfcHJpbnRfcGl4X2ZtdF9tcGxhbmUo
dmZkLCAmZi0+Zm10LnBpeF9tcCk7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKG9wcy0+
dmlkaW9jX3NfZm10X3ZpZF9vdXRfbXBsYW5lKSB7Cj4gKyCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
aWYgKG9wcy0+dmlkaW9jX3NfZm10X3ZpZF9vdXRfbXBsYW5lKQo+IKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKByZXQgPSBvcHMtPnZpZGlvY19zX2ZtdF92aWRfb3V0X21wbGFuZShmaWxl
LAo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgZmgsIGYpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIH0gZWxz
ZSBpZiAob3BzLT52aWRpb2Nfc19mbXRfdmlkX291dCAmJgo+IC0goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCBmLT5mbXQucGl4X21wLm51bV9wbGFuZXMgPT0gMSkgewo+IC0g
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKGZtdF9tcF90b19zcChmLCAmZl9jb3B5
KSkKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJlYWs7Cj4gLSCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCByZXQgPSBvcHMtPnZpZGlvY19zX2ZtdF92aWRf
b3V0KGZpbGUsCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIGZoLCAmZl9jb3B5KTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIGlmIChyZXQpCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIGJyZWFrOwo+IC0KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IGZt
dF9tcF90b19zcCgmZl9jb3B5LCBmKTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCB9Cj4goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKBicmVhazsKPiCgIKAgoCCgIKAgoCCgIKBjYXNlIFY0TDJfQlVG
X1RZUEVfVklERU9fT1VUUFVUX09WRVJMQVk6Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBDTEVB
Ul9BRlRFUl9GSUVMRChmLCBmbXQud2luKTsKPiBAQCAtOTYzLDQ0ICs3OTMsMTYgQEAgc3RhdGlj
IGxvbmcgX192aWRlb19kb19pb2N0bChzdHJ1Y3QgZmlsZSAqZmlsZSwKPiCgIKAgoCCgIKAgoCCg
IKBzd2l0Y2ggKGYtPnR5cGUpIHsKPiCgIKAgoCCgIKAgoCCgIKBjYXNlIFY0TDJfQlVGX1RZUEVf
VklERU9fQ0FQVFVSRToKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoENMRUFSX0FGVEVSX0ZJRUxE
KGYsIGZtdC5waXgpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChvcHMtPnZpZGlvY190
cnlfZm10X3ZpZF9jYXApIHsKPiArIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAob3BzLT52aWRp
b2NfdHJ5X2ZtdF92aWRfY2FwKQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKByZXQg
PSBvcHMtPnZpZGlvY190cnlfZm10X3ZpZF9jYXAoZmlsZSwgZmgsIGYpOwo+IC0goCCgIKAgoCCg
IKAgoCCgIKAgoCCgIH0gZWxzZSBpZiAob3BzLT52aWRpb2NfdHJ5X2ZtdF92aWRfY2FwX21wbGFu
ZSkgewo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKGZtdF9zcF90b19tcChm
LCAmZl9jb3B5KSkKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJl
YWs7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCByZXQgPSBvcHMtPnZpZGlvY190
cnlfZm10X3ZpZF9jYXBfbXBsYW5lKGZpbGUsCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGZoLCAmZl9jb3B5KTsKPiAtIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChyZXQpCj4gLSCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIGJyZWFrOwo+IC0KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIGlmIChmX2NvcHkuZm10LnBpeF9tcC5udW1fcGxhbmVzID4gMSkgewo+IC0goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCAvKiBEcml2ZXJzIHNob3VsZG4ndCBh
ZGp1c3QgZnJvbSAxLXBsYW5lCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAqIHRvIG1vcmUgdGhhbiAxLXBsYW5lIGZvcm1hdHMgKi8KPiAtIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0gLUVCVVNZOwo+IC0goCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBXQVJOX09OKDEpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCBicmVhazsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIH0KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IGZtdF9tcF90b19z
cCgmZl9jb3B5LCBmKTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCB9Cj4goCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKBpZiAoIXJldCkKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgdjRs
X3ByaW50X3BpeF9mbXQodmZkLCAmZi0+Zm10LnBpeCk7Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKBicmVhazsKPiCgIKAgoCCgIKAgoCCgIKBjYXNlIFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVS
RV9NUExBTkU6Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBDTEVBUl9BRlRFUl9GSUVMRChmLCBm
bXQucGl4X21wKTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAob3BzLT52aWRpb2NfdHJ5
X2ZtdF92aWRfY2FwX21wbGFuZSkgewo+ICsgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChvcHMt
PnZpZGlvY190cnlfZm10X3ZpZF9jYXBfbXBsYW5lKQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKByZXQgPSBvcHMtPnZpZGlvY190cnlfZm10X3ZpZF9jYXBfbXBsYW5lKGZpbGUsCj4g
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgZmgsIGYpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIH0gZWxzZSBp
ZiAob3BzLT52aWRpb2NfdHJ5X2ZtdF92aWRfY2FwICYmCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIGYtPmZtdC5waXhfbXAubnVtX3BsYW5lcyA9PSAxKSB7Cj4gLSCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAoZm10X21wX3RvX3NwKGYsICZmX2NvcHkp
KQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBicmVhazsKPiAtIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IG9wcy0+dmlkaW9jX3RyeV9mbXRfdmlk
X2NhcChmaWxlLAo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIGZoLCAmZl9jb3B5KTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIGlmIChyZXQpCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIGJyZWFrOwo+IC0KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9
IGZtdF9zcF90b19tcCgmZl9jb3B5LCBmKTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCB9Cj4g
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBpZiAoIXJldCkKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgdjRsX3ByaW50X3BpeF9mbXRfbXBsYW5lKHZmZCwgJmYtPmZtdC5waXhfbXApOwo+
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgYnJlYWs7Cj4gQEAgLTEwMTIsNDQgKzgxNCwxNiBAQCBz
dGF0aWMgbG9uZyBfX3ZpZGVvX2RvX2lvY3RsKHN0cnVjdCBmaWxlICpmaWxlLAo+IKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgYnJlYWs7Cj4goCCgIKAgoCCgIKAgoCCgY2FzZSBWNEwyX0JVRl9UWVBF
X1ZJREVPX09VVFBVVDoKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoENMRUFSX0FGVEVSX0ZJRUxE
KGYsIGZtdC5waXgpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChvcHMtPnZpZGlvY190
cnlfZm10X3ZpZF9vdXQpIHsKPiArIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBpZiAob3BzLT52aWRp
b2NfdHJ5X2ZtdF92aWRfb3V0KQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKByZXQg
PSBvcHMtPnZpZGlvY190cnlfZm10X3ZpZF9vdXQoZmlsZSwgZmgsIGYpOwo+IC0goCCgIKAgoCCg
IKAgoCCgIKAgoCCgIH0gZWxzZSBpZiAob3BzLT52aWRpb2NfdHJ5X2ZtdF92aWRfb3V0X21wbGFu
ZSkgewo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKGZtdF9zcF90b19tcChm
LCAmZl9jb3B5KSkKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgYnJl
YWs7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCByZXQgPSBvcHMtPnZpZGlvY190
cnlfZm10X3ZpZF9vdXRfbXBsYW5lKGZpbGUsCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGZoLCAmZl9jb3B5KTsKPiAtIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChyZXQpCj4gLSCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIGJyZWFrOwo+IC0KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIGlmIChmX2NvcHkuZm10LnBpeF9tcC5udW1fcGxhbmVzID4gMSkgewo+IC0goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCAvKiBEcml2ZXJzIHNob3VsZG4ndCBh
ZGp1c3QgZnJvbSAxLXBsYW5lCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAqIHRvIG1vcmUgdGhhbiAxLXBsYW5lIGZvcm1hdHMgKi8KPiAtIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0gLUVCVVNZOwo+IC0goCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCBXQVJOX09OKDEpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCBicmVhazsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIH0KPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIHJldCA9IGZtdF9tcF90b19z
cCgmZl9jb3B5LCBmKTsKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCB9Cj4goCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKBpZiAoIXJldCkKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgdjRs
X3ByaW50X3BpeF9mbXQodmZkLCAmZi0+Zm10LnBpeCk7Cj4goCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKBicmVhazsKPiCgIKAgoCCgIKAgoCCgIKBjYXNlIFY0TDJfQlVGX1RZUEVfVklERU9fT1VUUFVU
X01QTEFORToKPiCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoENMRUFSX0FGVEVSX0ZJRUxEKGYsIGZt
dC5waXhfbXApOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChvcHMtPnZpZGlvY190cnlf
Zm10X3ZpZF9vdXRfbXBsYW5lKSB7Cj4gKyCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgaWYgKG9wcy0+
dmlkaW9jX3RyeV9mbXRfdmlkX291dF9tcGxhbmUpCj4goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoHJldCA9IG9wcy0+dmlkaW9jX3RyeV9mbXRfdmlkX291dF9tcGxhbmUoZmlsZSwKPiCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCBmaCwgZik7Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgfSBlbHNlIGlm
IChvcHMtPnZpZGlvY190cnlfZm10X3ZpZF9vdXQgJiYKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgoCCgIKAgZi0+Zm10LnBpeF9tcC5udW1fcGxhbmVzID09IDEpIHsKPiAtIKAg
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGlmIChmbXRfbXBfdG9fc3AoZiwgJmZfY29weSkp
Cj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIGJyZWFrOwo+IC0goCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0gb3BzLT52aWRpb2NfdHJ5X2ZtdF92aWRf
b3V0KGZpbGUsCj4gLSCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgZmgsICZmX2NvcHkpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgoCCgIKAgaWYgKHJldCkKPiAtIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAg
oCCgIKAgYnJlYWs7Cj4gLQo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCgIKAgcmV0ID0g
Zm10X3NwX3RvX21wKCZmX2NvcHksIGYpOwo+IC0goCCgIKAgoCCgIKAgoCCgIKAgoCCgIH0KPiCg
IKAgoCCgIKAgoCCgIKAgoCCgIKAgoGlmICghcmV0KQo+IKAgoCCgIKAgoCCgIKAgoCCgIKAgoCCg
IKAgoCCgIKB2NGxfcHJpbnRfcGl4X2ZtdF9tcGxhbmUodmZkLCAmZi0+Zm10LnBpeF9tcCk7Cj4g
oCCgIKAgoCCgIKAgoCCgIKAgoCCgIKBicmVhazsKPiAtLQo+IDEuNy41LjQKPgo+CgoKCi0tIApC
ZXN0IHJlZ2FyZHMsClBhd2VsIE9zY2lhawo=
