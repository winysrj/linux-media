Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail-gg0-f174.google.com ([209.85.161.174]:63388 "EHLO
	mail-gg0-f174.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1752064Ab2GPN3B (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Mon, 16 Jul 2012 09:29:01 -0400
Received: by gglu4 with SMTP id u4so4963544ggl.19
        for <linux-media@vger.kernel.org>; Mon, 16 Jul 2012 06:29:00 -0700 (PDT)
MIME-Version: 1.0
In-Reply-To: <CAAaOdMvidZ031V9jpsfRuwVsfbx8yaZRnkxb5+7hhAURWfeUow@mail.gmail.com>
References: <CAAaOdMvidZ031V9jpsfRuwVsfbx8yaZRnkxb5+7hhAURWfeUow@mail.gmail.com>
Date: Mon, 16 Jul 2012 09:29:00 -0400
Message-ID: <CAGoCfiyqPU+sFopzD0k9TyuCvyANUURYZ=BgfzVTGwwxAhaq+w@mail.gmail.com>
Subject: Re: V4L doesn't work on Wii
From: Devin Heitmueller <dheitmueller@kernellabs.com>
To: "Darwin O'Connor" <doconno@gmail.com>
Cc: linux-media@vger.kernel.org
Content-Type: text/plain; charset=ISO-8859-1
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

On Mon, Jul 16, 2012 at 9:17 AM, Darwin O'Connor <doconno@gmail.com> wrote:
> I have been trying to use my Wii to record video. I'm using MIKE p5
> kernel based on 2.6
> <http://www.gc-linux.org/wiki/MINI:KernelPreviewFive> with the wiitoo
> Gentoo distribution.
>
> When I try and capture video with ffmpeg it fails because it can't
> allocate enough memory. I added some debugging code to ffmpeg and I
> found that the VIDIOC_QUERYBUF ioctl command is returning a size of
> 16777216 and a location of -1412567296 for the first video buffer. It
> doesn't appear any errors are generated by V4L.
>
> I also tried to capture with transcode, but it generated a similar memory error.
>
> This happens for both the em28xx USB video capture device I have and
> the V4L Virtual Video device.
>
> Does anyone have any suggestions on what the cause could be. Perhaps
> some kernel component is missing.

There are known issues with em28xx on non-Intel CPUs.  That's not a
good driver to use for such testing.

No easy answers here.  I suspect nobody has ever tried it, so if you
want it to work you would need to be prepared to roll up your sleeves
and debug the driver code (assuming you have kernel development
experience).  Otherwise your only option is to wait for some developer
who cares enough to figure out why such an obscure setup doesn't work.

We barely have enough resources to keep this stuff working correctly
under x86 - developers are too overloaded to worry about platforms
with zero userbase.

Devin

-- 
Devin J. Heitmueller - Kernel Labs
http://www.kernellabs.com
