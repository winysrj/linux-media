Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail-qt0-f193.google.com ([209.85.216.193]:44090 "EHLO
        mail-qt0-f193.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1753699AbeGEL4p (ORCPT
        <rfc822;linux-media@vger.kernel.org>); Thu, 5 Jul 2018 07:56:45 -0400
Received: by mail-qt0-f193.google.com with SMTP id b15-v6so6786418qtp.11
        for <linux-media@vger.kernel.org>; Thu, 05 Jul 2018 04:56:45 -0700 (PDT)
MIME-Version: 1.0
References: <b3d63a8f038d136b26692bc3a14554960e767f4a.1530740760.git.mchehab+samsung@kernel.org>
 <20180705054909.GA2303@lkp-wsm-ep2>
In-Reply-To: <20180705054909.GA2303@lkp-wsm-ep2>
From: Michael Ira Krufky <mkrufky@linuxtv.org>
Date: Thu, 5 Jul 2018 07:56:33 -0400
Message-ID: <CAOcJUbwgp2Pa7Z6kcUYor2ey4eZLt1t793HW+33EffoytSQnEg@mail.gmail.com>
Subject: Re: [PATCH] media: dvb: fix noderef.cocci warnings
To: Fengguang Wu <fengguang.wu@intel.com>
Cc: mchehab+samsung@kernel.org, kbuild-all@01.org,
        linux-media <linux-media@vger.kernel.org>,
        Mauro Carvalho Chehab <mchehab@infradead.org>,
        linux1394-devel@lists.sourceforge.net
Content-Type: text/plain; charset="UTF-8"
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

On Thu, Jul 5, 2018 at 1:50 AM kbuild test robot <fengguang.wu@intel.com> wrote:
>
> From: kbuild test robot <fengguang.wu@intel.com>
>
> drivers/media/dvb-core/dvb_frontend.c:2396:18-24: ERROR: application of sizeof to pointer
>
>  sizeof when applied to a pointer typed expression gives the size of
>  the pointer
>
> Generated by: scripts/coccinelle/misc/noderef.cocci
>
> Fixes: 07acff734698 ("media: dvb: represent min/max/step/tolerance freqs in Hz")
> CC: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>
> Signed-off-by: kbuild test robot <fengguang.wu@intel.com>
> ---
>
>  dvb_frontend.c |    2 +-
>  1 file changed, 1 insertion(+), 1 deletion(-)
>
> --- a/drivers/media/dvb-core/dvb_frontend.c
> +++ b/drivers/media/dvb-core/dvb_frontend.c
> @@ -2393,7 +2393,7 @@ static int dvb_frontend_handle_ioctl(str
>
>         case FE_GET_INFO: {
>                 struct dvb_frontend_info *info = parg;
> -               memset(info, 0, sizeof(info));
> +               memset(info, 0, sizeof(*info));
>
>                 dvb_frontend_get_frequency_limits(fe, &info->frequency_min, &info->frequency_max);
>                 strcpy(info->name, fe->ops.info.name);

Nice catch!  (even for a robot)  I think we'll find more of these
sprinkled throughout the tree.

Reviewed-by: Michael Ira Krufky <mkrufky@linuxtv.org>
