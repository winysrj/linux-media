Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail-ee0-f46.google.com ([74.125.83.46]:39257 "EHLO
	mail-ee0-f46.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751014Ab2GPNRd (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Mon, 16 Jul 2012 09:17:33 -0400
Received: by eekc13 with SMTP id c13so174106eek.19
        for <linux-media@vger.kernel.org>; Mon, 16 Jul 2012 06:17:32 -0700 (PDT)
MIME-Version: 1.0
Date: Mon, 16 Jul 2012 09:17:32 -0400
Message-ID: <CAAaOdMvidZ031V9jpsfRuwVsfbx8yaZRnkxb5+7hhAURWfeUow@mail.gmail.com>
Subject: V4L doesn't work on Wii
From: "Darwin O'Connor" <doconno@gmail.com>
To: linux-media@vger.kernel.org
Content-Type: text/plain; charset=ISO-8859-1
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

I have been trying to use my Wii to record video. I'm using MIKE p5
kernel based on 2.6
<http://www.gc-linux.org/wiki/MINI:KernelPreviewFive> with the wiitoo
Gentoo distribution.

When I try and capture video with ffmpeg it fails because it can't
allocate enough memory. I added some debugging code to ffmpeg and I
found that the VIDIOC_QUERYBUF ioctl command is returning a size of
16777216 and a location of -1412567296 for the first video buffer. It
doesn't appear any errors are generated by V4L.

I also tried to capture with transcode, but it generated a similar memory error.

This happens for both the em28xx USB video capture device I have and
the V4L Virtual Video device.

Does anyone have any suggestions on what the cause could be. Perhaps
some kernel component is missing.
