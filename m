Return-path: <linux-media-owner@vger.kernel.org>
Received: from mx07-00178001.pphosted.com ([62.209.51.94]:65119 "EHLO
        mx07-00178001.pphosted.com" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S1752252AbeCMOca (ORCPT
        <rfc822;linux-media@vger.kernel.org>);
        Tue, 13 Mar 2018 10:32:30 -0400
From: Hugues FRUCHET <hugues.fruchet@st.com>
To: Maxime Ripard <maxime.ripard@bootlin.com>,
        Mauro Carvalho Chehab <mchehab@kernel.org>
CC: Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
        "linux-media@vger.kernel.org" <linux-media@vger.kernel.org>,
        Thomas Petazzoni <thomas.petazzoni@bootlin.com>,
        Mylene Josserand <mylene.josserand@bootlin.com>,
        Hans Verkuil <hans.verkuil@cisco.com>,
        "Sakari Ailus" <sakari.ailus@linux.intel.com>
Subject: Re: [PATCH 11/12] media: ov5640: Add 60 fps support
Date: Tue, 13 Mar 2018 14:32:14 +0000
Message-ID: <ff080b97-3f7a-36fa-0e1c-16e83106d6a1@st.com>
References: <20180302143500.32650-1-maxime.ripard@bootlin.com>
 <20180302143500.32650-12-maxime.ripard@bootlin.com>
In-Reply-To: <20180302143500.32650-12-maxime.ripard@bootlin.com>
Content-Language: en-US
Content-Type: text/plain; charset="utf-8"
Content-ID: <696F837C27381344AF5040F52966A0A5@st.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

SGkgTWF4aW1lLA0KDQpTZWUgYmVsb3cgcmVzdCBvZiBjb21tZW50cyByZWdhcmRpbmcgZnJhbWVy
YXRlIGFuZCBjb21wbGlhbmNlIGZhaWx1cmUuDQoNCk9uIDAzLzAyLzIwMTggMDM6MzQgUE0sIE1h
eGltZSBSaXBhcmQgd3JvdGU6DQo+IE5vdyB0aGF0IHdlIGhhdmUgZXZlcnl0aGluZyBpbiBwbGFj
ZSB0byBjb21wdXRlIHRoZSBjbG9jayByYXRlIGF0IHJ1bnRpbWUsDQo+IHdlIGNhbiBlbmFibGUg
dGhlIDYwZnBzIGZyYW1lcmF0ZSBmb3IgdGhlIG1vZGUgd2UgdGVzdGVkIGl0IHdpdGguDQo+IA0K
PiBTaWduZWQtb2ZmLWJ5OiBNYXhpbWUgUmlwYXJkIDxtYXhpbWUucmlwYXJkQGJvb3RsaW4uY29t
Pg0KPiAtLS0NCj4gICBkcml2ZXJzL21lZGlhL2kyYy9vdjU2NDAuYyB8IDIwICsrKysrKysrKysr
KysrKy0tLS0tDQo+ICAgMSBmaWxlIGNoYW5nZWQsIDE1IGluc2VydGlvbnMoKyksIDUgZGVsZXRp
b25zKC0pDQo+IA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS9pMmMvb3Y1NjQwLmMgYi9k
cml2ZXJzL21lZGlhL2kyYy9vdjU2NDAuYw0KPiBpbmRleCA1NTEwYTE5MjgxYTQuLjAzODM4ZjQy
ZmI4MiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9tZWRpYS9pMmMvb3Y1NjQwLmMNCj4gKysrIGIv
ZHJpdmVycy9tZWRpYS9pMmMvb3Y1NjQwLmMNCj4gQEAgLTExMSw2ICsxMTEsNyBAQCBlbnVtIG92
NTY0MF9tb2RlX2lkIHsNCj4gICBlbnVtIG92NTY0MF9mcmFtZV9yYXRlIHsNCj4gICAJT1Y1NjQw
XzE1X0ZQUyA9IDAsDQo+ICAgCU9WNTY0MF8zMF9GUFMsDQo+ICsJT1Y1NjQwXzYwX0ZQUywNCj4g
ICAJT1Y1NjQwX05VTV9GUkFNRVJBVEVTLA0KPiAgIH07DQo+ICAgDQo+IEBAIC0xNDQsNiArMTQ1
LDcgQEAgTU9EVUxFX1BBUk1fREVTQyh2aXJ0dWFsX2NoYW5uZWwsDQo+ICAgc3RhdGljIGNvbnN0
IGludCBvdjU2NDBfZnJhbWVyYXRlc1tdID0gew0KPiAgIAlbT1Y1NjQwXzE1X0ZQU10gPSAxNSwN
Cj4gICAJW09WNTY0MF8zMF9GUFNdID0gMzAsDQo+ICsJW09WNTY0MF82MF9GUFNdID0gNjAsDQo+
ICAgfTsNCj4gICANCj4gICAvKiByZWd1bGF0b3Igc3VwcGxpZXMgKi8NCj4gQEAgLTE0NDcsNiAr
MTQ0OSwxMSBAQCBvdjU2NDBfZmluZF9tb2RlKHN0cnVjdCBvdjU2NDBfZGV2ICpzZW5zb3IsIGVu
dW0gb3Y1NjQwX2ZyYW1lX3JhdGUgZnIsDQo+ICAgCSAgICBmciAhPSBPVjU2NDBfMTVfRlBTKQ0K
PiAgIAkJcmV0dXJuIE5VTEw7DQo+ICAgDQo+ICsJLyogT25seSA2NDB4NDgwIGNhbiBvcGVyYXRl
IGF0IDYwZnBzIChmb3Igbm93KSAqLw0KPiArCWlmIChmciA9PSBPVjU2NDBfNjBfRlBTICYmDQo+
ICsJICAgIHdpZHRoICE9IDY0MCAmJiBoZWlnaHQgIT0gNDgwKQ0KPiArCQlyZXR1cm4gTlVMTDsN
Cj4gKw0KDQpTYW1lIGNvbW1lbnQgYXMgb24gcGF0Y2hzZXQgMTAvMTIsIFZHQSBleGNlcHRpb24g
cHV0IGluIGZvciBsb29wOg0KDQoJZm9yIChpID0gT1Y1NjQwX05VTV9NT0RFUyAtIDE7IGkgPj0g
MDsgaS0tKSB7DQoJCW1vZGUgPSAmb3Y1NjQwX21vZGVfZGF0YVtpXTsNCg0KCQlpZiAoIW1vZGUt
PnJlZ19kYXRhKQ0KCQkJY29udGludWU7DQoNCgkJaWYgKChuZWFyZXN0ICYmIG1vZGUtPmhhY3Qg
PD0gd2lkdGggJiYNCgkJICAgICBtb2RlLT52YWN0IDw9IGhlaWdodCkgfHwNCgkJICAgICghbmVh
cmVzdCAmJiBtb2RlLT5oYWN0ID09IHdpZHRoICYmDQoJCSAgICAgbW9kZS0+dmFjdCA9PSBoZWln
aHQpKSB7DQoNCgkJCS8qIDI1OTJ4MTk0NCBjYW4gb25seSBvcGVyYXRlIGF0IDE1ZnBzICovDQoJ
CQlpZiAobW9kZS0+aGFjdCA9PSAyNTkyICYmIG1vZGUtPnZhY3QgPT0gMTk0NCAmJg0KCQkJICAg
IGZyICE9IE9WNTY0MF8xNV9GUFMpDQoJCQkJY29udGludWU7LyogbmV4dCBsb3dlciByZXNvbHV0
aW9uICovDQoNCgkJCS8qIE9ubHkgNjQweDQ4MCBjYW4gb3BlcmF0ZSBhdCA2MGZwcyAoZm9yIG5v
dykgKi8NCgkJCWlmIChmciA9PSBPVjU2NDBfNjBfRlBTICYmDQoJCQkgICAgIShtb2RlLT5oYWN0
ID09IDY0MCAmJiBtb2RlLT52YWN0ID09IDQ4MCkpDQoJCQkJY29udGludWU7LyogbmV4dCBsb3dl
ciByZXNvbHV0aW9uICovDQoNCgkJCWJyZWFrOy8qIHNlbGVjdCB0aGlzIHJlc29sdXRpb24gKi8N
CgkJfQ0KCX0NCg0KDQo+ICAgCXJldHVybiBtb2RlOw0KPiAgIH0NCj4gICANCj4gQEAgLTE4NzUs
MTIgKzE4ODIsMTIgQEAgc3RhdGljIGludCBvdjU2NDBfdHJ5X2ZyYW1lX2ludGVydmFsKHN0cnVj
dCBvdjU2NDBfZGV2ICpzZW5zb3IsDQo+ICAgCWludCByZXQ7DQo+ICAgDQo+ICAgCW1pbmZwcyA9
IG92NTY0MF9mcmFtZXJhdGVzW09WNTY0MF8xNV9GUFNdOw0KPiAtCW1heGZwcyA9IG92NTY0MF9m
cmFtZXJhdGVzW09WNTY0MF8zMF9GUFNdOw0KPiArCW1heGZwcyA9IG92NTY0MF9mcmFtZXJhdGVz
W09WNTY0MF82MF9GUFNdOw0KPiAgIA0KPiAgIAlpZiAoZmktPm51bWVyYXRvciA9PSAwKSB7DQo+
ICAgCQlmaS0+ZGVub21pbmF0b3IgPSBtYXhmcHM7DQo+ICAgCQlmaS0+bnVtZXJhdG9yID0gMTsN
Cj4gLQkJcmV0dXJuIE9WNTY0MF8zMF9GUFM7DQo+ICsJCXJldHVybiBPVjU2NDBfNjBfRlBTOw0K
DQpUaGVyZSBpcyBhIHByb2JsZW0gaGVyZSBiZWNhdXNlIHdlIGRvbid0IHZhbGlkYXRlIHRoYXQg
NjBmcHMgaXMgDQpzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnRseSBzZXQgbW9kZSwgd2UgbXVzdCBp
bmplY3QgdGhpcyBmcmFtZXJhdGUgdmFsdWUgDQppbiBvdjU2NDBfZmluZF9tb2RlKGZyYW1lcmF0
ZSwgd2lkdGgsIGhlaWdodCkgaW4gb3JkZXIgdG8gdmFsaWRhdGUgaXQgDQooLUVJTlZBTCBpZiBu
b3Qgc3VwcG9ydGVkKToNCg0KICArCQlyZXQgPSBPVjU2NDBfNjBfRlBTOw0KICArCQlnb3RvIGZp
bmRfbW9kZTsNCiAgKwl9DQpbLi4uXQ0KK2ZpbmRfbW9kZToNCgltb2RlID0gb3Y1NjQwX2ZpbmRf
bW9kZShzZW5zb3IsIGZyYW1lX3JhdGUsIHdpZHRoLCBoZWlnaHQsIGZhbHNlKTsNCglyZXR1cm4g
bW9kZSA/IHJldCA6IC1FSU5WQUw7DQogIH0NCg0KVGhlbiB3ZSBoYXZlIHRvIGNhdGNoIGVycm9y
IGluIG92NTY0MF9zX2ZyYW1lX2ludGVydmFsKCkgYW5kIHJldHVybiBhbiANCmFjY2VwdGFibGUg
ZnJhbWUgaW50ZXJ2YWwgdG8gdXNlcjoNCg0KICAJZnJhbWVfcmF0ZSA9IG92NTY0MF90cnlfZnJh
bWVfaW50ZXJ2YWwoc2Vuc29yLCAmZmktPmludGVydmFsLA0KICAJCQkJCSAgICAgICBtb2RlLT5o
YWN0LCBtb2RlLT52YWN0KTsNCi0JaWYgKGZyYW1lX3JhdGUgPCAwKQ0KLQkJZnJhbWVfcmF0ZSA9
IE9WNTY0MF8xNV9GUFM7DQotDQotCXNlbnNvci0+Y3VycmVudF9mciA9IGZyYW1lX3JhdGU7DQot
CXNlbnNvci0+ZnJhbWVfaW50ZXJ2YWwgPSBmaS0+aW50ZXJ2YWw7DQpXZSBhbHNvIGhhdmUgdG8g
dXBkYXRlIGN1cnJlbnQgZnJhbWVyYXRlIG9ubHkgaWYgZnJhbWVyYXRlIGhhcyBiZWVuIA0KdmFs
aWRhdGVkLg0KDQorCWlmIChmcmFtZV9yYXRlIDwgMCkgew0KKwkJLyogcmV0dXJuIGEgdmFsaWQg
ZnJhbWUgaW50ZXJ2YWwgdmFsdWUgKi8NCisJCWZpLT5pbnRlcnZhbCA9IHNlbnNvci0+ZnJhbWVf
aW50ZXJ2YWw7DQogIAkJZ290byBvdXQ7DQogIAl9DQoNCisJc2Vuc29yLT5jdXJyZW50X2ZyID0g
ZnJhbWVfcmF0ZTsNCisJc2Vuc29yLT5mcmFtZV9pbnRlcnZhbCA9IGZpLT5pbnRlcnZhbDsNCiAg
CXNlbnNvci0+cGVuZGluZ19tb2RlX2NoYW5nZSA9IHRydWU7DQogIG91dDoNCg0KDQpBYm91dCA2
MCBmcHMgYnkgZGVmYXVsdCBpZiAoZmktPm51bWVyYXRvciA9PSAwKTogc2hvdWxkbid0IHdlIHN0
aWNrIHRvIGEgDQpkZWZhdWx0IHZhbHVlIHN1cHBvcnRlZCBieSBhbGwgbW9kZXMgc3VjaCBhcyAz
MGZwcyA/DQoNCj4gICAJfQ0KPiAgIA0KPiAgIAlmcHMgPSBESVZfUk9VTkRfQ0xPU0VTVChmaS0+
ZGVub21pbmF0b3IsIGZpLT5udW1lcmF0b3IpOw0KPiBAQCAtMTg5MiwxMCArMTg5OSwxMyBAQCBz
dGF0aWMgaW50IG92NTY0MF90cnlfZnJhbWVfaW50ZXJ2YWwoc3RydWN0IG92NTY0MF9kZXYgKnNl
bnNvciwNCj4gICAJCWZpLT5kZW5vbWluYXRvciA9IG1pbmZwczsNCj4gICAJZWxzZSBpZiAoMiAq
IGZwcyA+PSAyICogbWluZnBzICsgKG1heGZwcyAtIG1pbmZwcykpDQo+ICAgCQlmaS0+ZGVub21p
bmF0b3IgPSBtYXhmcHM7DQo+IC0JZWxzZQ0KPiAtCQlmaS0+ZGVub21pbmF0b3IgPSBtaW5mcHM7
DQo+ICAgDQo+IC0JcmV0ID0gKGZpLT5kZW5vbWluYXRvciA9PSBtaW5mcHMpID8gT1Y1NjQwXzE1
X0ZQUyA6IE9WNTY0MF8zMF9GUFM7DQo+ICsJaWYgKGZpLT5kZW5vbWluYXRvciA9PSBtaW5mcHMp
DQo+ICsJCXJldCA9IE9WNTY0MF8xNV9GUFM7DQo+ICsJZWxzZSBpZiAoZmktPmRlbm9taW5hdG9y
ID09IG1heGZwcykNCj4gKwkJcmV0ID0gT1Y1NjQwXzYwX0ZQUzsNCj4gKwllbHNlDQo+ICsJCXJl
dCA9IE9WNTY0MF8zMF9GUFM7DQo+ICAgDQo+ICAgCW1vZGUgPSBvdjU2NDBfZmluZF9tb2RlKHNl
bnNvciwgcmV0LCB3aWR0aCwgaGVpZ2h0LCBmYWxzZSk7DQo+ICAgCXJldHVybiBtb2RlID8gcmV0
IDogLUVJTlZBTDsNCj4gDQoNCldpdGggdGhpcyA2MGZwcyBjaGFuZ2UsIHdlIGhhdmUgYWxzbyB0
byBjaGFuZ2UgdGhlIGRlZmF1bHQgbW9kZSB0byBWR0EsIA0KYmVjYXVzZSBpdCdzIHRoZSBvbmx5
IG9uZSByZXNvbHV0aW9uIHRoYXQgc3VwcG9ydHMgYWxsIHRoZSAzIGZyYW1lcmF0ZXMgDQoxNS8z
MC82MDoNCg0Kc3RhdGljIGNvbnN0IHN0cnVjdCBvdjU2NDBfbW9kZV9pbmZvICoNCiAgb3Y1NjQw
X2ZpbmRfbW9kZShzdHJ1Y3Qgb3Y1NjQwX2RldiAqc2Vuc29yLCBlbnVtIG92NTY0MF9mcmFtZV9y
YXRlIGZyLA0KICAJCSBpbnQgd2lkdGgsIGludCBoZWlnaHQsIGJvb2wgbmVhcmVzdCkNCiAgew0K
DQogIAlpZiAoaSA8IDApIHsNCiAgCQkvKiBubyBtYXRjaCAqLw0KICAJCWlmICghbmVhcmVzdCkN
CiAgCQkJcmV0dXJuIE5VTEw7DQotCQltb2RlID0gJm92NTY0MF9tb2RlX2RhdGFbMF07DQorCQlt
b2RlID0gJm92NTY0MF9tb2RlX2RhdGFbT1Y1NjQwX01PREVfVkdBXzY0MF80ODBdOy8qIFZHQSBj
YW4gZG8gYWxsIA0KZnBzICovDQogIAl9DQoNCg0KQmVzdCByZWdhcmRzLA0KSHVndWVzLg==
