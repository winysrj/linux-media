Return-path: <video4linux-list-bounces@redhat.com>
Received: from mx3.redhat.com (mx3.redhat.com [172.16.48.32])
	by int-mx1.corp.redhat.com (8.13.1/8.13.1) with ESMTP id mASA7Znn008361
	for <video4linux-list@redhat.com>; Fri, 28 Nov 2008 05:07:35 -0500
Received: from qb-out-0506.google.com (qb-out-0506.google.com [72.14.204.230])
	by mx3.redhat.com (8.13.8/8.13.8) with ESMTP id mASA7GpE002268
	for <video4linux-list@redhat.com>; Fri, 28 Nov 2008 05:07:16 -0500
Received: by qb-out-0506.google.com with SMTP id c8so1447672qbc.7
	for <video4linux-list@redhat.com>; Fri, 28 Nov 2008 02:07:16 -0800 (PST)
Message-ID: <5d5443650811280207o7e91eb75geb7627b0e555480d@mail.gmail.com>
Date: Fri, 28 Nov 2008 15:37:15 +0530
From: "Trilok Soni" <soni.trilok@gmail.com>
To: "Sakari Ailus" <sakari.ailus@nokia.com>,
	"Hans Verkuil" <hverkuil@xs4all.nl>
In-Reply-To: <492E69C9.9080904@nokia.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_Part_52235_30839869.1227866835821"
References: <5d5443650811261044w30748b75w5a47ce8b04680f79@mail.gmail.com>
	<200811262116.42364.hverkuil@xs4all.nl>
	<5d5443650811262323l759d8c02s835c9a7454508b85@mail.gmail.com>
	<492E69C9.9080904@nokia.com>
Cc: video4linux-list@redhat.com,
	"linux-omap@vger.kernel.org Mailing List" <linux-omap@vger.kernel.org>
Subject: Re: [PATCH] Add OMAP2 camera driver
List-Unsubscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/mailman/private/video4linux-list>
List-Post: <mailto:video4linux-list@redhat.com>
List-Help: <mailto:video4linux-list-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=subscribe>
Sender: video4linux-list-bounces@redhat.com
Errors-To: video4linux-list-bounces@redhat.com
List-ID: <video4linux-list@redhat.com>

------=_Part_52235_30839869.1227866835821
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Hans

>
> I'm in if the aim is to get this back to linux-omap. :-) (Waiting for the
> next patch from Trilok.)
>

Attached the updated patch for OMAP2 camera driver.

-- 
---Trilok Soni
http://triloksoni.wordpress.com
http://www.linkedin.com/in/triloksoni

------=_Part_52235_30839869.1227866835821
Content-Type: text/x-patch; name=0001-Add-OMAP2-camera-driver.patch
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fo2o663r0
Content-Disposition: attachment;
 filename=0001-Add-OMAP2-camera-driver.patch

RnJvbSA5ZTVkYmVjNzlhNDY3ZTUxMDRiNWNjODkxNGY2YjQyNDFhYTMzODgyIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBTYWthcmkgQWlsdXMgPHNha2FyaS5haWx1c0Bub2tpYS5jb20+
CkRhdGU6IFRodSwgMjcgTm92IDIwMDggMDA6MDg6MjcgKzA1MzAKU3ViamVjdDogW1BBVENIXSBB
ZGQgT01BUDIgY2FtZXJhIGRyaXZlci4KCkFkZCBhIGRyaXZlciBmb3IgdGhlIE9NQVAyIGNhbWVy
YSBibG9jay4gT01BUDIgaXMgdXNlZCBpbiBlLmcuIE5va2lhCk44MDAvTjgxMCBpbnRlcm5ldCB0
YWJsZXQuCgpUaGlzIGRyaXZlciB1c2VzIHRoZSBWNEwyIGludGVybmFsIGlvY3RsIGludGVyZmFj
ZS4KClNpZ25lZC1vZmYtYnk6IFRyaWxvayBTb25pIDxzb25pLnRyaWxva0BnbWFpbC5jb20+Ci0t
LQogZHJpdmVycy9tZWRpYS92aWRlby9LY29uZmlnICAgICAgICAgICB8ICAgIDcgKwogZHJpdmVy
cy9tZWRpYS92aWRlby9NYWtlZmlsZSAgICAgICAgICB8ICAgIDMgKwogZHJpdmVycy9tZWRpYS92
aWRlby9vbWFwMjR4eGNhbS1kbWEuYyB8ICA2MDEgKysrKysrKysrKysKIGRyaXZlcnMvbWVkaWEv
dmlkZW8vb21hcDI0eHhjYW0uYyAgICAgfCAxOTA4ICsrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKwogZHJpdmVycy9tZWRpYS92aWRlby9vbWFwMjR4eGNhbS5oICAgICB8ICA1OTMgKysr
KysrKysrKwogNSBmaWxlcyBjaGFuZ2VkLCAzMTEyIGluc2VydGlvbnMoKyksIDAgZGVsZXRpb25z
KC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9tZWRpYS92aWRlby9vbWFwMjR4eGNhbS1k
bWEuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvbWVkaWEvdmlkZW8vb21hcDI0eHhjYW0u
YwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvbWVkaWEvdmlkZW8vb21hcDI0eHhjYW0uaAoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWVkaWEvdmlkZW8vS2NvbmZpZyBiL2RyaXZlcnMvbWVkaWEv
dmlkZW8vS2NvbmZpZwppbmRleCA0NzEwMmMyLi5kOTgwZjIzIDEwMDY0NAotLS0gYS9kcml2ZXJz
L21lZGlhL3ZpZGVvL0tjb25maWcKKysrIGIvZHJpdmVycy9tZWRpYS92aWRlby9LY29uZmlnCkBA
IC03NjQsNiArNzY0LDEzIEBAIGNvbmZpZyBWSURFT19TSF9NT0JJTEVfQ0VVCiAJLS0taGVscC0t
LQogCSAgVGhpcyBpcyBhIHY0bDIgZHJpdmVyIGZvciB0aGUgU3VwZXJIIE1vYmlsZSBDRVUgSW50
ZXJmYWNlCiAKK2NvbmZpZyBWSURFT19PTUFQMgorCXRyaXN0YXRlICJPTUFQMiBDYW1lcmEgQ2Fw
dHVyZSBJbnRlcmZhY2UgZHJpdmVyIgorCWRlcGVuZHMgb24gVklERU9fREVWICYmIEFSQ0hfT01B
UDIKKwlzZWxlY3QgVklERU9CVUZfRE1BX1NHCisJLS0taGVscC0tLQorCSAgVGhpcyBpcyBhIHY0
bDIgZHJpdmVyIGZvciB0aGUgVEkgT01BUDIgY2FtZXJhIGNhcHR1cmUgaW50ZXJmYWNlCisKICMK
ICMgVVNCIE11bHRpbWVkaWEgZGV2aWNlIGNvbmZpZ3VyYXRpb24KICMKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbWVkaWEvdmlkZW8vTWFrZWZpbGUgYi9kcml2ZXJzL21lZGlhL3ZpZGVvL01ha2VmaWxl
CmluZGV4IDE2OTYyZjMuLjA3OTdjM2MgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbWVkaWEvdmlkZW8v
TWFrZWZpbGUKKysrIGIvZHJpdmVycy9tZWRpYS92aWRlby9NYWtlZmlsZQpAQCAtOCw2ICs4LDgg
QEAgbXNwMzQwMC1vYmpzCTo9CW1zcDM0MDAtZHJpdmVyLm8gbXNwMzQwMC1rdGhyZWFkcy5vCiAK
IHN0a3dlYmNhbS1vYmpzCTo9CXN0ay13ZWJjYW0ubyBzdGstc2Vuc29yLm8KIAorb21hcDJjYW0t
b2Jqcwk6PQlvbWFwMjR4eGNhbS5vIG9tYXAyNHh4Y2FtLWRtYS5vCisKIHZpZGVvZGV2LW9ianMJ
Oj0JdjRsMi1kZXYubyB2NGwyLWlvY3RsLm8KIAogb2JqLSQoQ09ORklHX1ZJREVPX0RFVikgKz0g
dmlkZW9kZXYubyBjb21wYXRfaW9jdGwzMi5vIHY0bDItaW50LWRldmljZS5vCkBAIC0xMjksNiAr
MTMxLDcgQEAgb2JqLSQoQ09ORklHX1ZJREVPX0NYMjM4ODUpICs9IGN4MjM4ODUvCiAKIG9iai0k
KENPTkZJR19WSURFT19QWEEyN3gpCSs9IHB4YV9jYW1lcmEubwogb2JqLSQoQ09ORklHX1ZJREVP
X1NIX01PQklMRV9DRVUpCSs9IHNoX21vYmlsZV9jZXVfY2FtZXJhLm8KK29iai0kKENPTkZJR19W
SURFT19PTUFQMikJCSs9IG9tYXAyY2FtLm8KIG9iai0kKENPTkZJR19TT0NfQ0FNRVJBKQkrPSBz
b2NfY2FtZXJhLm8KIG9iai0kKENPTkZJR19TT0NfQ0FNRVJBX01UOU0wMDEpCSs9IG10OW0wMDEu
bwogb2JqLSQoQ09ORklHX1NPQ19DQU1FUkFfTVQ5TTExMSkJKz0gbXQ5bTExMS5vCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL21lZGlhL3ZpZGVvL29tYXAyNHh4Y2FtLWRtYS5jIGIvZHJpdmVycy9tZWRp
YS92aWRlby9vbWFwMjR4eGNhbS1kbWEuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwLi4xZDU0Yjg2Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9tZWRpYS92aWRlby9vbWFw
MjR4eGNhbS1kbWEuYwpAQCAtMCwwICsxLDYwMSBAQAorLyoKKyAqIGRyaXZlcnMvbWVkaWEvdmlk
ZW8vb21hcDI0eHhjYW0tZG1hLmMKKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMDQgTW9udGFWaXN0
YSBTb2Z0d2FyZSwgSW5jLgorICogQ29weXJpZ2h0IChDKSAyMDA0IFRleGFzIEluc3RydW1lbnRz
LgorICogQ29weXJpZ2h0IChDKSAyMDA3IE5va2lhIENvcnBvcmF0aW9uLgorICoKKyAqIENvbnRh
Y3Q6IFNha2FyaSBBaWx1cyA8c2FrYXJpLmFpbHVzQG5va2lhLmNvbT4KKyAqCisgKiBCYXNlZCBv
biBjb2RlIGZyb20gQW5keSBMb3dlIDxzb3VyY2VAbXZpc3RhLmNvbT4gYW5kCisgKiAgICAgICAg
ICAgICAgICAgICAgRGF2aWQgQ29oZW4gPGRhdmlkLmNvaGVuQGluZHQub3JnLmJyPi4KKyAqCisg
KiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQg
YW5kL29yCisgKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQ
dWJsaWMgTGljZW5zZQorICogdmVyc2lvbiAyIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0
d2FyZSBGb3VuZGF0aW9uLgorICoKKyAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0
aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQKKyAqIFdJVEhPVVQgQU5ZIFdBUlJB
TlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAqIE1FUkNIQU5UQUJJ
TElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCisg
KiBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCisgKgorICogWW91IHNo
b3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vu
c2UKKyAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVl
IFNvZnR3YXJlCisgKiBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdCwgRmlmdGggRmxv
b3IsIEJvc3RvbiwgTUEKKyAqIDAyMTEwLTEzMDEgVVNBCisgKi8KKworI2luY2x1ZGUgPGxpbnV4
L2tlcm5lbC5oPgorI2luY2x1ZGUgPGxpbnV4L2lvLmg+CisjaW5jbHVkZSA8bGludXgvc2NhdHRl
cmxpc3QuaD4KKworI2luY2x1ZGUgIm9tYXAyNHh4Y2FtLmgiCisKKy8qCisgKgorICogRE1BIGhh
cmR3YXJlLgorICoKKyAqLworCisvKiBBY2sgYWxsIGludGVycnVwdCBvbiBDU1IgYW5kIElSUVNU
QVRVU19MMCAqLworc3RhdGljIHZvaWQgb21hcDI0eHhjYW1fZG1haHdfYWNrX2FsbCh1bnNpZ25l
ZCBsb25nIGJhc2UpCit7CisJdTMyIGNzcjsKKwlpbnQgaTsKKworCWZvciAoaSA9IDA7IGkgPCBO
VU1fQ0FNRE1BX0NIQU5ORUxTOyArK2kpIHsKKwkJY3NyID0gb21hcDI0eHhjYW1fcmVnX2luKGJh
c2UsIENBTURNQV9DU1IoaSkpOworCQkvKiBhY2sgaW50ZXJydXB0IGluIENTUiAqLworCQlvbWFw
MjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9DU1IoaSksIGNzcik7CisJfQorCW9tYXAyNHh4
Y2FtX3JlZ19vdXQoYmFzZSwgQ0FNRE1BX0lSUVNUQVRVU19MMCwgMHhmKTsKK30KKworLyogQWNr
IGRtYWNoIG9uIENTUiBhbmQgSVJRU1RBVFVTX0wwICovCitzdGF0aWMgdTMyIG9tYXAyNHh4Y2Ft
X2RtYWh3X2Fja19jaCh1bnNpZ25lZCBsb25nIGJhc2UsIGludCBkbWFjaCkKK3sKKwl1MzIgY3Ny
OworCisJY3NyID0gb21hcDI0eHhjYW1fcmVnX2luKGJhc2UsIENBTURNQV9DU1IoZG1hY2gpKTsK
KwkvKiBhY2sgaW50ZXJydXB0IGluIENTUiAqLworCW9tYXAyNHh4Y2FtX3JlZ19vdXQoYmFzZSwg
Q0FNRE1BX0NTUihkbWFjaCksIGNzcik7CisJLyogYWNrIGludGVycnVwdCBpbiBJUlFTVEFUVVMg
Ki8KKwlvbWFwMjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9JUlFTVEFUVVNfTDAsICgxIDw8
IGRtYWNoKSk7CisKKwlyZXR1cm4gY3NyOworfQorCitzdGF0aWMgaW50IG9tYXAyNHh4Y2FtX2Rt
YWh3X3J1bm5pbmcodW5zaWduZWQgbG9uZyBiYXNlLCBpbnQgZG1hY2gpCit7CisJcmV0dXJuIG9t
YXAyNHh4Y2FtX3JlZ19pbihiYXNlLCBDQU1ETUFfQ0NSKGRtYWNoKSkgJiBDQU1ETUFfQ0NSX0VO
QUJMRTsKK30KKworc3RhdGljIHZvaWQgb21hcDI0eHhjYW1fZG1haHdfdHJhbnNmZXJfc2V0dXAo
dW5zaWduZWQgbG9uZyBiYXNlLCBpbnQgZG1hY2gsCisJCQkJCSAgICAgZG1hX2FkZHJfdCBzdGFy
dCwgdTMyIGxlbikKK3sKKwlvbWFwMjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9DQ1IoZG1h
Y2gpLAorCQkJICAgIENBTURNQV9DQ1JfU0VMX1NSQ19EU1RfU1lOQworCQkJICAgIHwgQ0FNRE1B
X0NDUl9CUworCQkJICAgIHwgQ0FNRE1BX0NDUl9EU1RfQU1PREVfUE9TVF9JTkMKKwkJCSAgICB8
IENBTURNQV9DQ1JfU1JDX0FNT0RFX1BPU1RfSU5DCisJCQkgICAgfCBDQU1ETUFfQ0NSX0ZTCisJ
CQkgICAgfCBDQU1ETUFfQ0NSX1dSX0FDVElWRQorCQkJICAgIHwgQ0FNRE1BX0NDUl9SRF9BQ1RJ
VkUKKwkJCSAgICB8IENBTURNQV9DQ1JfU1lOQ0hST19DQU1FUkEpOworCW9tYXAyNHh4Y2FtX3Jl
Z19vdXQoYmFzZSwgQ0FNRE1BX0NMTktfQ1RSTChkbWFjaCksIDApOworCW9tYXAyNHh4Y2FtX3Jl
Z19vdXQoYmFzZSwgQ0FNRE1BX0NFTihkbWFjaCksIGxlbik7CisJb21hcDI0eHhjYW1fcmVnX291
dChiYXNlLCBDQU1ETUFfQ0ZOKGRtYWNoKSwgMSk7CisJb21hcDI0eHhjYW1fcmVnX291dChiYXNl
LCBDQU1ETUFfQ1NEUChkbWFjaCksCisJCQkgICAgQ0FNRE1BX0NTRFBfV1JJVEVfTU9ERV9QT1NU
RUQKKwkJCSAgICB8IENBTURNQV9DU0RQX0RTVF9CVVJTVF9FTl8zMgorCQkJICAgIHwgQ0FNRE1B
X0NTRFBfRFNUX1BBQ0tFRAorCQkJICAgIHwgQ0FNRE1BX0NTRFBfU1JDX0JVUlNUX0VOXzMyCisJ
CQkgICAgfCBDQU1ETUFfQ1NEUF9TUkNfUEFDS0VECisJCQkgICAgfCBDQU1ETUFfQ1NEUF9EQVRB
X1RZUEVfOEJJVFMpOworCW9tYXAyNHh4Y2FtX3JlZ19vdXQoYmFzZSwgQ0FNRE1BX0NTU0EoZG1h
Y2gpLCAwKTsKKwlvbWFwMjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9DRFNBKGRtYWNoKSwg
c3RhcnQpOworCW9tYXAyNHh4Y2FtX3JlZ19vdXQoYmFzZSwgQ0FNRE1BX0NTRUkoZG1hY2gpLCAw
KTsKKwlvbWFwMjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9DU0ZJKGRtYWNoKSwgRE1BX1RI
UkVTSE9MRCk7CisJb21hcDI0eHhjYW1fcmVnX291dChiYXNlLCBDQU1ETUFfQ0RFSShkbWFjaCks
IDApOworCW9tYXAyNHh4Y2FtX3JlZ19vdXQoYmFzZSwgQ0FNRE1BX0NERkkoZG1hY2gpLCAwKTsK
KwlvbWFwMjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9DU1IoZG1hY2gpLAorCQkJICAgIENB
TURNQV9DU1JfTUlTQUxJR05FRF9FUlIKKwkJCSAgICB8IENBTURNQV9DU1JfU0VDVVJFX0VSUgor
CQkJICAgIHwgQ0FNRE1BX0NTUl9UUkFOU19FUlIKKwkJCSAgICB8IENBTURNQV9DU1JfQkxPQ0sK
KwkJCSAgICB8IENBTURNQV9DU1JfRFJPUCk7CisJb21hcDI0eHhjYW1fcmVnX291dChiYXNlLCBD
QU1ETUFfQ0lDUihkbWFjaCksCisJCQkgICAgQ0FNRE1BX0NJQ1JfTUlTQUxJR05FRF9FUlJfSUUK
KwkJCSAgICB8IENBTURNQV9DSUNSX1NFQ1VSRV9FUlJfSUUKKwkJCSAgICB8IENBTURNQV9DSUNS
X1RSQU5TX0VSUl9JRQorCQkJICAgIHwgQ0FNRE1BX0NJQ1JfQkxPQ0tfSUUKKwkJCSAgICB8IENB
TURNQV9DSUNSX0RST1BfSUUpOworfQorCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9kbWFod190
cmFuc2Zlcl9zdGFydCh1bnNpZ25lZCBsb25nIGJhc2UsIGludCBkbWFjaCkKK3sKKwlvbWFwMjR4
eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9DQ1IoZG1hY2gpLAorCQkJICAgIENBTURNQV9DQ1Jf
U0VMX1NSQ19EU1RfU1lOQworCQkJICAgIHwgQ0FNRE1BX0NDUl9CUworCQkJICAgIHwgQ0FNRE1B
X0NDUl9EU1RfQU1PREVfUE9TVF9JTkMKKwkJCSAgICB8IENBTURNQV9DQ1JfU1JDX0FNT0RFX1BP
U1RfSU5DCisJCQkgICAgfCBDQU1ETUFfQ0NSX0VOQUJMRQorCQkJICAgIHwgQ0FNRE1BX0NDUl9G
UworCQkJICAgIHwgQ0FNRE1BX0NDUl9TWU5DSFJPX0NBTUVSQSk7Cit9CisKK3N0YXRpYyB2b2lk
IG9tYXAyNHh4Y2FtX2RtYWh3X3RyYW5zZmVyX2NoYWluKHVuc2lnbmVkIGxvbmcgYmFzZSwgaW50
IGRtYWNoLAorCQkJCQkgICAgIGludCBmcmVlX2RtYWNoKQoreworCWludCBwcmV2X2RtYWNoLCBj
aDsKKworCWlmIChkbWFjaCA9PSAwKQorCQlwcmV2X2RtYWNoID0gTlVNX0NBTURNQV9DSEFOTkVM
UyAtIDE7CisJZWxzZQorCQlwcmV2X2RtYWNoID0gZG1hY2ggLSAxOworCW9tYXAyNHh4Y2FtX3Jl
Z19vdXQoYmFzZSwgQ0FNRE1BX0NMTktfQ1RSTChwcmV2X2RtYWNoKSwKKwkJCSAgICBDQU1ETUFf
Q0xOS19DVFJMX0VOQUJMRV9MTksgfCBkbWFjaCk7CisJLyogRGlkIHdlIGNoYWluIHRoZSBETUEg
dHJhbnNmZXIgYmVmb3JlIHRoZSBwcmV2aW91cyBvbmUKKwkgKiBmaW5pc2hlZD8KKwkgKi8KKwlj
aCA9IChkbWFjaCArIGZyZWVfZG1hY2gpICUgTlVNX0NBTURNQV9DSEFOTkVMUzsKKwl3aGlsZSAo
IShvbWFwMjR4eGNhbV9yZWdfaW4oYmFzZSwgQ0FNRE1BX0NDUihjaCkpCisJCSAmIENBTURNQV9D
Q1JfRU5BQkxFKSkgeworCQlpZiAoY2ggPT0gZG1hY2gpIHsKKwkJCS8qIFRoZSBwcmV2aW91cyB0
cmFuc2ZlciBoYXMgZW5kZWQgYW5kIHRoaXMgb25lCisJCQkgKiBoYXNuJ3Qgc3RhcnRlZCwgc28g
d2UgbXVzdCBub3QgaGF2ZSBjaGFpbmVkCisJCQkgKiB0byB0aGUgcHJldmlvdXMgb25lIGluIHRp
bWUuICBXZSdsbCBoYXZlIHRvCisJCQkgKiBzdGFydCBpdCBub3cuCisJCQkgKi8KKwkJCW9tYXAy
NHh4Y2FtX2RtYWh3X3RyYW5zZmVyX3N0YXJ0KGJhc2UsIGRtYWNoKTsKKwkJCWJyZWFrOworCQl9
IGVsc2UKKwkJCWNoID0gKGNoICsgMSkgJSBOVU1fQ0FNRE1BX0NIQU5ORUxTOworCX0KK30KKwor
LyogQWJvcnQgYWxsIGNoYWluZWQgRE1BIHRyYW5zZmVycy4gQWZ0ZXIgYWxsIHRyYW5zZmVycyBo
YXZlIGJlZW4KKyAqIGFib3J0ZWQgYW5kIHRoZSBETUEgY29udHJvbGxlciBpcyBpZGxlLCB0aGUg
Y29tcGxldGlvbiByb3V0aW5lcyBmb3IKKyAqIGFueSBhYm9ydGVkIHRyYW5zZmVycyB3aWxsIGJl
IGNhbGxlZCBpbiBzZXF1ZW5jZS4gVGhlIERNQQorICogY29udHJvbGxlciBtYXkgbm90IGJlIGlk
bGUgYWZ0ZXIgdGhpcyByb3V0aW5lIGNvbXBsZXRlcywgYmVjYXVzZQorICogdGhlIGNvbXBsZXRp
b24gcm91dGluZXMgbWlnaHQgc3RhcnQgbmV3IHRyYW5zZmVycy4KKyAqLworc3RhdGljIHZvaWQg
b21hcDI0eHhjYW1fZG1haHdfYWJvcnRfY2godW5zaWduZWQgbG9uZyBiYXNlLCBpbnQgZG1hY2gp
Cit7CisJLyogbWFzayBhbGwgaW50ZXJydXB0cyBmcm9tIHRoaXMgY2hhbm5lbCAqLworCW9tYXAy
NHh4Y2FtX3JlZ19vdXQoYmFzZSwgQ0FNRE1BX0NJQ1IoZG1hY2gpLCAwKTsKKwkvKiB1bmxpbmsg
dGhpcyBjaGFubmVsICovCisJb21hcDI0eHhjYW1fcmVnX21lcmdlKGJhc2UsIENBTURNQV9DTE5L
X0NUUkwoZG1hY2gpLCAwLAorCQkJICAgICAgQ0FNRE1BX0NMTktfQ1RSTF9FTkFCTEVfTE5LKTsK
KwkvKiBkaXNhYmxlIHRoaXMgY2hhbm5lbCAqLworCW9tYXAyNHh4Y2FtX3JlZ19tZXJnZShiYXNl
LCBDQU1ETUFfQ0NSKGRtYWNoKSwgMCwgQ0FNRE1BX0NDUl9FTkFCTEUpOworfQorCitzdGF0aWMg
dm9pZCBvbWFwMjR4eGNhbV9kbWFod19pbml0KHVuc2lnbmVkIGxvbmcgYmFzZSkKK3sKKwlvbWFw
MjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9PQ1BfU1lTQ09ORklHLAorCQkJICAgIENBTURN
QV9PQ1BfU1lTQ09ORklHX01JRExFTU9ERV9GU1RBTkRCWQorCQkJICAgIHwgQ0FNRE1BX09DUF9T
WVNDT05GSUdfU0lETEVNT0RFX0ZJRExFCisJCQkgICAgfCBDQU1ETUFfT0NQX1NZU0NPTkZJR19B
VVRPSURMRSk7CisKKwlvbWFwMjR4eGNhbV9yZWdfbWVyZ2UoYmFzZSwgQ0FNRE1BX0dDUiwgMHgx
MCwKKwkJCSAgICAgIENBTURNQV9HQ1JfTUFYX0NIQU5ORUxfRklGT19ERVBUSCk7CisKKwlvbWFw
MjR4eGNhbV9yZWdfb3V0KGJhc2UsIENBTURNQV9JUlFFTkFCTEVfTDAsIDB4Zik7Cit9CisKKy8q
CisgKgorICogSW5kaXZpZHVhbCBETUEgY2hhbm5lbCBoYW5kbGluZy4KKyAqCisgKi8KKworLyog
U3RhcnQgYSBETUEgdHJhbnNmZXIgZnJvbSB0aGUgY2FtZXJhIHRvIG1lbW9yeS4KKyAqIFJldHVy
bnMgemVybyBpZiB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWxseSBzdGFydGVkLCBvciBub24t
emVybyBpZiBhbGwKKyAqIERNQSBjaGFubmVscyBhcmUgYWxyZWFkeSBpbiB1c2Ugb3Igc3RhcnRp
bmcgaXMgY3VycmVudGx5IGluaGliaXRlZC4KKyAqLworc3RhdGljIGludCBvbWFwMjR4eGNhbV9k
bWFfc3RhcnQoc3RydWN0IG9tYXAyNHh4Y2FtX2RtYSAqZG1hLCBkbWFfYWRkcl90IHN0YXJ0LAor
CQkJCSB1MzIgbGVuLCBkbWFfY2FsbGJhY2tfdCBjYWxsYmFjaywgdm9pZCAqYXJnKQoreworCXVu
c2lnbmVkIGxvbmcgZmxhZ3M7CisJaW50IGRtYWNoOworCisJc3Bpbl9sb2NrX2lycXNhdmUoJmRt
YS0+bG9jaywgZmxhZ3MpOworCisJaWYgKCFkbWEtPmZyZWVfZG1hY2ggfHwgYXRvbWljX3JlYWQo
JmRtYS0+ZG1hX3N0b3ApKSB7CisJCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmRtYS0+bG9jaywg
ZmxhZ3MpOworCQlyZXR1cm4gLUVCVVNZOworCX0KKworCWRtYWNoID0gZG1hLT5uZXh0X2RtYWNo
OworCisJZG1hLT5jaF9zdGF0ZVtkbWFjaF0uY2FsbGJhY2sgPSBjYWxsYmFjazsKKwlkbWEtPmNo
X3N0YXRlW2RtYWNoXS5hcmcgPSBhcmc7CisKKwlvbWFwMjR4eGNhbV9kbWFod190cmFuc2Zlcl9z
ZXR1cChkbWEtPmJhc2UsIGRtYWNoLCBzdGFydCwgbGVuKTsKKworCS8qIFdlJ3JlIHJlYWR5IHRv
IHN0YXJ0IHRoZSBETUEgdHJhbnNmZXIuICovCisKKwlpZiAoZG1hLT5mcmVlX2RtYWNoIDwgTlVN
X0NBTURNQV9DSEFOTkVMUykgeworCQkvKiBBIHRyYW5zZmVyIGlzIGFscmVhZHkgaW4gcHJvZ3Jl
c3MsIHNvIHRyeSB0byBjaGFpbiB0byBpdC4gKi8KKwkJb21hcDI0eHhjYW1fZG1haHdfdHJhbnNm
ZXJfY2hhaW4oZG1hLT5iYXNlLCBkbWFjaCwKKwkJCQkJCSBkbWEtPmZyZWVfZG1hY2gpOworCX0g
ZWxzZSB7CisJCS8qIE5vIHRyYW5zZmVyIGlzIGluIHByb2dyZXNzLCBzbyB3ZSdsbCBqdXN0IHN0
YXJ0IHRoaXMgb25lCisJCSAqIG5vdy4KKwkJICovCisJCW9tYXAyNHh4Y2FtX2RtYWh3X3RyYW5z
ZmVyX3N0YXJ0KGRtYS0+YmFzZSwgZG1hY2gpOworCX0KKworCWRtYS0+bmV4dF9kbWFjaCA9IChk
bWEtPm5leHRfZG1hY2ggKyAxKSAlIE5VTV9DQU1ETUFfQ0hBTk5FTFM7CisJZG1hLT5mcmVlX2Rt
YWNoLS07CisKKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZkbWEtPmxvY2ssIGZsYWdzKTsKKwor
CXJldHVybiAwOworfQorCisvKiBBYm9ydCBhbGwgY2hhaW5lZCBETUEgdHJhbnNmZXJzLiBBZnRl
ciBhbGwgdHJhbnNmZXJzIGhhdmUgYmVlbgorICogYWJvcnRlZCBhbmQgdGhlIERNQSBjb250cm9s
bGVyIGlzIGlkbGUsIHRoZSBjb21wbGV0aW9uIHJvdXRpbmVzIGZvcgorICogYW55IGFib3J0ZWQg
dHJhbnNmZXJzIHdpbGwgYmUgY2FsbGVkIGluIHNlcXVlbmNlLiBUaGUgRE1BCisgKiBjb250cm9s
bGVyIG1heSBub3QgYmUgaWRsZSBhZnRlciB0aGlzIHJvdXRpbmUgY29tcGxldGVzLCBiZWNhdXNl
CisgKiB0aGUgY29tcGxldGlvbiByb3V0aW5lcyBtaWdodCBzdGFydCBuZXcgdHJhbnNmZXJzLgor
ICovCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9kbWFfYWJvcnQoc3RydWN0IG9tYXAyNHh4Y2Ft
X2RtYSAqZG1hLCB1MzIgY3NyKQoreworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CisJaW50IGRtYWNo
LCBpLCBmcmVlX2RtYWNoOworCWRtYV9jYWxsYmFja190IGNhbGxiYWNrOworCXZvaWQgKmFyZzsK
KworCXNwaW5fbG9ja19pcnFzYXZlKCZkbWEtPmxvY2ssIGZsYWdzKTsKKworCS8qIHN0b3AgYW55
IERNQSB0cmFuc2ZlcnMgaW4gcHJvZ3Jlc3MgKi8KKwlkbWFjaCA9IChkbWEtPm5leHRfZG1hY2gg
KyBkbWEtPmZyZWVfZG1hY2gpICUgTlVNX0NBTURNQV9DSEFOTkVMUzsKKwlmb3IgKGkgPSAwOyBp
IDwgTlVNX0NBTURNQV9DSEFOTkVMUzsgaSsrKSB7CisJCW9tYXAyNHh4Y2FtX2RtYWh3X2Fib3J0
X2NoKGRtYS0+YmFzZSwgZG1hY2gpOworCQlkbWFjaCA9IChkbWFjaCArIDEpICUgTlVNX0NBTURN
QV9DSEFOTkVMUzsKKwl9CisKKwkvKiBXZSBoYXZlIHRvIGJlIGNhcmVmdWwgaGVyZSBiZWNhdXNl
IHRoZSBjYWxsYmFjayByb3V0aW5lCisJICogbWlnaHQgc3RhcnQgYSBuZXcgRE1BIHRyYW5zZmVy
LCBhbmQgd2Ugb25seSB3YW50IHRvIGFib3J0CisJICogdHJhbnNmZXJzIHRoYXQgd2VyZSBzdGFy
dGVkIGJlZm9yZSB0aGlzIHJvdXRpbmUgd2FzIGNhbGxlZC4KKwkgKi8KKwlmcmVlX2RtYWNoID0g
ZG1hLT5mcmVlX2RtYWNoOworCXdoaWxlICgoZG1hLT5mcmVlX2RtYWNoIDwgTlVNX0NBTURNQV9D
SEFOTkVMUykgJiYKKwkgICAgICAgKGZyZWVfZG1hY2ggPCBOVU1fQ0FNRE1BX0NIQU5ORUxTKSkg
eworCQlkbWFjaCA9IChkbWEtPm5leHRfZG1hY2ggKyBkbWEtPmZyZWVfZG1hY2gpCisJCQklIE5V
TV9DQU1ETUFfQ0hBTk5FTFM7CisJCWNhbGxiYWNrID0gZG1hLT5jaF9zdGF0ZVtkbWFjaF0uY2Fs
bGJhY2s7CisJCWFyZyA9IGRtYS0+Y2hfc3RhdGVbZG1hY2hdLmFyZzsKKwkJZG1hLT5mcmVlX2Rt
YWNoKys7CisJCWZyZWVfZG1hY2grKzsKKwkJaWYgKGNhbGxiYWNrKSB7CisJCQkvKiBsZWF2ZSBp
bnRlcnJ1cHRzIGRpc2FibGVkIGR1cmluZyBjYWxsYmFjayAqLworCQkJc3Bpbl91bmxvY2soJmRt
YS0+bG9jayk7CisJCQkoKmNhbGxiYWNrKSAoZG1hLCBjc3IsIGFyZyk7CisJCQlzcGluX2xvY2so
JmRtYS0+bG9jayk7CisJCX0KKwl9CisKKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZkbWEtPmxv
Y2ssIGZsYWdzKTsKK30KKworLyogQWJvcnQgYWxsIGNoYWluZWQgRE1BIHRyYW5zZmVycy4gQWZ0
ZXIgYWxsIHRyYW5zZmVycyBoYXZlIGJlZW4KKyAqIGFib3J0ZWQgYW5kIHRoZSBETUEgY29udHJv
bGxlciBpcyBpZGxlLCB0aGUgY29tcGxldGlvbiByb3V0aW5lcyBmb3IKKyAqIGFueSBhYm9ydGVk
IHRyYW5zZmVycyB3aWxsIGJlIGNhbGxlZCBpbiBzZXF1ZW5jZS4gSWYgdGhlIGNvbXBsZXRpb24K
KyAqIHJvdXRpbmVzIGF0dGVtcHQgdG8gc3RhcnQgYSBuZXcgRE1BIHRyYW5zZmVyIGl0IHdpbGwg
ZmFpbCwgc28gdGhlCisgKiBETUEgY29udHJvbGxlciB3aWxsIGJlIGlkbGUgYWZ0ZXIgdGhpcyBy
b3V0aW5lIGNvbXBsZXRlcy4KKyAqLworc3RhdGljIHZvaWQgb21hcDI0eHhjYW1fZG1hX3N0b3Ao
c3RydWN0IG9tYXAyNHh4Y2FtX2RtYSAqZG1hLCB1MzIgY3NyKQoreworCWF0b21pY19pbmMoJmRt
YS0+ZG1hX3N0b3ApOworCW9tYXAyNHh4Y2FtX2RtYV9hYm9ydChkbWEsIGNzcik7CisJYXRvbWlj
X2RlYygmZG1hLT5kbWFfc3RvcCk7Cit9CisKKy8qIENhbWVyYSBETUEgaW50ZXJydXB0IHNlcnZp
Y2Ugcm91dGluZS4gKi8KK3ZvaWQgb21hcDI0eHhjYW1fZG1hX2lzcihzdHJ1Y3Qgb21hcDI0eHhj
YW1fZG1hICpkbWEpCit7CisJaW50IGRtYWNoOworCWRtYV9jYWxsYmFja190IGNhbGxiYWNrOwor
CXZvaWQgKmFyZzsKKwl1MzIgY3NyOworCWNvbnN0IHUzMiBjc3JfZXJyb3IgPSBDQU1ETUFfQ1NS
X01JU0FMSUdORURfRVJSCisJCXwgQ0FNRE1BX0NTUl9TVVBFUlZJU09SX0VSUiB8IENBTURNQV9D
U1JfU0VDVVJFX0VSUgorCQl8IENBTURNQV9DU1JfVFJBTlNfRVJSIHwgQ0FNRE1BX0NTUl9EUk9Q
OworCisJc3Bpbl9sb2NrKCZkbWEtPmxvY2spOworCisJaWYgKGRtYS0+ZnJlZV9kbWFjaCA9PSBO
VU1fQ0FNRE1BX0NIQU5ORUxTKSB7CisJCS8qIEEgY2FtZXJhIERNQSBpbnRlcnJ1cHQgb2NjdXJy
ZWQgd2hpbGUgYWxsIGNoYW5uZWxzCisJCSAqIGFyZSBpZGxlLCBzbyB3ZSdsbCBhY2tub3dsZWRn
ZSB0aGUgaW50ZXJydXB0IGluIHRoZQorCQkgKiBJUlFTVEFUVVMgcmVnaXN0ZXIgYW5kIGV4aXQu
CisJCSAqLworCQlvbWFwMjR4eGNhbV9kbWFod19hY2tfYWxsKGRtYS0+YmFzZSk7CisJCXNwaW5f
dW5sb2NrKCZkbWEtPmxvY2spOworCQlyZXR1cm47CisJfQorCisJd2hpbGUgKGRtYS0+ZnJlZV9k
bWFjaCA8IE5VTV9DQU1ETUFfQ0hBTk5FTFMpIHsKKwkJZG1hY2ggPSAoZG1hLT5uZXh0X2RtYWNo
ICsgZG1hLT5mcmVlX2RtYWNoKQorCQkJJSBOVU1fQ0FNRE1BX0NIQU5ORUxTOworCQlpZiAob21h
cDI0eHhjYW1fZG1haHdfcnVubmluZyhkbWEtPmJhc2UsIGRtYWNoKSkgeworCQkJLyogVGhpcyBi
dWZmZXIgaGFzbid0IGZpbmlzaGVkIHlldCwgc28gd2UncmUgZG9uZS4gKi8KKwkJCWJyZWFrOwor
CQl9CisJCWNzciA9IG9tYXAyNHh4Y2FtX2RtYWh3X2Fja19jaChkbWEtPmJhc2UsIGRtYWNoKTsK
KwkJaWYgKGNzciAmIGNzcl9lcnJvcikgeworCQkJLyogQSBETUEgZXJyb3Igb2NjdXJyZWQsIHNv
IHN0b3AgYWxsIERNQQorCQkJICogdHJhbnNmZXJzIGluIHByb2dyZXNzLgorCQkJICovCisJCQlz
cGluX3VubG9jaygmZG1hLT5sb2NrKTsKKwkJCW9tYXAyNHh4Y2FtX2RtYV9zdG9wKGRtYSwgY3Ny
KTsKKwkJCXJldHVybjsKKwkJfSBlbHNlIHsKKwkJCWNhbGxiYWNrID0gZG1hLT5jaF9zdGF0ZVtk
bWFjaF0uY2FsbGJhY2s7CisJCQlhcmcgPSBkbWEtPmNoX3N0YXRlW2RtYWNoXS5hcmc7CisJCQlk
bWEtPmZyZWVfZG1hY2grKzsKKwkJCWlmIChjYWxsYmFjaykgeworCQkJCXNwaW5fdW5sb2NrKCZk
bWEtPmxvY2spOworCQkJCSgqY2FsbGJhY2spIChkbWEsIGNzciwgYXJnKTsKKwkJCQlzcGluX2xv
Y2soJmRtYS0+bG9jayk7CisJCQl9CisJCX0KKwl9CisKKwlzcGluX3VubG9jaygmZG1hLT5sb2Nr
KTsKKworCW9tYXAyNHh4Y2FtX3NnZG1hX3Byb2Nlc3MoCisJCWNvbnRhaW5lcl9vZihkbWEsIHN0
cnVjdCBvbWFwMjR4eGNhbV9zZ2RtYSwgZG1hKSk7Cit9CisKK3ZvaWQgb21hcDI0eHhjYW1fZG1h
X2h3aW5pdChzdHJ1Y3Qgb21hcDI0eHhjYW1fZG1hICpkbWEpCit7CisJdW5zaWduZWQgbG9uZyBm
bGFnczsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZkbWEtPmxvY2ssIGZsYWdzKTsKKworCW9tYXAy
NHh4Y2FtX2RtYWh3X2luaXQoZG1hLT5iYXNlKTsKKworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUo
JmRtYS0+bG9jaywgZmxhZ3MpOworfQorCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9kbWFfaW5p
dChzdHJ1Y3Qgb21hcDI0eHhjYW1fZG1hICpkbWEsCisJCQkJIHVuc2lnbmVkIGxvbmcgYmFzZSkK
K3sKKwlpbnQgY2g7CisKKwkvKiBncm91cCBhbGwgY2hhbm5lbHMgb24gRE1BIElSUTAgYW5kIHVu
bWFzayBpcnEgKi8KKwlzcGluX2xvY2tfaW5pdCgmZG1hLT5sb2NrKTsKKwlkbWEtPmJhc2UgPSBi
YXNlOworCWRtYS0+ZnJlZV9kbWFjaCA9IE5VTV9DQU1ETUFfQ0hBTk5FTFM7CisJZG1hLT5uZXh0
X2RtYWNoID0gMDsKKwlmb3IgKGNoID0gMDsgY2ggPCBOVU1fQ0FNRE1BX0NIQU5ORUxTOyBjaCsr
KSB7CisJCWRtYS0+Y2hfc3RhdGVbY2hdLmNhbGxiYWNrID0gTlVMTDsKKwkJZG1hLT5jaF9zdGF0
ZVtjaF0uYXJnID0gTlVMTDsKKwl9Cit9CisKKy8qCisgKgorICogU2NhdHRlci1nYXRoZXIgRE1B
LgorICoKKyAqIEhpZ2gtbGV2ZWwgRE1BIGNvbnN0cnVjdCBmb3IgdHJhbnNmZXJyaW5nIHdob2xl
IHBpY3R1cmUgZnJhbWVzIHRvCisgKiBtZW1vcnkgdGhhdCBpcyBkaXNjb250aW51b3VzLgorICoK
KyAqLworCisvKiBETUEgY29tcGxldGlvbiByb3V0aW5lIGZvciB0aGUgc2NhdHRlci1nYXRoZXIg
RE1BIGZyYWdtZW50cy4gKi8KK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX3NnZG1hX2NhbGxiYWNr
KHN0cnVjdCBvbWFwMjR4eGNhbV9kbWEgKmRtYSwgdTMyIGNzciwKKwkJCQkgICAgICAgdm9pZCAq
YXJnKQoreworCXN0cnVjdCBvbWFwMjR4eGNhbV9zZ2RtYSAqc2dkbWEgPQorCQljb250YWluZXJf
b2YoZG1hLCBzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEsIGRtYSk7CisJaW50IHNnc2xvdCA9IChp
bnQpYXJnOworCXN0cnVjdCBzZ2RtYV9zdGF0ZSAqc2dfc3RhdGU7CisJY29uc3QgdTMyIGNzcl9l
cnJvciA9IENBTURNQV9DU1JfTUlTQUxJR05FRF9FUlIKKwkJfCBDQU1ETUFfQ1NSX1NVUEVSVklT
T1JfRVJSIHwgQ0FNRE1BX0NTUl9TRUNVUkVfRVJSCisJCXwgQ0FNRE1BX0NTUl9UUkFOU19FUlIg
fCBDQU1ETUFfQ1NSX0RST1A7CisKKwlzcGluX2xvY2soJnNnZG1hLT5sb2NrKTsKKworCS8qIFdl
IGdvdCBhbiBpbnRlcnJ1cHQsIHdlIGNhbiByZW1vdmUgdGhlIHRpbWVyICovCisJZGVsX3RpbWVy
KCZzZ2RtYS0+cmVzZXRfdGltZXIpOworCisJc2dfc3RhdGUgPSBzZ2RtYS0+c2dfc3RhdGUgKyBz
Z3Nsb3Q7CisJaWYgKCFzZ19zdGF0ZS0+cXVldWVkX3NnbGlzdCkgeworCQlzcGluX3VubG9jaygm
c2dkbWEtPmxvY2spOworCQlwcmludGsoS0VSTl9FUlIgIiVzOiBzZ2RtYSBjb21wbGV0ZWQgd2hl
biBub25lIHF1ZXVlZCFcbiIsCisJCSAgICAgICBfX2Z1bmNfXyk7CisJCXJldHVybjsKKwl9CisK
KwlzZ19zdGF0ZS0+Y3NyIHw9IGNzcjsKKwlpZiAoIS0tc2dfc3RhdGUtPnF1ZXVlZF9zZ2xpc3Qp
IHsKKwkJLyogUXVldWUgZm9yIHRoaXMgc2dsaXN0IGlzIGVtcHR5LCBzbyBjaGVjayB0byBzZWUg
aWYgd2UncmUKKwkJICogZG9uZS4KKwkJICovCisJCWlmICgoc2dfc3RhdGUtPm5leHRfc2dsaXN0
ID09IHNnX3N0YXRlLT5zZ2xlbikKKwkJICAgIHx8IChzZ19zdGF0ZS0+Y3NyICYgY3NyX2Vycm9y
KSkgeworCQkJc2dkbWFfY2FsbGJhY2tfdCBjYWxsYmFjayA9IHNnX3N0YXRlLT5jYWxsYmFjazsK
KwkJCXZvaWQgKmFyZyA9IHNnX3N0YXRlLT5hcmc7CisJCQl1MzIgc2dfY3NyID0gc2dfc3RhdGUt
PmNzcjsKKwkJCS8qIEFsbCBkb25lIHdpdGggdGhpcyBzZ2xpc3QgKi8KKwkJCXNnZG1hLT5mcmVl
X3NnZG1hKys7CisJCQlpZiAoY2FsbGJhY2spIHsKKwkJCQlzcGluX3VubG9jaygmc2dkbWEtPmxv
Y2spOworCQkJCSgqY2FsbGJhY2spIChzZ2RtYSwgc2dfY3NyLCBhcmcpOworCQkJCXJldHVybjsK
KwkJCX0KKwkJfQorCX0KKworCXNwaW5fdW5sb2NrKCZzZ2RtYS0+bG9jayk7Cit9CisKKy8qIFN0
YXJ0IHF1ZXVlZCBzY2F0dGVyLWdhdGhlciBETUEgdHJhbnNmZXJzLiAqLwordm9pZCBvbWFwMjR4
eGNhbV9zZ2RtYV9wcm9jZXNzKHN0cnVjdCBvbWFwMjR4eGNhbV9zZ2RtYSAqc2dkbWEpCit7CisJ
dW5zaWduZWQgbG9uZyBmbGFnczsKKwlpbnQgcXVldWVkX3NnZG1hLCBzZ3Nsb3Q7CisJc3RydWN0
IHNnZG1hX3N0YXRlICpzZ19zdGF0ZTsKKwljb25zdCB1MzIgY3NyX2Vycm9yID0gQ0FNRE1BX0NT
Ul9NSVNBTElHTkVEX0VSUgorCQl8IENBTURNQV9DU1JfU1VQRVJWSVNPUl9FUlIgfCBDQU1ETUFf
Q1NSX1NFQ1VSRV9FUlIKKwkJfCBDQU1ETUFfQ1NSX1RSQU5TX0VSUiB8IENBTURNQV9DU1JfRFJP
UDsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZzZ2RtYS0+bG9jaywgZmxhZ3MpOworCisJcXVldWVk
X3NnZG1hID0gTlVNX1NHX0RNQSAtIHNnZG1hLT5mcmVlX3NnZG1hOworCXNnc2xvdCA9IChzZ2Rt
YS0+bmV4dF9zZ2RtYSArIHNnZG1hLT5mcmVlX3NnZG1hKSAlIE5VTV9TR19ETUE7CisJd2hpbGUg
KHF1ZXVlZF9zZ2RtYSA+IDApIHsKKwkJc2dfc3RhdGUgPSBzZ2RtYS0+c2dfc3RhdGUgKyBzZ3Ns
b3Q7CisJCXdoaWxlICgoc2dfc3RhdGUtPm5leHRfc2dsaXN0IDwgc2dfc3RhdGUtPnNnbGVuKSAm
JgorCQkgICAgICAgIShzZ19zdGF0ZS0+Y3NyICYgY3NyX2Vycm9yKSkgeworCQkJY29uc3Qgc3Ry
dWN0IHNjYXR0ZXJsaXN0ICpzZ2xpc3Q7CisJCQl1bnNpZ25lZCBpbnQgbGVuOworCisJCQlzZ2xp
c3QgPSBzZ19zdGF0ZS0+c2dsaXN0ICsgc2dfc3RhdGUtPm5leHRfc2dsaXN0OworCQkJLyogdHJ5
IHRvIHN0YXJ0IHRoZSBuZXh0IERNQSB0cmFuc2ZlciAqLworCQkJaWYgKHNnX3N0YXRlLT5uZXh0
X3NnbGlzdCArIDEgPT0gc2dfc3RhdGUtPnNnbGVuKSB7CisJCQkJLyoKKwkJCQkgKiAgT24gdGhl
IGxhc3Qgc2csIHdlIGhhbmRsZSB0aGUgY2FzZSB3aGVyZQorCQkJCSAqICBjYW0tPmltZy5waXgu
c2l6ZWltYWdlICUgUEFHRV9BTElHTiAhPSAwCisJCQkJICovCisJCQkJbGVuID0gc2dfc3RhdGUt
PmxlbiAtIHNnX3N0YXRlLT5ieXRlc19yZWFkOworCQkJfSBlbHNlIHsKKwkJCQlsZW4gPSBzZ19k
bWFfbGVuKHNnbGlzdCk7CisJCQl9CisKKwkJCWlmIChvbWFwMjR4eGNhbV9kbWFfc3RhcnQoJnNn
ZG1hLT5kbWEsCisJCQkJCQkgIHNnX2RtYV9hZGRyZXNzKHNnbGlzdCksCisJCQkJCQkgIGxlbiwK
KwkJCQkJCSAgb21hcDI0eHhjYW1fc2dkbWFfY2FsbGJhY2ssCisJCQkJCQkgICh2b2lkICopc2dz
bG90KSkgeworCQkJCS8qIERNQSBzdGFydCBmYWlsZWQgKi8KKwkJCQlzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZzZ2RtYS0+bG9jaywgZmxhZ3MpOworCQkJCXJldHVybjsKKwkJCX0gZWxzZSB7CisJ
CQkJdW5zaWduZWQgbG9uZyBleHBpcmVzOworCQkJCS8qIERNQSBzdGFydCB3YXMgc3VjY2Vzc2Z1
bCAqLworCQkJCXNnX3N0YXRlLT5uZXh0X3NnbGlzdCsrOworCQkJCXNnX3N0YXRlLT5ieXRlc19y
ZWFkICs9IGxlbjsKKwkJCQlzZ19zdGF0ZS0+cXVldWVkX3NnbGlzdCsrOworCisJCQkJLyogV2Ug
c3RhcnQgdGhlIHJlc2V0IHRpbWVyICovCisJCQkJZXhwaXJlcyA9IGppZmZpZXMgKyBIWjsKKwkJ
CQltb2RfdGltZXIoJnNnZG1hLT5yZXNldF90aW1lciwgZXhwaXJlcyk7CisJCQl9CisJCX0KKwkJ
cXVldWVkX3NnZG1hLS07CisJCXNnc2xvdCA9IChzZ3Nsb3QgKyAxKSAlIE5VTV9TR19ETUE7CisJ
fQorCisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmc2dkbWEtPmxvY2ssIGZsYWdzKTsKK30KKwor
LyoKKyAqIFF1ZXVlIGEgc2NhdHRlci1nYXRoZXIgRE1BIHRyYW5zZmVyIGZyb20gdGhlIGNhbWVy
YSB0byBtZW1vcnkuCisgKiBSZXR1cm5zIHplcm8gaWYgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNz
ZnVsbHkgcXVldWVkLCBvciBub24temVybworICogaWYgYWxsIG9mIHRoZSBzY2F0dGVyLWdhdGhl
ciBzbG90cyBhcmUgYWxyZWFkeSBpbiB1c2UuCisgKi8KK2ludCBvbWFwMjR4eGNhbV9zZ2RtYV9x
dWV1ZShzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEgKnNnZG1hLAorCQkJICAgIGNvbnN0IHN0cnVj
dCBzY2F0dGVybGlzdCAqc2dsaXN0LCBpbnQgc2dsZW4sCisJCQkgICAgaW50IGxlbiwgc2dkbWFf
Y2FsbGJhY2tfdCBjYWxsYmFjaywgdm9pZCAqYXJnKQoreworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7
CisJc3RydWN0IHNnZG1hX3N0YXRlICpzZ19zdGF0ZTsKKworCWlmICgoc2dsZW4gPCAwKSB8fCAo
KHNnbGVuID4gMCkgJiAhc2dsaXN0KSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlzcGluX2xvY2tf
aXJxc2F2ZSgmc2dkbWEtPmxvY2ssIGZsYWdzKTsKKworCWlmICghc2dkbWEtPmZyZWVfc2dkbWEp
IHsKKwkJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmc2dkbWEtPmxvY2ssIGZsYWdzKTsKKwkJcmV0
dXJuIC1FQlVTWTsKKwl9CisKKwlzZ19zdGF0ZSA9IHNnZG1hLT5zZ19zdGF0ZSArIHNnZG1hLT5u
ZXh0X3NnZG1hOworCisJc2dfc3RhdGUtPnNnbGlzdCA9IHNnbGlzdDsKKwlzZ19zdGF0ZS0+c2ds
ZW4gPSBzZ2xlbjsKKwlzZ19zdGF0ZS0+bmV4dF9zZ2xpc3QgPSAwOworCXNnX3N0YXRlLT5ieXRl
c19yZWFkID0gMDsKKwlzZ19zdGF0ZS0+bGVuID0gbGVuOworCXNnX3N0YXRlLT5xdWV1ZWRfc2ds
aXN0ID0gMDsKKwlzZ19zdGF0ZS0+Y3NyID0gMDsKKwlzZ19zdGF0ZS0+Y2FsbGJhY2sgPSBjYWxs
YmFjazsKKwlzZ19zdGF0ZS0+YXJnID0gYXJnOworCisJc2dkbWEtPm5leHRfc2dkbWEgPSAoc2dk
bWEtPm5leHRfc2dkbWEgKyAxKSAlIE5VTV9TR19ETUE7CisJc2dkbWEtPmZyZWVfc2dkbWEtLTsK
KworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJnNnZG1hLT5sb2NrLCBmbGFncyk7CisKKwlvbWFw
MjR4eGNhbV9zZ2RtYV9wcm9jZXNzKHNnZG1hKTsKKworCXJldHVybiAwOworfQorCisvKiBTeW5j
IHNjYXR0ZXItZ2F0aGVyIERNQSBieSBhYm9ydGluZyBhbnkgRE1BIHRyYW5zZmVycyBjdXJyZW50
bHkgaW4gcHJvZ3Jlc3MuCisgKiBBbnkgcXVldWVkIHNjYXR0ZXItZ2F0aGVyIERNQSB0cmFuc2Fj
dGlvbnMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzdGFydGVkCisgKiB3aWxsIHJlbWFpbiBxdWV1
ZWQuICBUaGUgRE1BIGNvbnRyb2xsZXIgd2lsbCBiZSBpZGxlIGFmdGVyIHRoaXMgcm91dGluZQor
ICogY29tcGxldGVzLiAgV2hlbiB0aGUgc2NhdHRlci1nYXRoZXIgcXVldWUgaXMgcmVzdGFydGVk
LCB0aGUgbmV4dAorICogc2NhdHRlci1nYXRoZXIgRE1BIHRyYW5zZmVyIHdpbGwgYmVnaW4gYXQg
dGhlIHN0YXJ0IG9mIGEgbmV3IHRyYW5zYWN0aW9uLgorICovCit2b2lkIG9tYXAyNHh4Y2FtX3Nn
ZG1hX3N5bmMoc3RydWN0IG9tYXAyNHh4Y2FtX3NnZG1hICpzZ2RtYSkKK3sKKwl1bnNpZ25lZCBs
b25nIGZsYWdzOworCWludCBzZ3Nsb3Q7CisJc3RydWN0IHNnZG1hX3N0YXRlICpzZ19zdGF0ZTsK
Kwl1MzIgY3NyID0gQ0FNRE1BX0NTUl9UUkFOU19FUlI7CisKKwkvKiBzdG9wIGFueSBETUEgdHJh
bnNmZXJzIGluIHByb2dyZXNzICovCisJb21hcDI0eHhjYW1fZG1hX3N0b3AoJnNnZG1hLT5kbWEs
IGNzcik7CisKKwlzcGluX2xvY2tfaXJxc2F2ZSgmc2dkbWEtPmxvY2ssIGZsYWdzKTsKKworCWlm
IChzZ2RtYS0+ZnJlZV9zZ2RtYSA8IE5VTV9TR19ETUEpIHsKKwkJc2dzbG90ID0gKHNnZG1hLT5u
ZXh0X3NnZG1hICsgc2dkbWEtPmZyZWVfc2dkbWEpICUgTlVNX1NHX0RNQTsKKwkJc2dfc3RhdGUg
PSBzZ2RtYS0+c2dfc3RhdGUgKyBzZ3Nsb3Q7CisJCWlmIChzZ19zdGF0ZS0+bmV4dF9zZ2xpc3Qg
IT0gMCkgeworCQkJLyogVGhpcyBETUEgdHJhbnNmZXIgd2FzIGluIHByb2dyZXNzLCBzbyBhYm9y
dCBpdC4gKi8KKwkJCXNnZG1hX2NhbGxiYWNrX3QgY2FsbGJhY2sgPSBzZ19zdGF0ZS0+Y2FsbGJh
Y2s7CisJCQl2b2lkICphcmcgPSBzZ19zdGF0ZS0+YXJnOworCQkJc2dkbWEtPmZyZWVfc2dkbWEr
KzsKKwkJCWlmIChjYWxsYmFjaykgeworCQkJCS8qIGxlYXZlIGludGVycnVwdHMgbWFza2VkICov
CisJCQkJc3Bpbl91bmxvY2soJnNnZG1hLT5sb2NrKTsKKwkJCQkoKmNhbGxiYWNrKSAoc2dkbWEs
IGNzciwgYXJnKTsKKwkJCQlzcGluX2xvY2soJnNnZG1hLT5sb2NrKTsKKwkJCX0KKwkJfQorCX0K
KworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJnNnZG1hLT5sb2NrLCBmbGFncyk7Cit9CisKK3Zv
aWQgb21hcDI0eHhjYW1fc2dkbWFfaW5pdChzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEgKnNnZG1h
LAorCQkJICAgIHVuc2lnbmVkIGxvbmcgYmFzZSwKKwkJCSAgICB2b2lkICgqcmVzZXRfY2FsbGJh
Y2spKHVuc2lnbmVkIGxvbmcgZGF0YSksCisJCQkgICAgdW5zaWduZWQgbG9uZyByZXNldF9jYWxs
YmFja19kYXRhKQoreworCWludCBzZzsKKworCXNwaW5fbG9ja19pbml0KCZzZ2RtYS0+bG9jayk7
CisJc2dkbWEtPmZyZWVfc2dkbWEgPSBOVU1fU0dfRE1BOworCXNnZG1hLT5uZXh0X3NnZG1hID0g
MDsKKwlmb3IgKHNnID0gMDsgc2cgPCBOVU1fU0dfRE1BOyBzZysrKSB7CisJCXNnZG1hLT5zZ19z
dGF0ZVtzZ10uc2dsZW4gPSAwOworCQlzZ2RtYS0+c2dfc3RhdGVbc2ddLm5leHRfc2dsaXN0ID0g
MDsKKwkJc2dkbWEtPnNnX3N0YXRlW3NnXS5ieXRlc19yZWFkID0gMDsKKwkJc2dkbWEtPnNnX3N0
YXRlW3NnXS5xdWV1ZWRfc2dsaXN0ID0gMDsKKwkJc2dkbWEtPnNnX3N0YXRlW3NnXS5jc3IgPSAw
OworCQlzZ2RtYS0+c2dfc3RhdGVbc2ddLmNhbGxiYWNrID0gTlVMTDsKKwkJc2dkbWEtPnNnX3N0
YXRlW3NnXS5hcmcgPSBOVUxMOworCX0KKworCW9tYXAyNHh4Y2FtX2RtYV9pbml0KCZzZ2RtYS0+
ZG1hLCBiYXNlKTsKKwlzZXR1cF90aW1lcigmc2dkbWEtPnJlc2V0X3RpbWVyLCByZXNldF9jYWxs
YmFjaywgcmVzZXRfY2FsbGJhY2tfZGF0YSk7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL21lZGlh
L3ZpZGVvL29tYXAyNHh4Y2FtLmMgYi9kcml2ZXJzL21lZGlhL3ZpZGVvL29tYXAyNHh4Y2FtLmMK
bmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uODVjM2M3YwotLS0gL2Rldi9udWxs
CisrKyBiL2RyaXZlcnMvbWVkaWEvdmlkZW8vb21hcDI0eHhjYW0uYwpAQCAtMCwwICsxLDE5MDgg
QEAKKy8qCisgKiBkcml2ZXJzL21lZGlhL3ZpZGVvL29tYXAyNHh4Y2FtLmMKKyAqCisgKiBPTUFQ
IDIgY2FtZXJhIGJsb2NrIGRyaXZlci4KKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMDQgTW9udGFW
aXN0YSBTb2Z0d2FyZSwgSW5jLgorICogQ29weXJpZ2h0IChDKSAyMDA0IFRleGFzIEluc3RydW1l
bnRzLgorICogQ29weXJpZ2h0IChDKSAyMDA3LTIwMDggTm9raWEgQ29ycG9yYXRpb24uCisgKgor
ICogQ29udGFjdDogU2FrYXJpIEFpbHVzIDxzYWthcmkuYWlsdXNAbm9raWEuY29tPgorICoKKyAq
IEJhc2VkIG9uIGNvZGUgZnJvbSBBbmR5IExvd2UgPHNvdXJjZUBtdmlzdGEuY29tPgorICoKKyAq
IFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBh
bmQvb3IKKyAqIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1
YmxpYyBMaWNlbnNlCisgKiB2ZXJzaW9uIDIgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3
YXJlIEZvdW5kYXRpb24uCisgKgorICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRo
ZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dAorICogV0lUSE9VVCBBTlkgV0FSUkFO
VFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgorICogTUVSQ0hBTlRBQklM
SVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUKKyAq
IEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKyAqCisgKiBZb3Ugc2hv
dWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5z
ZQorICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUg
U29mdHdhcmUKKyAqIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluIFN0LCBGaWZ0aCBGbG9v
ciwgQm9zdG9uLCBNQQorICogMDIxMTAtMTMwMSBVU0EKKyAqLworCisjaW5jbHVkZSA8bGludXgv
ZGVsYXkuaD4KKyNpbmNsdWRlIDxsaW51eC9rZXJuZWwuaD4KKyNpbmNsdWRlIDxsaW51eC9pbnRl
cnJ1cHQuaD4KKyNpbmNsdWRlIDxsaW51eC92aWRlb2RldjIuaD4KKyNpbmNsdWRlIDxsaW51eC9w
Y2kuaD4JCS8qIG5lZWRlZCBmb3IgdmlkZW9idWZzICovCisjaW5jbHVkZSA8bGludXgvdmVyc2lv
bi5oPgorI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4
L2Nsay5oPgorI2luY2x1ZGUgPGxpbnV4L2lvLmg+CisKKyNpbmNsdWRlIDxtZWRpYS92NGwyLWNv
bW1vbi5oPgorI2luY2x1ZGUgPG1lZGlhL3Y0bDItaW9jdGwuaD4KKworI2luY2x1ZGUgIm9tYXAy
NHh4Y2FtLmgiCisKKyNkZWZpbmUgT01BUDI0WFhDQU1fVkVSU0lPTiBLRVJORUxfVkVSU0lPTigw
LCAwLCAwKQorCisjZGVmaW5lIFJFU0VUX1RJTUVPVVRfTlMgMTAwMDAKKworc3RhdGljIHZvaWQg
b21hcDI0eHhjYW1fcmVzZXQoc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtKTsKK3N0YXRp
YyBpbnQgb21hcDI0eHhjYW1fc2Vuc29yX2lmX2VuYWJsZShzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2
aWNlICpjYW0pOworc3RhdGljIHZvaWQgb21hcDI0eHhjYW1fZGV2aWNlX3VucmVnaXN0ZXIoc3Ry
dWN0IHY0bDJfaW50X2RldmljZSAqcyk7CitzdGF0aWMgaW50IG9tYXAyNHh4Y2FtX3JlbW92ZShz
dHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KTsKKworLyogbW9kdWxlIHBhcmFtZXRlcnMgKi8K
K3N0YXRpYyBpbnQgdmlkZW9fbnIgPSAtMTsJLyogdmlkZW8gZGV2aWNlIG1pbm9yICgtMSA9PT4g
YXV0byBhc3NpZ24pICovCisvKgorICogTWF4aW11bSBhbW91bnQgb2YgbWVtb3J5IHRvIHVzZSBm
b3IgY2FwdHVyZSBidWZmZXJzLgorICogRGVmYXVsdCBpcyA0ODAwS0IsIGVub3VnaCB0byBkb3Vi
bGUtYnVmZmVyIFNYR0EuCisgKi8KK3N0YXRpYyBpbnQgY2FwdHVyZV9tZW0gPSAxMjgwICogOTYw
ICogMiAqIDI7CisKK3N0YXRpYyBzdHJ1Y3QgdjRsMl9pbnRfZGV2aWNlIG9tYXAyNHh4Y2FtOwor
CisvKgorICoKKyAqIENsb2Nrcy4KKyAqCisgKi8KKworc3RhdGljIHZvaWQgb21hcDI0eHhjYW1f
Y2xvY2tfcHV0KHN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSkKK3sKKwlpZiAoY2FtLT5p
Y2sgIT0gTlVMTCAmJiAhSVNfRVJSKGNhbS0+aWNrKSkKKwkJY2xrX3B1dChjYW0tPmljayk7CisJ
aWYgKGNhbS0+ZmNrICE9IE5VTEwgJiYgIUlTX0VSUihjYW0tPmZjaykpCisJCWNsa19wdXQoY2Ft
LT5mY2spOworCisJY2FtLT5pY2sgPSBjYW0tPmZjayA9IE5VTEw7Cit9CisKK3N0YXRpYyBpbnQg
b21hcDI0eHhjYW1fY2xvY2tfZ2V0KHN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSkKK3sK
KwlpbnQgcnZhbCA9IDA7CisKKwljYW0tPmZjayA9IGNsa19nZXQoY2FtLT5kZXYsICJjYW1fZmNr
Iik7CisJaWYgKElTX0VSUihjYW0tPmZjaykpIHsKKwkJZGV2X2VycihjYW0tPmRldiwgImNhbid0
IGdldCBjYW1fZmNrIik7CisJCXJ2YWwgPSBQVFJfRVJSKGNhbS0+ZmNrKTsKKwkJb21hcDI0eHhj
YW1fY2xvY2tfcHV0KGNhbSk7CisJCXJldHVybiBydmFsOworCX0KKworCWNhbS0+aWNrID0gY2xr
X2dldChjYW0tPmRldiwgImNhbV9pY2siKTsKKwlpZiAoSVNfRVJSKGNhbS0+aWNrKSkgeworCQlk
ZXZfZXJyKGNhbS0+ZGV2LCAiY2FuJ3QgZ2V0IGNhbV9pY2siKTsKKwkJcnZhbCA9IFBUUl9FUlIo
Y2FtLT5pY2spOworCQlvbWFwMjR4eGNhbV9jbG9ja19wdXQoY2FtKTsKKwl9CisKKwlyZXR1cm4g
cnZhbDsKK30KKworc3RhdGljIHZvaWQgb21hcDI0eHhjYW1fY2xvY2tfb24oc3RydWN0IG9tYXAy
NHh4Y2FtX2RldmljZSAqY2FtKQoreworCWNsa19lbmFibGUoY2FtLT5mY2spOworCWNsa19lbmFi
bGUoY2FtLT5pY2spOworfQorCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9jbG9ja19vZmYoc3Ry
dWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtKQoreworCWNsa19kaXNhYmxlKGNhbS0+ZmNrKTsK
KwljbGtfZGlzYWJsZShjYW0tPmljayk7Cit9CisKKy8qCisgKgorICogQ2FtZXJhIGNvcmUKKyAq
CisgKi8KKworLyoKKyAqIFNldCB4Y2xrLgorICoKKyAqIFRvIGRpc2FibGUgeGNsaywgdXNlIHZh
bHVlIHplcm8uCisgKi8KK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX2NvcmVfeGNsa19zZXQoY29u
c3Qgc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtLAorCQkJCSAgICAgIHUzMiB4Y2xrKQor
eworCWlmICh4Y2xrKSB7CisJCXUzMiBkaXZpc29yID0gQ0FNX01DTEsgLyB4Y2xrOworCisJCWlm
IChkaXZpc29yID09IDEpCisJCQlvbWFwMjR4eGNhbV9yZWdfb3V0KGNhbS0+bW1pb19iYXNlICsg
Q0NfUkVHX09GRlNFVCwKKwkJCQkJICAgIENDX0NUUkxfWENMSywKKwkJCQkJICAgIENDX0NUUkxf
WENMS19ESVZfQllQQVNTKTsKKwkJZWxzZQorCQkJb21hcDI0eHhjYW1fcmVnX291dChjYW0tPm1t
aW9fYmFzZSArIENDX1JFR19PRkZTRVQsCisJCQkJCSAgICBDQ19DVFJMX1hDTEssIGRpdmlzb3Ip
OworCX0gZWxzZQorCQlvbWFwMjR4eGNhbV9yZWdfb3V0KGNhbS0+bW1pb19iYXNlICsgQ0NfUkVH
X09GRlNFVCwKKwkJCQkgICAgQ0NfQ1RSTF9YQ0xLLCBDQ19DVFJMX1hDTEtfRElWX1NUQUJMRV9M
T1cpOworfQorCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9jb3JlX2h3aW5pdChjb25zdCBzdHJ1
Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0pCit7CisJLyoKKwkgKiBTZXR0aW5nIHRoZSBjYW1l
cmEgY29yZSBBVVRPSURMRSBiaXQgY2F1c2VzIHByb2JsZW1zIHdpdGggZnJhbWUKKwkgKiBzeW5j
aHJvbml6YXRpb24sIHNvIHdlIHdpbGwgY2xlYXIgdGhlIEFVVE9JRExFIGJpdCBpbnN0ZWFkLgor
CSAqLworCW9tYXAyNHh4Y2FtX3JlZ19vdXQoY2FtLT5tbWlvX2Jhc2UgKyBDQ19SRUdfT0ZGU0VU
LCBDQ19TWVNDT05GSUcsCisJCQkgICAgQ0NfU1lTQ09ORklHX0FVVE9JRExFKTsKKworCS8qIHBy
b2dyYW0gdGhlIGNhbWVyYSBpbnRlcmZhY2UgRE1BIHBhY2tldCBzaXplICovCisJb21hcDI0eHhj
YW1fcmVnX291dChjYW0tPm1taW9fYmFzZSArIENDX1JFR19PRkZTRVQsIENDX0NUUkxfRE1BLAor
CQkJICAgIENDX0NUUkxfRE1BX0VOIHwgKERNQV9USFJFU0hPTEQgLyA0IC0gMSkpOworCisJLyog
ZW5hYmxlIGNhbWVyYSBjb3JlIGVycm9yIGludGVycnVwdHMgKi8KKwlvbWFwMjR4eGNhbV9yZWdf
b3V0KGNhbS0+bW1pb19iYXNlICsgQ0NfUkVHX09GRlNFVCwgQ0NfSVJRRU5BQkxFLAorCQkJICAg
IENDX0lSUUVOQUJMRV9GV19FUlJfSVJRCisJCQkgICAgfCBDQ19JUlFFTkFCTEVfRlNDX0VSUl9J
UlEKKwkJCSAgICB8IENDX0lSUUVOQUJMRV9TU0NfRVJSX0lSUQorCQkJICAgIHwgQ0NfSVJRRU5B
QkxFX0ZJRk9fT0ZfSVJRKTsKK30KKworLyoKKyAqIEVuYWJsZSB0aGUgY2FtZXJhIGNvcmUuCisg
KgorICogRGF0YSB0cmFuc2ZlciB0byB0aGUgY2FtZXJhIERNQSBzdGFydHMgZnJvbSBuZXh0IHN0
YXJ0aW5nIGZyYW1lLgorICovCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9jb3JlX2VuYWJsZShj
b25zdCBzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0pCit7CisKKwlvbWFwMjR4eGNhbV9y
ZWdfb3V0KGNhbS0+bW1pb19iYXNlICsgQ0NfUkVHX09GRlNFVCwgQ0NfQ1RSTCwKKwkJCSAgICBj
YW0tPmNjX2N0cmwpOworfQorCisvKgorICogRGlzYWJsZSBjYW1lcmEgY29yZS4KKyAqCisgKiBU
aGUgZGF0YSB0cmFuc2ZlciB3aWxsIGJlIHN0b3BwZWQgaW1tZWRpYXRlbHkgKENDX0NUUkxfQ0Nf
UlNUKS4gVGhlCisgKiBjb3JlIGludGVybmFsIHN0YXRlIG1hY2hpbmVzIHdpbGwgYmUgcmVzZXQu
IFVzZQorICogQ0NfQ1RSTF9DQ19GUkFNRV9UUklHIGluc3RlYWQgaWYgeW91IHdhbnQgdG8gdHJh
bnNmZXIgdGhlIGN1cnJlbnQKKyAqIGZyYW1lIGNvbXBsZXRlbHkuCisgKi8KK3N0YXRpYyB2b2lk
IG9tYXAyNHh4Y2FtX2NvcmVfZGlzYWJsZShjb25zdCBzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNl
ICpjYW0pCit7CisJb21hcDI0eHhjYW1fcmVnX291dChjYW0tPm1taW9fYmFzZSArIENDX1JFR19P
RkZTRVQsIENDX0NUUkwsCisJCQkgICAgQ0NfQ1RSTF9DQ19SU1QpOworfQorCisvKiBJbnRlcnJ1
cHQgc2VydmljZSByb3V0aW5lIGZvciBjYW1lcmEgY29yZSBpbnRlcnJ1cHRzLiAqLworc3RhdGlj
IHZvaWQgb21hcDI0eHhjYW1fY29yZV9pc3Ioc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2Ft
KQoreworCXUzMiBjY19pcnFzdGF0dXM7CisJY29uc3QgdTMyIGNjX2lycXN0YXR1c19lcnIgPQor
CQlDQ19JUlFTVEFUVVNfRldfRVJSX0lSUQorCQl8IENDX0lSUVNUQVRVU19GU0NfRVJSX0lSUQor
CQl8IENDX0lSUVNUQVRVU19TU0NfRVJSX0lSUQorCQl8IENDX0lSUVNUQVRVU19GSUZPX1VGX0lS
UQorCQl8IENDX0lSUVNUQVRVU19GSUZPX09GX0lSUTsKKworCWNjX2lycXN0YXR1cyA9IG9tYXAy
NHh4Y2FtX3JlZ19pbihjYW0tPm1taW9fYmFzZSArIENDX1JFR19PRkZTRVQsCisJCQkJCSAgQ0Nf
SVJRU1RBVFVTKTsKKwlvbWFwMjR4eGNhbV9yZWdfb3V0KGNhbS0+bW1pb19iYXNlICsgQ0NfUkVH
X09GRlNFVCwgQ0NfSVJRU1RBVFVTLAorCQkJICAgIGNjX2lycXN0YXR1cyk7CisKKwlpZiAoY2Nf
aXJxc3RhdHVzICYgY2NfaXJxc3RhdHVzX2VycgorCSAgICAmJiAhYXRvbWljX3JlYWQoJmNhbS0+
aW5fcmVzZXQpKSB7CisJCWRldl9kYmcoY2FtLT5kZXYsICJyZXNldHRpbmcgY2FtZXJhLCBjY19p
cnFzdGF0dXMgMHgleFxuIiwKKwkJCWNjX2lycXN0YXR1cyk7CisJCW9tYXAyNHh4Y2FtX3Jlc2V0
KGNhbSk7CisJfQorfQorCisvKgorICoKKyAqIHZpZGVvYnVmX2J1ZmZlciBoYW5kbGluZy4KKyAq
CisgKiBNZW1vcnkgZm9yIG1tYXBwZWQgdmlkZW9idWZfYnVmZmVycyBpcyBub3QgYWxsb2NhdGVk
CisgKiBjb252ZW50aW9uYWxseSwgYnV0IGJ5IHNldmVyYWwga21hbGxvYyBhbGxvY2F0aW9ucyBh
bmQgdGhlbgorICogY3JlYXRpbmcgdGhlIHNjYXR0ZXJsaXN0IG9uIG91ciBvd24uIFVzZXItc3Bh
Y2UgYnVmZmVycyBhcmUgaGFuZGxlZAorICogbm9ybWFsbHkuCisgKgorICovCisKKy8qCisgKiBG
cmVlIHRoZSBtZW1vcnktbWFwcGVkIGJ1ZmZlciBtZW1vcnkgYWxsb2NhdGVkIGZvciBhCisgKiB2
aWRlb2J1Zl9idWZmZXIgYW5kIHRoZSBhc3NvY2lhdGVkIHNjYXR0ZXJsaXN0LgorICovCitzdGF0
aWMgdm9pZCBvbWFwMjR4eGNhbV92YnFfZnJlZV9tbWFwX2J1ZmZlcihzdHJ1Y3QgdmlkZW9idWZf
YnVmZmVyICp2YikKK3sKKwlzdHJ1Y3QgdmlkZW9idWZfZG1hYnVmICpkbWEgPSB2aWRlb2J1Zl90
b19kbWEodmIpOworCXNpemVfdCBhbGxvY19zaXplOworCXN0cnVjdCBwYWdlICpwYWdlOworCWlu
dCBpOworCisJaWYgKGRtYS0+c2dsaXN0ID09IE5VTEwpCisJCXJldHVybjsKKworCWkgPSBkbWEt
PnNnbGVuOworCXdoaWxlIChpKSB7CisJCWktLTsKKwkJYWxsb2Nfc2l6ZSA9IHNnX2RtYV9sZW4o
JmRtYS0+c2dsaXN0W2ldKTsKKwkJcGFnZSA9IHNnX3BhZ2UoJmRtYS0+c2dsaXN0W2ldKTsKKwkJ
ZG8geworCQkJQ2xlYXJQYWdlUmVzZXJ2ZWQocGFnZSsrKTsKKwkJfSB3aGlsZSAoYWxsb2Nfc2l6
ZSAtPSBQQUdFX1NJWkUpOworCQlfX2ZyZWVfcGFnZXMoc2dfcGFnZSgmZG1hLT5zZ2xpc3RbaV0p
LAorCQkJICAgICBnZXRfb3JkZXIoc2dfZG1hX2xlbigmZG1hLT5zZ2xpc3RbaV0pKSk7CisJfQor
CisJa2ZyZWUoZG1hLT5zZ2xpc3QpOworCWRtYS0+c2dsaXN0ID0gTlVMTDsKK30KKworLyogUmVs
ZWFzZSBhbGwgbWVtb3J5IHJlbGF0ZWQgdG8gdGhlIHZpZGVvYnVmX3F1ZXVlLiAqLworc3RhdGlj
IHZvaWQgb21hcDI0eHhjYW1fdmJxX2ZyZWVfbW1hcF9idWZmZXJzKHN0cnVjdCB2aWRlb2J1Zl9x
dWV1ZSAqdmJxKQoreworCWludCBpOworCisJbXV0ZXhfbG9jaygmdmJxLT52Yl9sb2NrKTsKKwor
CWZvciAoaSA9IDA7IGkgPCBWSURFT19NQVhfRlJBTUU7IGkrKykgeworCQlpZiAoTlVMTCA9PSB2
YnEtPmJ1ZnNbaV0pCisJCQljb250aW51ZTsKKwkJaWYgKFY0TDJfTUVNT1JZX01NQVAgIT0gdmJx
LT5idWZzW2ldLT5tZW1vcnkpCisJCQljb250aW51ZTsKKwkJdmJxLT5vcHMtPmJ1Zl9yZWxlYXNl
KHZicSwgdmJxLT5idWZzW2ldKTsKKwkJb21hcDI0eHhjYW1fdmJxX2ZyZWVfbW1hcF9idWZmZXIo
dmJxLT5idWZzW2ldKTsKKwkJa2ZyZWUodmJxLT5idWZzW2ldKTsKKwkJdmJxLT5idWZzW2ldID0g
TlVMTDsKKwl9CisKKwltdXRleF91bmxvY2soJnZicS0+dmJfbG9jayk7CisKKwl2aWRlb2J1Zl9t
bWFwX2ZyZWUodmJxKTsKK30KKworLyoKKyAqIEFsbG9jYXRlIHBoeXNpY2FsbHkgYXMgY29udGln
dW91cyBhcyBwb3NzaWJsZSBidWZmZXIgZm9yIHZpZGVvCisgKiBmcmFtZSBhbmQgYWxsb2NhdGUg
YW5kIGJ1aWxkIERNQSBzY2F0dGVyLWdhdGhlciBsaXN0IGZvciBpdC4KKyAqLworc3RhdGljIGlu
dCBvbWFwMjR4eGNhbV92YnFfYWxsb2NfbW1hcF9idWZmZXIoc3RydWN0IHZpZGVvYnVmX2J1ZmZl
ciAqdmIpCit7CisJdW5zaWduZWQgaW50IG9yZGVyOworCXNpemVfdCBhbGxvY19zaXplLCBzaXpl
ID0gdmItPmJzaXplOyAvKiB2Yi0+YnNpemUgaXMgcGFnZSBhbGlnbmVkICovCisJc3RydWN0IHBh
Z2UgKnBhZ2U7CisJaW50IG1heF9wYWdlcywgZXJyID0gMCwgaSA9IDA7CisJc3RydWN0IHZpZGVv
YnVmX2RtYWJ1ZiAqZG1hID0gdmlkZW9idWZfdG9fZG1hKHZiKTsKKworCS8qCisJICogYWxsb2Nh
dGUgbWF4aW11bSBzaXplIHNjYXR0ZXItZ2F0aGVyIGxpc3QuIE5vdGUgdGhpcyBpcworCSAqIG92
ZXJoZWFkLiBXZSBtYXkgbm90IHVzZSBhcyBtYW55IGVudHJpZXMgYXMgd2UgYWxsb2NhdGUKKwkg
Ki8KKwltYXhfcGFnZXMgPSB2Yi0+YnNpemUgPj4gUEFHRV9TSElGVDsKKwlkbWEtPnNnbGlzdCA9
IGtjYWxsb2MobWF4X3BhZ2VzLCBzaXplb2YoKmRtYS0+c2dsaXN0KSwgR0ZQX0tFUk5FTCk7CisJ
aWYgKGRtYS0+c2dsaXN0ID09IE5VTEwpIHsKKwkJZXJyID0gLUVOT01FTTsKKwkJZ290byBvdXQ7
CisJfQorCisJd2hpbGUgKHNpemUpIHsKKwkJb3JkZXIgPSBnZXRfb3JkZXIoc2l6ZSk7CisJCS8q
CisJCSAqIGRvIG5vdCBvdmVyLWFsbG9jYXRlIGV2ZW4gaWYgd2Ugd291bGQgZ2V0IGxhcmdlcgor
CQkgKiBjb250aWd1b3VzIGNodW5rIHRoYXQgd2F5CisJCSAqLworCQlpZiAoKFBBR0VfU0laRSA8
PCBvcmRlcikgPiBzaXplKQorCQkJb3JkZXItLTsKKworCQkvKiB0cnkgdG8gYWxsb2NhdGUgYXMg
bWFueSBjb250aWd1b3VzIHBhZ2VzIGFzIHBvc3NpYmxlICovCisJCXBhZ2UgPSBhbGxvY19wYWdl
cyhHRlBfS0VSTkVMIHwgR0ZQX0RNQSwgb3JkZXIpOworCQkvKiBpZiBhbGxvY2F0aW9uIGZhaWxz
LCB0cnkgdG8gYWxsb2NhdGUgc21hbGxlciBhbW91bnQgKi8KKwkJd2hpbGUgKHBhZ2UgPT0gTlVM
TCkgeworCQkJb3JkZXItLTsKKwkJCXBhZ2UgPSBhbGxvY19wYWdlcyhHRlBfS0VSTkVMIHwgR0ZQ
X0RNQSwgb3JkZXIpOworCQkJaWYgKHBhZ2UgPT0gTlVMTCAmJiAhb3JkZXIpIHsKKwkJCQllcnIg
PSAtRU5PTUVNOworCQkJCWdvdG8gb3V0OworCQkJfQorCQl9CisJCXNpemUgLT0gKFBBR0VfU0la
RSA8PCBvcmRlcik7CisKKwkJLyogYXBwZW5kIGFsbG9jYXRlZCBjaHVuayBvZiBwYWdlcyBpbnRv
IHNjYXR0ZXItZ2F0aGVyIGxpc3QgKi8KKwkJc2dfc2V0X3BhZ2UoJmRtYS0+c2dsaXN0W2ldLCBw
YWdlLCBQQUdFX1NJWkUgPDwgb3JkZXIsIDApOworCQlkbWEtPnNnbGVuKys7CisJCWkrKzsKKwor
CQlhbGxvY19zaXplID0gKFBBR0VfU0laRSA8PCBvcmRlcik7CisKKwkJLyogY2xlYXIgcGFnZXMg
YmVmb3JlIGdpdmluZyB0aGVtIHRvIHVzZXIgc3BhY2UgKi8KKwkJbWVtc2V0KHBhZ2VfYWRkcmVz
cyhwYWdlKSwgMCwgYWxsb2Nfc2l6ZSk7CisKKwkJLyogbWFyayBhbGxvY2F0ZWQgcGFnZXMgcmVz
ZXJ2ZWQgKi8KKwkJZG8geworCQkJU2V0UGFnZVJlc2VydmVkKHBhZ2UrKyk7CisJCX0gd2hpbGUg
KGFsbG9jX3NpemUgLT0gUEFHRV9TSVpFKTsKKwl9CisJLyoKKwkgKiBSRVZJU0lUOiBub3QgZnVs
bHkgY29ycmVjdCB0byBhc3NpZ24gbnJfcGFnZXMgPT0gc2dsZW4gYnV0CisJICogdmlkZW8tYnVm
IGlzIHBhc3NpbmcgbnJfcGFnZXMgZm9yIGUuZy4gdW5tYXBfc2cgY2FsbHMKKwkgKi8KKwlkbWEt
Pm5yX3BhZ2VzID0gZG1hLT5zZ2xlbjsKKwlkbWEtPmRpcmVjdGlvbiA9IFBDSV9ETUFfRlJPTURF
VklDRTsKKworCXJldHVybiAwOworCitvdXQ6CisJb21hcDI0eHhjYW1fdmJxX2ZyZWVfbW1hcF9i
dWZmZXIodmIpOworCXJldHVybiBlcnI7Cit9CisKK3N0YXRpYyBpbnQgb21hcDI0eHhjYW1fdmJx
X2FsbG9jX21tYXBfYnVmZmVycyhzdHJ1Y3QgdmlkZW9idWZfcXVldWUgKnZicSwKKwkJCQkJICAg
ICAgdW5zaWduZWQgaW50IGNvdW50KQoreworCWludCBpLCBlcnIgPSAwOworCXN0cnVjdCBvbWFw
MjR4eGNhbV9maCAqZmggPQorCQljb250YWluZXJfb2YodmJxLCBzdHJ1Y3Qgb21hcDI0eHhjYW1f
ZmgsIHZicSk7CisKKwltdXRleF9sb2NrKCZ2YnEtPnZiX2xvY2spOworCisJZm9yIChpID0gMDsg
aSA8IGNvdW50OyBpKyspIHsKKwkJZXJyID0gb21hcDI0eHhjYW1fdmJxX2FsbG9jX21tYXBfYnVm
ZmVyKHZicS0+YnVmc1tpXSk7CisJCWlmIChlcnIpCisJCQlnb3RvIG91dDsKKwkJZGV2X2RiZyhm
aC0+Y2FtLT5kZXYsICJzZ2xlbiBpcyAlZCBmb3IgYnVmZmVyICVkXG4iLAorCQkJdmlkZW9idWZf
dG9fZG1hKHZicS0+YnVmc1tpXSktPnNnbGVuLCBpKTsKKwl9CisKKwltdXRleF91bmxvY2soJnZi
cS0+dmJfbG9jayk7CisKKwlyZXR1cm4gMDsKK291dDoKKwl3aGlsZSAoaSkgeworCQlpLS07CisJ
CW9tYXAyNHh4Y2FtX3ZicV9mcmVlX21tYXBfYnVmZmVyKHZicS0+YnVmc1tpXSk7CisJfQorCisJ
bXV0ZXhfdW5sb2NrKCZ2YnEtPnZiX2xvY2spOworCisJcmV0dXJuIGVycjsKK30KKworLyoKKyAq
IFRoaXMgcm91dGluZSBpcyBjYWxsZWQgZnJvbSBpbnRlcnJ1cHQgY29udGV4dCB3aGVuIGEgc2Nh
dHRlci1nYXRoZXIgRE1BCisgKiB0cmFuc2ZlciBvZiBhIHZpZGVvYnVmX2J1ZmZlciBjb21wbGV0
ZXMuCisgKi8KK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX3ZicV9jb21wbGV0ZShzdHJ1Y3Qgb21h
cDI0eHhjYW1fc2dkbWEgKnNnZG1hLAorCQkJCSAgICAgdTMyIGNzciwgdm9pZCAqYXJnKQorewor
CXN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSA9CisJCWNvbnRhaW5lcl9vZihzZ2RtYSwg
c3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSwgc2dkbWEpOworCXN0cnVjdCBvbWFwMjR4eGNhbV9m
aCAqZmggPSBjYW0tPnN0cmVhbWluZy0+cHJpdmF0ZV9kYXRhOworCXN0cnVjdCB2aWRlb2J1Zl9i
dWZmZXIgKnZiID0gKHN0cnVjdCB2aWRlb2J1Zl9idWZmZXIgKilhcmc7CisJY29uc3QgdTMyIGNz
cl9lcnJvciA9IENBTURNQV9DU1JfTUlTQUxJR05FRF9FUlIKKwkJfCBDQU1ETUFfQ1NSX1NVUEVS
VklTT1JfRVJSIHwgQ0FNRE1BX0NTUl9TRUNVUkVfRVJSCisJCXwgQ0FNRE1BX0NTUl9UUkFOU19F
UlIgfCBDQU1ETUFfQ1NSX0RST1A7CisJdW5zaWduZWQgbG9uZyBmbGFnczsKKworCXNwaW5fbG9j
a19pcnFzYXZlKCZjYW0tPmNvcmVfZW5hYmxlX2Rpc2FibGVfbG9jaywgZmxhZ3MpOworCWlmICgt
LWNhbS0+c2dkbWFfaW5fcXVldWUgPT0gMCkKKwkJb21hcDI0eHhjYW1fY29yZV9kaXNhYmxlKGNh
bSk7CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmY2FtLT5jb3JlX2VuYWJsZV9kaXNhYmxlX2xv
Y2ssIGZsYWdzKTsKKworCWRvX2dldHRpbWVvZmRheSgmdmItPnRzKTsKKwl2Yi0+ZmllbGRfY291
bnQgPSBhdG9taWNfYWRkX3JldHVybigyLCAmZmgtPmZpZWxkX2NvdW50KTsKKwlpZiAoY3NyICYg
Y3NyX2Vycm9yKSB7CisJCXZiLT5zdGF0ZSA9IFZJREVPQlVGX0VSUk9SOworCQlpZiAoIWF0b21p
Y19yZWFkKCZmaC0+Y2FtLT5pbl9yZXNldCkpIHsKKwkJCWRldl9kYmcoY2FtLT5kZXYsICJyZXNl
dHRpbmcgY2FtZXJhLCBjc3IgMHgleFxuIiwgY3NyKTsKKwkJCW9tYXAyNHh4Y2FtX3Jlc2V0KGNh
bSk7CisJCX0KKwl9IGVsc2UKKwkJdmItPnN0YXRlID0gVklERU9CVUZfRE9ORTsKKwl3YWtlX3Vw
KCZ2Yi0+ZG9uZSk7Cit9CisKK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX3ZicV9yZWxlYXNlKHN0
cnVjdCB2aWRlb2J1Zl9xdWV1ZSAqdmJxLAorCQkJCSAgICBzdHJ1Y3QgdmlkZW9idWZfYnVmZmVy
ICp2YikKK3sKKwlzdHJ1Y3QgdmlkZW9idWZfZG1hYnVmICpkbWEgPSB2aWRlb2J1Zl90b19kbWEo
dmIpOworCisJLyogd2FpdCBmb3IgYnVmZmVyLCBlc3BlY2lhbGx5IHRvIGdldCBvdXQgb2YgdGhl
IHNnZG1hIHF1ZXVlICovCisJdmlkZW9idWZfd2FpdG9uKHZiLCAwLCAwKTsKKwlpZiAodmItPm1l
bW9yeSA9PSBWNEwyX01FTU9SWV9NTUFQKSB7CisJCWRtYV91bm1hcF9zZyh2YnEtPmRldiwgZG1h
LT5zZ2xpc3QsIGRtYS0+c2dsZW4sCisJCQkgICAgIGRtYS0+ZGlyZWN0aW9uKTsKKwkJZG1hLT5k
aXJlY3Rpb24gPSBETUFfTk9ORTsKKwl9IGVsc2UgeworCQl2aWRlb2J1Zl9kbWFfdW5tYXAodmJx
LCB2aWRlb2J1Zl90b19kbWEodmIpKTsKKwkJdmlkZW9idWZfZG1hX2ZyZWUodmlkZW9idWZfdG9f
ZG1hKHZiKSk7CisJfQorCisJdmItPnN0YXRlID0gVklERU9CVUZfTkVFRFNfSU5JVDsKK30KKwor
LyoKKyAqIExpbWl0IHRoZSBudW1iZXIgb2YgYXZhaWxhYmxlIGtlcm5lbCBpbWFnZSBjYXB0dXJl
IGJ1ZmZlcnMgYmFzZWQgb24gdGhlCisgKiBudW1iZXIgcmVxdWVzdGVkLCB0aGUgY3VycmVudGx5
IHNlbGVjdGVkIGltYWdlIHNpemUsIGFuZCB0aGUgbWF4aW11bQorICogYW1vdW50IG9mIG1lbW9y
eSBwZXJtaXR0ZWQgZm9yIGtlcm5lbCBjYXB0dXJlIGJ1ZmZlcnMuCisgKi8KK3N0YXRpYyBpbnQg
b21hcDI0eHhjYW1fdmJxX3NldHVwKHN0cnVjdCB2aWRlb2J1Zl9xdWV1ZSAqdmJxLCB1bnNpZ25l
ZCBpbnQgKmNudCwKKwkJCQkgdW5zaWduZWQgaW50ICpzaXplKQoreworCXN0cnVjdCBvbWFwMjR4
eGNhbV9maCAqZmggPSB2YnEtPnByaXZfZGF0YTsKKworCWlmICgqY250IDw9IDApCisJCSpjbnQg
PSBWSURFT19NQVhfRlJBTUU7CS8qIHN1cHBseSBhIGRlZmF1bHQgbnVtYmVyIG9mIGJ1ZmZlcnMg
Ki8KKworCWlmICgqY250ID4gVklERU9fTUFYX0ZSQU1FKQorCQkqY250ID0gVklERU9fTUFYX0ZS
QU1FOworCisJKnNpemUgPSBmaC0+cGl4LnNpemVpbWFnZTsKKworCS8qIGFjY2Vzc2luZyBmaC0+
Y2FtLT5jYXB0dXJlX21lbSBpcyBvaywgaXQncyBjb25zdGFudCAqLworCXdoaWxlICgqc2l6ZSAq
ICpjbnQgPiBmaC0+Y2FtLT5jYXB0dXJlX21lbSkKKwkJKCpjbnQpLS07CisKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIGludCBvbWFwMjR4eGNhbV9kbWFfaW9sb2NrKHN0cnVjdCB2aWRlb2J1Zl9x
dWV1ZSAqdmJxLAorCQkJCSAgc3RydWN0IHZpZGVvYnVmX2RtYWJ1ZiAqZG1hKQoreworCWludCBl
cnIgPSAwOworCisJZG1hLT5kaXJlY3Rpb24gPSBQQ0lfRE1BX0ZST01ERVZJQ0U7CisJaWYgKCFk
bWFfbWFwX3NnKHZicS0+ZGV2LCBkbWEtPnNnbGlzdCwgZG1hLT5zZ2xlbiwgZG1hLT5kaXJlY3Rp
b24pKSB7CisJCWtmcmVlKGRtYS0+c2dsaXN0KTsKKwkJZG1hLT5zZ2xpc3QgPSBOVUxMOworCQlk
bWEtPnNnbGVuID0gMDsKKwkJZXJyID0gLUVJTzsKKwl9CisKKwlyZXR1cm4gZXJyOworfQorCitz
dGF0aWMgaW50IG9tYXAyNHh4Y2FtX3ZicV9wcmVwYXJlKHN0cnVjdCB2aWRlb2J1Zl9xdWV1ZSAq
dmJxLAorCQkJCSAgIHN0cnVjdCB2aWRlb2J1Zl9idWZmZXIgKnZiLAorCQkJCSAgIGVudW0gdjRs
Ml9maWVsZCBmaWVsZCkKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZmggKmZoID0gdmJxLT5wcml2
X2RhdGE7CisJaW50IGVyciA9IDA7CisKKwkvKgorCSAqIEFjY2Vzc2luZyBwaXggaGVyZSBpcyBv
a2F5IHNpbmNlIGl0J3MgY29uc3RhbnQgd2hpbGUKKwkgKiBzdHJlYW1pbmcgaXMgb24gKGFuZCB3
ZSBvbmx5IGdldCBjYWxsZWQgdGhlbikuCisJICovCisJaWYgKHZiLT5iYWRkcikgeworCQkvKiBU
aGlzIGlzIGEgdXNlcnNwYWNlIGJ1ZmZlci4gKi8KKwkJaWYgKGZoLT5waXguc2l6ZWltYWdlID4g
dmItPmJzaXplKSB7CisJCQkvKiBUaGUgYnVmZmVyIGlzbid0IGJpZyBlbm91Z2guICovCisJCQll
cnIgPSAtRUlOVkFMOworCQl9IGVsc2UKKwkJCXZiLT5zaXplID0gZmgtPnBpeC5zaXplaW1hZ2U7
CisJfSBlbHNlIHsKKwkJaWYgKHZiLT5zdGF0ZSAhPSBWSURFT0JVRl9ORUVEU19JTklUKSB7CisJ
CQkvKgorCQkJICogV2UgaGF2ZSBhIGtlcm5lbCBib3VuY2UgYnVmZmVyIHRoYXQgaGFzCisJCQkg
KiBhbHJlYWR5IGJlZW4gYWxsb2NhdGVkLgorCQkJICovCisJCQlpZiAoZmgtPnBpeC5zaXplaW1h
Z2UgPiB2Yi0+c2l6ZSkgeworCQkJCS8qCisJCQkJICogVGhlIGltYWdlIHNpemUgaGFzIGJlZW4g
Y2hhbmdlZCB0bworCQkJCSAqIGEgbGFyZ2VyIHNpemUgc2luY2UgdGhpcyBidWZmZXIgd2FzCisJ
CQkJICogYWxsb2NhdGVkLCBzbyB3ZSBuZWVkIHRvIGZyZWUgYW5kCisJCQkJICogcmVhbGxvY2F0
ZSBpdC4KKwkJCQkgKi8KKwkJCQlvbWFwMjR4eGNhbV92YnFfcmVsZWFzZSh2YnEsIHZiKTsKKwkJ
CQl2Yi0+c2l6ZSA9IGZoLT5waXguc2l6ZWltYWdlOworCQkJfQorCQl9IGVsc2UgeworCQkJLyog
V2UgbmVlZCB0byBhbGxvY2F0ZSBhIG5ldyBrZXJuZWwgYm91bmNlIGJ1ZmZlci4gKi8KKwkJCXZi
LT5zaXplID0gZmgtPnBpeC5zaXplaW1hZ2U7CisJCX0KKwl9CisKKwlpZiAoZXJyKQorCQlyZXR1
cm4gZXJyOworCisJdmItPndpZHRoID0gZmgtPnBpeC53aWR0aDsKKwl2Yi0+aGVpZ2h0ID0gZmgt
PnBpeC5oZWlnaHQ7CisJdmItPmZpZWxkID0gZmllbGQ7CisKKwlpZiAodmItPnN0YXRlID09IFZJ
REVPQlVGX05FRURTX0lOSVQpIHsKKwkJaWYgKHZiLT5tZW1vcnkgPT0gVjRMMl9NRU1PUllfTU1B
UCkKKwkJCS8qCisJCQkgKiB3ZSBoYXZlIGJ1aWx0IHRoZSBzY2F0dGVyLWdhdGhlciBsaXN0IGJ5
IG91cnNlbGYgc28KKwkJCSAqIGRvIHRoZSBzY2F0dGVyLWdhdGhlciBtYXBwaW5nIGFzIHdlbGwK
KwkJCSAqLworCQkJZXJyID0gb21hcDI0eHhjYW1fZG1hX2lvbG9jayh2YnEsIHZpZGVvYnVmX3Rv
X2RtYSh2YikpOworCQllbHNlCisJCQllcnIgPSB2aWRlb2J1Zl9pb2xvY2sodmJxLCB2YiwgTlVM
TCk7CisJfQorCisJaWYgKCFlcnIpCisJCXZiLT5zdGF0ZSA9IFZJREVPQlVGX1BSRVBBUkVEOwor
CWVsc2UKKwkJb21hcDI0eHhjYW1fdmJxX3JlbGVhc2UodmJxLCB2Yik7CisKKwlyZXR1cm4gZXJy
OworfQorCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV92YnFfcXVldWUoc3RydWN0IHZpZGVvYnVm
X3F1ZXVlICp2YnEsCisJCQkJICBzdHJ1Y3QgdmlkZW9idWZfYnVmZmVyICp2YikKK3sKKwlzdHJ1
Y3Qgb21hcDI0eHhjYW1fZmggKmZoID0gdmJxLT5wcml2X2RhdGE7CisJc3RydWN0IG9tYXAyNHh4
Y2FtX2RldmljZSAqY2FtID0gZmgtPmNhbTsKKwllbnVtIHZpZGVvYnVmX3N0YXRlIHN0YXRlID0g
dmItPnN0YXRlOworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CisJaW50IGVycjsKKworCS8qCisJICog
RklYTUU6IFdlJ3JlIG1hcmtpbmcgdGhlIGJ1ZmZlciBhY3RpdmUgc2luY2Ugd2UgaGF2ZSBubwor
CSAqIHByZXR0eSB3YXkgb2YgbWFya2luZyBpdCBhY3RpdmUgZXhhY3RseSB3aGVuIHRoZQorCSAq
IHNjYXR0ZXItZ2F0aGVyIHRyYW5zZmVyIHN0YXJ0cy4KKwkgKi8KKwl2Yi0+c3RhdGUgPSBWSURF
T0JVRl9BQ1RJVkU7CisKKwllcnIgPSBvbWFwMjR4eGNhbV9zZ2RtYV9xdWV1ZSgmZmgtPmNhbS0+
c2dkbWEsCisJCQkJICAgICAgdmlkZW9idWZfdG9fZG1hKHZiKS0+c2dsaXN0LAorCQkJCSAgICAg
IHZpZGVvYnVmX3RvX2RtYSh2YiktPnNnbGVuLCB2Yi0+c2l6ZSwKKwkJCQkgICAgICBvbWFwMjR4
eGNhbV92YnFfY29tcGxldGUsIHZiKTsKKworCWlmICghZXJyKSB7CisJCXNwaW5fbG9ja19pcnFz
YXZlKCZjYW0tPmNvcmVfZW5hYmxlX2Rpc2FibGVfbG9jaywgZmxhZ3MpOworCQlpZiAoKytjYW0t
PnNnZG1hX2luX3F1ZXVlID09IDEKKwkJICAgICYmICFhdG9taWNfcmVhZCgmY2FtLT5pbl9yZXNl
dCkpCisJCQlvbWFwMjR4eGNhbV9jb3JlX2VuYWJsZShjYW0pOworCQlzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZjYW0tPmNvcmVfZW5hYmxlX2Rpc2FibGVfbG9jaywgZmxhZ3MpOworCX0gZWxzZSB7
CisJCS8qCisJCSAqIE9vcHMuIFdlJ3JlIG5vdCBzdXBwb3NlZCB0byBnZXQgYW55IGVycm9ycyBo
ZXJlLgorCQkgKiBUaGUgb25seSB3YXkgd2UgY291bGQgZ2V0IGFuIGVycm9yIGlzIGlmIHdlIHJh
biBvdXQKKwkJICogb2Ygc2NhdHRlci1nYXRoZXIgRE1BIHNsb3RzLCBidXQgd2UgYXJlIHN1cHBv
c2VkIHRvCisJCSAqIGhhdmUgYXQgbGVhc3QgYXMgbWFueSBzY2F0dGVyLWdhdGhlciBETUEgc2xv
dHMgYXMKKwkJICogdmlkZW8gYnVmZmVycyBzbyB0aGF0IGNhbid0IGhhcHBlbi4KKwkJICovCisJ
CWRldl9lcnIoY2FtLT5kZXYsICJmYWlsZWQgdG8gcXVldWUgYSB2aWRlbyBidWZmZXIgZm9yIGRt
YSFcbiIpOworCQlkZXZfZXJyKGNhbS0+ZGV2LCAibGlrZWx5IGEgYnVnIGluIHRoZSBkcml2ZXIh
XG4iKTsKKwkJdmItPnN0YXRlID0gc3RhdGU7CisJfQorfQorCitzdGF0aWMgc3RydWN0IHZpZGVv
YnVmX3F1ZXVlX29wcyBvbWFwMjR4eGNhbV92YnFfb3BzID0geworCS5idWZfc2V0dXAgICA9IG9t
YXAyNHh4Y2FtX3ZicV9zZXR1cCwKKwkuYnVmX3ByZXBhcmUgPSBvbWFwMjR4eGNhbV92YnFfcHJl
cGFyZSwKKwkuYnVmX3F1ZXVlICAgPSBvbWFwMjR4eGNhbV92YnFfcXVldWUsCisJLmJ1Zl9yZWxl
YXNlID0gb21hcDI0eHhjYW1fdmJxX3JlbGVhc2UsCit9OworCisvKgorICoKKyAqIE9NQVAgbWFp
biBjYW1lcmEgc3lzdGVtCisgKgorICovCisKKy8qCisgKiBSZXNldCBjYW1lcmEgYmxvY2sgdG8g
cG93ZXItb24gc3RhdGUuCisgKi8KK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX3Bvd2Vyb25fcmVz
ZXQoc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtKQoreworCWludCBtYXhfbG9vcCA9IFJF
U0VUX1RJTUVPVVRfTlM7CisKKwkvKiBSZXNldCB3aG9sZSBjYW1lcmEgc3Vic3lzdGVtICovCisJ
b21hcDI0eHhjYW1fcmVnX291dChjYW0tPm1taW9fYmFzZSwKKwkJCSAgICBDQU1fU1lTQ09ORklH
LAorCQkJICAgIENBTV9TWVNDT05GSUdfU09GVFJFU0VUKTsKKworCS8qIFdhaXQgdGlsbCBpdCdz
IGZpbmlzaGVkICovCisJd2hpbGUgKCEob21hcDI0eHhjYW1fcmVnX2luKGNhbS0+bW1pb19iYXNl
LCBDQU1fU1lTU1RBVFVTKQorCQkgJiBDQU1fU1lTU1RBVFVTX1JFU0VURE9ORSkKKwkgICAgICAg
JiYgLS1tYXhfbG9vcCkgeworCQluZGVsYXkoMSk7CisJfQorCisJaWYgKCEob21hcDI0eHhjYW1f
cmVnX2luKGNhbS0+bW1pb19iYXNlLCBDQU1fU1lTU1RBVFVTKQorCSAgICAgICYgQ0FNX1NZU1NU
QVRVU19SRVNFVERPTkUpKQorCQlkZXZfZXJyKGNhbS0+ZGV2LCAiY2FtZXJhIHNvZnQgcmVzZXQg
dGltZW91dFxuIik7Cit9CisKKy8qCisgKiAoUmUpaW5pdGlhbGlzZSB0aGUgY2FtZXJhIGJsb2Nr
LgorICovCitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9od2luaXQoc3RydWN0IG9tYXAyNHh4Y2Ft
X2RldmljZSAqY2FtKQoreworCW9tYXAyNHh4Y2FtX3Bvd2Vyb25fcmVzZXQoY2FtKTsKKworCS8q
IHNldCB0aGUgY2FtZXJhIHN1YnN5c3RlbSBhdXRvaWRsZSBiaXQgKi8KKwlvbWFwMjR4eGNhbV9y
ZWdfb3V0KGNhbS0+bW1pb19iYXNlLCBDQU1fU1lTQ09ORklHLAorCQkJICAgIENBTV9TWVNDT05G
SUdfQVVUT0lETEUpOworCisJLyogc2V0IHRoZSBjYW1lcmEgTU1VIGF1dG9pZGxlIGJpdCAqLwor
CW9tYXAyNHh4Y2FtX3JlZ19vdXQoY2FtLT5tbWlvX2Jhc2UsCisJCQkgICAgQ0FNTU1VX1JFR19P
RkZTRVQgKyBDQU1NTVVfU1lTQ09ORklHLAorCQkJICAgIENBTU1NVV9TWVNDT05GSUdfQVVUT0lE
TEUpOworCisJb21hcDI0eHhjYW1fY29yZV9od2luaXQoY2FtKTsKKworCW9tYXAyNHh4Y2FtX2Rt
YV9od2luaXQoJmNhbS0+c2dkbWEuZG1hKTsKK30KKworLyoKKyAqIENhbGxiYWNrIGZvciBkbWEg
dHJhbnNmZXIgc3RhbGxpbmcuCisgKi8KK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX3N0YWxsZWRf
ZG1hX3Jlc2V0KHVuc2lnbmVkIGxvbmcgZGF0YSkKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2
aWNlICpjYW0gPSAoc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqKWRhdGE7CisKKwlpZiAoIWF0
b21pY19yZWFkKCZjYW0tPmluX3Jlc2V0KSkgeworCQlkZXZfZGJnKGNhbS0+ZGV2LCAiZG1hIHN0
YWxsZWQsIHJlc2V0dGluZyBjYW1lcmFcbiIpOworCQlvbWFwMjR4eGNhbV9yZXNldChjYW0pOwor
CX0KK30KKworLyoKKyAqIFN0b3AgY2FwdHVyZS4gTWFyayB3ZSdyZSBkb2luZyBhIHJlc2V0LCBz
dG9wIERNQSB0cmFuc2ZlcnMgYW5kCisgKiBjb3JlLiAoTm8gbmV3IHNjYXR0ZXItZ2F0aGVyIHRy
YW5zZmVycyB3aWxsIGJlIHF1ZXVlZCB3aGlsc3QKKyAqIGluX3Jlc2V0IGlzIG5vbi16ZXJvLikK
KyAqCisgKiBJZiBvbWFwMjR4eGNhbV9jYXB0dXJlX3N0b3AgaXMgY2FsbGVkIGZyb20gc2V2ZXJh
bCBwbGFjZXMgYXQKKyAqIG9uY2UsIG9ubHkgdGhlIGZpcnN0IGNhbGwgd2lsbCBoYXZlIGFuIGVm
ZmVjdC4gU2ltaWxhcmx5LCB0aGUgbGFzdAorICogY2FsbCBvbWFwMjR4eGNhbV9zdHJlYW1pbmdf
Y29udCB3aWxsIGhhdmUgZWZmZWN0LgorICoKKyAqIFNlcmlhbGlzYXRpb24gaXMgZW5zdXJlZCBi
eSB1c2luZyBjYW0tPmNvcmVfZW5hYmxlX2Rpc2FibGVfbG9jay4KKyAqLworc3RhdGljIHZvaWQg
b21hcDI0eHhjYW1fY2FwdHVyZV9zdG9wKHN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSkK
K3sKKwl1bnNpZ25lZCBsb25nIGZsYWdzOworCisJc3Bpbl9sb2NrX2lycXNhdmUoJmNhbS0+Y29y
ZV9lbmFibGVfZGlzYWJsZV9sb2NrLCBmbGFncyk7CisKKwlpZiAoYXRvbWljX2luY19yZXR1cm4o
JmNhbS0+aW5fcmVzZXQpICE9IDEpIHsKKwkJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmY2FtLT5j
b3JlX2VuYWJsZV9kaXNhYmxlX2xvY2ssIGZsYWdzKTsKKwkJcmV0dXJuOworCX0KKworCW9tYXAy
NHh4Y2FtX2NvcmVfZGlzYWJsZShjYW0pOworCisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmY2Ft
LT5jb3JlX2VuYWJsZV9kaXNhYmxlX2xvY2ssIGZsYWdzKTsKKworCW9tYXAyNHh4Y2FtX3NnZG1h
X3N5bmMoJmNhbS0+c2dkbWEpOworfQorCisvKgorICogUmVzZXQgYW5kIGNvbnRpbnVlIHN0cmVh
bWluZy4KKyAqCisgKiBOb3RlOiBSZXNldHRpbmcgdGhlIGNhbWVyYSBGSUZPIHZpYSB0aGUgQ0Nf
UlNUIGJpdCBpbiB0aGUgQ0NfQ1RSTAorICogcmVnaXN0ZXIgaXMgc3VwcG9zZWQgdG8gYmUgc3Vm
ZmljaWVudCB0byByZWNvdmVyIGZyb20gYSBjYW1lcmEKKyAqIGludGVyZmFjZSBlcnJvciwgYnV0
IGl0IGRvZXNuJ3Qgc2VlbSB0byBiZSBlbm91Z2guIElmIHdlIG9ubHkgZG8KKyAqIHRoYXQgdGhl
biBzdWJzZXF1ZW50IGltYWdlIGNhcHR1cmVzIGFyZSBvdXQgb2Ygc3luYyBieSBlaXRoZXIgb25l
CisgKiBvciB0d28gdGltZXMgRE1BX1RIUkVTSE9MRCBieXRlcy4gUmVzZXR0aW5nIGFuZCByZS1p
bml0aWFsaXppbmcgdGhlCisgKiBlbnRpcmUgY2FtZXJhIHN1YnN5c3RlbSBwcmV2ZW50cyB0aGUg
cHJvYmxlbSB3aXRoIGZyYW1lCisgKiBzeW5jaHJvbml6YXRpb24uCisgKi8KK3N0YXRpYyB2b2lk
IG9tYXAyNHh4Y2FtX2NhcHR1cmVfY29udChzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0p
Cit7CisJdW5zaWduZWQgbG9uZyBmbGFnczsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZjYW0tPmNv
cmVfZW5hYmxlX2Rpc2FibGVfbG9jaywgZmxhZ3MpOworCisJaWYgKGF0b21pY19yZWFkKCZjYW0t
PmluX3Jlc2V0KSAhPSAxKQorCQlnb3RvIG91dDsKKworCW9tYXAyNHh4Y2FtX2h3aW5pdChjYW0p
OworCisJb21hcDI0eHhjYW1fc2Vuc29yX2lmX2VuYWJsZShjYW0pOworCisJb21hcDI0eHhjYW1f
c2dkbWFfcHJvY2VzcygmY2FtLT5zZ2RtYSk7CisKKwlpZiAoY2FtLT5zZ2RtYV9pbl9xdWV1ZSkK
KwkJb21hcDI0eHhjYW1fY29yZV9lbmFibGUoY2FtKTsKKworb3V0OgorCWF0b21pY19kZWMoJmNh
bS0+aW5fcmVzZXQpOworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmNhbS0+Y29yZV9lbmFibGVf
ZGlzYWJsZV9sb2NrLCBmbGFncyk7Cit9CisKK3N0YXRpYyBzc2l6ZV90CitvbWFwMjR4eGNhbV9z
dHJlYW1pbmdfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRl
ICphdHRyLAorCQljaGFyICpidWYpCit7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2Ft
ID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisKKwlyZXR1cm4gc3ByaW50ZihidWYsICIlc1xuIiwg
Y2FtLT5zdHJlYW1pbmcgPyAgImFjdGl2ZSIgOiAiaW5hY3RpdmUiKTsKK30KK3N0YXRpYyBERVZJ
Q0VfQVRUUihzdHJlYW1pbmcsIFNfSVJVR08sIG9tYXAyNHh4Y2FtX3N0cmVhbWluZ19zaG93LCBO
VUxMKTsKKworLyoKKyAqIFN0b3AgY2FwdHVyZSBhbmQgcmVzdGFydCBpdC4gSS5lLiByZXNldCB0
aGUgY2FtZXJhIGR1cmluZyB1c2UuCisgKi8KK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX3Jlc2V0
KHN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSkKK3sKKwlvbWFwMjR4eGNhbV9jYXB0dXJl
X3N0b3AoY2FtKTsKKwlvbWFwMjR4eGNhbV9jYXB0dXJlX2NvbnQoY2FtKTsKK30KKworLyoKKyAq
IFRoZSBtYWluIGludGVycnVwdCBoYW5kbGVyLgorICovCitzdGF0aWMgaXJxcmV0dXJuX3Qgb21h
cDI0eHhjYW1faXNyKGludCBpcnEsIHZvaWQgKmFyZykKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1f
ZGV2aWNlICpjYW0gPSAoc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqKWFyZzsKKwl1MzIgaXJx
c3RhdHVzOworCXVuc2lnbmVkIGludCBpcnFoYW5kbGVkID0gMDsKKworCWlycXN0YXR1cyA9IG9t
YXAyNHh4Y2FtX3JlZ19pbihjYW0tPm1taW9fYmFzZSwgQ0FNX0lSUVNUQVRVUyk7CisKKwlpZiAo
aXJxc3RhdHVzICYKKwkgICAgKENBTV9JUlFTVEFUVVNfRE1BX0lSUTIgfCBDQU1fSVJRU1RBVFVT
X0RNQV9JUlExCisJICAgICB8IENBTV9JUlFTVEFUVVNfRE1BX0lSUTApKSB7CisJCW9tYXAyNHh4
Y2FtX2RtYV9pc3IoJmNhbS0+c2dkbWEuZG1hKTsKKwkJaXJxaGFuZGxlZCA9IDE7CisJfQorCWlm
IChpcnFzdGF0dXMgJiBDQU1fSVJRU1RBVFVTX0NDX0lSUSkgeworCQlvbWFwMjR4eGNhbV9jb3Jl
X2lzcihjYW0pOworCQlpcnFoYW5kbGVkID0gMTsKKwl9CisJaWYgKGlycXN0YXR1cyAmIENBTV9J
UlFTVEFUVVNfTU1VX0lSUSkKKwkJZGV2X2VycihjYW0tPmRldiwgInVuaGFuZGxlZCBjYW1lcmEg
TU1VIGludGVycnVwdCFcbiIpOworCisJcmV0dXJuIElSUV9SRVRWQUwoaXJxaGFuZGxlZCk7Cit9
CisKKy8qCisgKgorICogU2Vuc29yIGhhbmRsaW5nLgorICoKKyAqLworCisvKgorICogRW5hYmxl
IHRoZSBleHRlcm5hbCBzZW5zb3IgaW50ZXJmYWNlLiBUcnkgdG8gbmVnb3RpYXRlIGludGVyZmFj
ZQorICogcGFyYW1ldGVycyB3aXRoIHRoZSBzZW5zb3IgYW5kIHN0YXJ0IHVzaW5nIHRoZSBuZXcg
b25lcy4gVGhlIGNhbGxzCisgKiB0byBzZW5zb3JfaWZfZW5hYmxlIGFuZCBzZW5zb3JfaWZfZGlz
YWJsZSBuZWVkIG5vdCB0byBiZSBiYWxhbmNlZC4KKyAqLworc3RhdGljIGludCBvbWFwMjR4eGNh
bV9zZW5zb3JfaWZfZW5hYmxlKHN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSkKK3sKKwlp
bnQgcnZhbDsKKwlzdHJ1Y3QgdjRsMl9pZnBhcm0gcDsKKworCXJ2YWwgPSB2aWRpb2NfaW50X2df
aWZwYXJtKGNhbS0+c2RldiwgJnApOworCWlmIChydmFsKSB7CisJCWRldl9lcnIoY2FtLT5kZXYs
ICJ2aWRpb2NfaW50X2dfaWZwYXJtIGZhaWxlZCB3aXRoICVkXG4iLCBydmFsKTsKKwkJcmV0dXJu
IHJ2YWw7CisJfQorCisJY2FtLT5pZl90eXBlID0gcC5pZl90eXBlOworCisJY2FtLT5jY19jdHJs
ID0gQ0NfQ1RSTF9DQ19FTjsKKworCXN3aXRjaCAocC5pZl90eXBlKSB7CisJY2FzZSBWNEwyX0lG
X1RZUEVfQlQ2NTY6CisJCWlmIChwLnUuYnQ2NTYuZnJhbWVfc3RhcnRfb25fcmlzaW5nX3ZzKQor
CQkJY2FtLT5jY19jdHJsIHw9IENDX0NUUkxfTk9CVF9TWU5DSFJPOworCQlpZiAocC51LmJ0NjU2
LmJ0X3N5bmNfY29ycmVjdCkKKwkJCWNhbS0+Y2NfY3RybCB8PSBDQ19DVFJMX0JUX0NPUlJFQ1Q7
CisJCWlmIChwLnUuYnQ2NTYuc3dhcCkKKwkJCWNhbS0+Y2NfY3RybCB8PSBDQ19DVFJMX1BBUl9P
UkRFUkNBTTsKKwkJaWYgKHAudS5idDY1Ni5sYXRjaF9jbGtfaW52KQorCQkJY2FtLT5jY19jdHJs
IHw9IENDX0NUUkxfUEFSX0NMS19QT0w7CisJCWlmIChwLnUuYnQ2NTYubm9idF9oc19pbnYpCisJ
CQljYW0tPmNjX2N0cmwgfD0gQ0NfQ1RSTF9OT0JUX0hTX1BPTDsKKwkJaWYgKHAudS5idDY1Ni5u
b2J0X3ZzX2ludikKKwkJCWNhbS0+Y2NfY3RybCB8PSBDQ19DVFJMX05PQlRfVlNfUE9MOworCisJ
CXN3aXRjaCAocC51LmJ0NjU2Lm1vZGUpIHsKKwkJY2FzZSBWNEwyX0lGX1RZUEVfQlQ2NTZfTU9E
RV9OT0JUXzhCSVQ6CisJCQljYW0tPmNjX2N0cmwgfD0gQ0NfQ1RSTF9QQVJfTU9ERV9OT0JUODsK
KwkJCWJyZWFrOworCQljYXNlIFY0TDJfSUZfVFlQRV9CVDY1Nl9NT0RFX05PQlRfMTBCSVQ6CisJ
CQljYW0tPmNjX2N0cmwgfD0gQ0NfQ1RSTF9QQVJfTU9ERV9OT0JUMTA7CisJCQlicmVhazsKKwkJ
Y2FzZSBWNEwyX0lGX1RZUEVfQlQ2NTZfTU9ERV9OT0JUXzEyQklUOgorCQkJY2FtLT5jY19jdHJs
IHw9IENDX0NUUkxfUEFSX01PREVfTk9CVDEyOworCQkJYnJlYWs7CisJCWNhc2UgVjRMMl9JRl9U
WVBFX0JUNjU2X01PREVfQlRfOEJJVDoKKwkJCWNhbS0+Y2NfY3RybCB8PSBDQ19DVFJMX1BBUl9N
T0RFX0JUODsKKwkJCWJyZWFrOworCQljYXNlIFY0TDJfSUZfVFlQRV9CVDY1Nl9NT0RFX0JUXzEw
QklUOgorCQkJY2FtLT5jY19jdHJsIHw9IENDX0NUUkxfUEFSX01PREVfQlQxMDsKKwkJCWJyZWFr
OworCQlkZWZhdWx0OgorCQkJZGV2X2VycihjYW0tPmRldiwKKwkJCQkiYnQ2NTYgaW50ZXJmYWNl
IG1vZGUgJWQgbm90IHN1cHBvcnRlZFxuIiwKKwkJCQlwLnUuYnQ2NTYubW9kZSk7CisJCQlyZXR1
cm4gLUVJTlZBTDsKKwkJfQorCQkvKgorCQkgKiBUaGUgY2xvY2sgcmF0ZSB0aGF0IHRoZSBzZW5z
b3Igd2FudHMgaGFzIGNoYW5nZWQuCisJCSAqIFdlIGhhdmUgdG8gYWRqdXN0IHRoZSB4Y2xrIGZy
b20gT01BUCAyIHNpZGUgdG8KKwkJICogbWF0Y2ggdGhlIHNlbnNvcidzIHdpc2ggYXMgY2xvc2Vs
eSBhcyBwb3NzaWJsZS4KKwkJICovCisJCWlmIChwLnUuYnQ2NTYuY2xvY2tfY3VyciAhPSBjYW0t
PmlmX3UuYnQ2NTYueGNsaykgeworCQkJdTMyIHhjbGsgPSBwLnUuYnQ2NTYuY2xvY2tfY3VycjsK
KwkJCXUzMiBkaXZpc29yOworCisJCQlpZiAoeGNsayA9PSAwKQorCQkJCXJldHVybiAtRUlOVkFM
OworCisJCQlpZiAoeGNsayA+IENBTV9NQ0xLKQorCQkJCXhjbGsgPSBDQU1fTUNMSzsKKworCQkJ
ZGl2aXNvciA9IENBTV9NQ0xLIC8geGNsazsKKwkJCWlmIChkaXZpc29yICogeGNsayA8IENBTV9N
Q0xLKQorCQkJCWRpdmlzb3IrKzsKKwkJCWlmIChDQU1fTUNMSyAvIGRpdmlzb3IgPCBwLnUuYnQ2
NTYuY2xvY2tfbWluCisJCQkgICAgJiYgZGl2aXNvciA+IDEpCisJCQkJZGl2aXNvci0tOworCQkJ
aWYgKGRpdmlzb3IgPiAzMCkKKwkJCQlkaXZpc29yID0gMzA7CisKKwkJCXhjbGsgPSBDQU1fTUNM
SyAvIGRpdmlzb3I7CisKKwkJCWlmICh4Y2xrIDwgcC51LmJ0NjU2LmNsb2NrX21pbgorCQkJICAg
IHx8IHhjbGsgPiBwLnUuYnQ2NTYuY2xvY2tfbWF4KQorCQkJCXJldHVybiAtRUlOVkFMOworCisJ
CQljYW0tPmlmX3UuYnQ2NTYueGNsayA9IHhjbGs7CisJCX0KKwkJb21hcDI0eHhjYW1fY29yZV94
Y2xrX3NldChjYW0sIGNhbS0+aWZfdS5idDY1Ni54Y2xrKTsKKwkJYnJlYWs7CisJZGVmYXVsdDoK
KwkJLyogRklYTUU6IGhvdyBhYm91dCBvdGhlciBpbnRlcmZhY2VzPyAqLworCQlkZXZfZXJyKGNh
bS0+ZGV2LCAiaW50ZXJmYWNlIHR5cGUgJWQgbm90IHN1cHBvcnRlZFxuIiwKKwkJCXAuaWZfdHlw
ZSk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9p
ZCBvbWFwMjR4eGNhbV9zZW5zb3JfaWZfZGlzYWJsZShjb25zdCBzdHJ1Y3Qgb21hcDI0eHhjYW1f
ZGV2aWNlICpjYW0pCit7CisJc3dpdGNoIChjYW0tPmlmX3R5cGUpIHsKKwljYXNlIFY0TDJfSUZf
VFlQRV9CVDY1NjoKKwkJb21hcDI0eHhjYW1fY29yZV94Y2xrX3NldChjYW0sIDApOworCQlicmVh
azsKKwl9Cit9CisKKy8qCisgKiBJbml0aWFsaXNlIHRoZSBzZW5zb3IgaGFyZHdhcmUuCisgKi8K
K3N0YXRpYyBpbnQgb21hcDI0eHhjYW1fc2Vuc29yX2luaXQoc3RydWN0IG9tYXAyNHh4Y2FtX2Rl
dmljZSAqY2FtKQoreworCWludCBlcnIgPSAwOworCXN0cnVjdCB2NGwyX2ludF9kZXZpY2UgKnNk
ZXYgPSBjYW0tPnNkZXY7CisKKwlvbWFwMjR4eGNhbV9jbG9ja19vbihjYW0pOworCWVyciA9IG9t
YXAyNHh4Y2FtX3NlbnNvcl9pZl9lbmFibGUoY2FtKTsKKwlpZiAoZXJyKSB7CisJCWRldl9lcnIo
Y2FtLT5kZXYsICJzZW5zb3IgaW50ZXJmYWNlIGNvdWxkIG5vdCBiZSBlbmFibGVkIGF0ICIKKwkJ
CSJpbml0aWFsaXNhdGlvbiwgJWRcbiIsIGVycik7CisJCWNhbS0+c2RldiA9IE5VTEw7CisJCWdv
dG8gb3V0OworCX0KKworCS8qIHBvd2VyIHVwIHNlbnNvciBkdXJpbmcgc2Vuc29yIGluaXRpYWxp
emF0aW9uICovCisJdmlkaW9jX2ludF9zX3Bvd2VyKHNkZXYsIDEpOworCisJZXJyID0gdmlkaW9j
X2ludF9kZXZfaW5pdChzZGV2KTsKKwlpZiAoZXJyKSB7CisJCWRldl9lcnIoY2FtLT5kZXYsICJj
YW5ub3QgaW5pdGlhbGl6ZSBzZW5zb3IsIGVycm9yICVkXG4iLCBlcnIpOworCQkvKiBTZW5zb3Ig
aW5pdCBmYWlsZWQgLS0tIGl0J3Mgbm9uZXhpc3RlbnQgdG8gdXMhICovCisJCWNhbS0+c2RldiA9
IE5VTEw7CisJCWdvdG8gb3V0OworCX0KKworCWRldl9pbmZvKGNhbS0+ZGV2LCAic2Vuc29yIGlz
ICVzXG4iLCBzZGV2LT5uYW1lKTsKKworb3V0OgorCW9tYXAyNHh4Y2FtX3NlbnNvcl9pZl9kaXNh
YmxlKGNhbSk7CisJb21hcDI0eHhjYW1fY2xvY2tfb2ZmKGNhbSk7CisKKwl2aWRpb2NfaW50X3Nf
cG93ZXIoc2RldiwgMCk7CisKKwlyZXR1cm4gZXJyOworfQorCitzdGF0aWMgdm9pZCBvbWFwMjR4
eGNhbV9zZW5zb3JfZXhpdChzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0pCit7CisJaWYg
KGNhbS0+c2RldikKKwkJdmlkaW9jX2ludF9kZXZfZXhpdChjYW0tPnNkZXYpOworfQorCitzdGF0
aWMgdm9pZCBvbWFwMjR4eGNhbV9zZW5zb3JfZGlzYWJsZShzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2
aWNlICpjYW0pCit7CisJb21hcDI0eHhjYW1fc2Vuc29yX2lmX2Rpc2FibGUoY2FtKTsKKwlvbWFw
MjR4eGNhbV9jbG9ja19vZmYoY2FtKTsKKwl2aWRpb2NfaW50X3NfcG93ZXIoY2FtLT5zZGV2LCAw
KTsKK30KKworLyoKKyAqIFBvd2VyLXVwIGFuZCBjb25maWd1cmUgY2FtZXJhIHNlbnNvci4gSXQn
cyByZWFkeSBmb3IgY2FwdHVyaW5nIG5vdy4KKyAqLworc3RhdGljIGludCBvbWFwMjR4eGNhbV9z
ZW5zb3JfZW5hYmxlKHN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSkKK3sKKwlpbnQgcnZh
bDsKKworCW9tYXAyNHh4Y2FtX2Nsb2NrX29uKGNhbSk7CisKKwlvbWFwMjR4eGNhbV9zZW5zb3Jf
aWZfZW5hYmxlKGNhbSk7CisKKwlydmFsID0gdmlkaW9jX2ludF9zX3Bvd2VyKGNhbS0+c2Rldiwg
MSk7CisJaWYgKHJ2YWwpCisJCWdvdG8gb3V0OworCisJcnZhbCA9IHZpZGlvY19pbnRfaW5pdChj
YW0tPnNkZXYpOworCWlmIChydmFsKQorCQlnb3RvIG91dDsKKworCXJldHVybiAwOworCitvdXQ6
CisJb21hcDI0eHhjYW1fc2Vuc29yX2Rpc2FibGUoY2FtKTsKKworCXJldHVybiBydmFsOworfQor
CitzdGF0aWMgdm9pZCBvbWFwMjR4eGNhbV9zZW5zb3JfcmVzZXRfd29yayhzdHJ1Y3Qgd29ya19z
dHJ1Y3QgKndvcmspCit7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtID0KKwkJY29u
dGFpbmVyX29mKHdvcmssIHN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UsCisJCQkgICAgIHNlbnNv
cl9yZXNldF93b3JrKTsKKworCWlmIChhdG9taWNfcmVhZCgmY2FtLT5yZXNldF9kaXNhYmxlKSkK
KwkJcmV0dXJuOworCisJb21hcDI0eHhjYW1fY2FwdHVyZV9zdG9wKGNhbSk7CisKKwlpZiAodmlk
aW9jX2ludF9yZXNldChjYW0tPnNkZXYpID09IDApIHsKKwkJdmlkaW9jX2ludF9pbml0KGNhbS0+
c2Rldik7CisJfSBlbHNlIHsKKwkJLyogQ2FuJ3QgcmVzZXQgaXQgYnkgdmlkaW9jX2ludF9yZXNl
dC4gKi8KKwkJb21hcDI0eHhjYW1fc2Vuc29yX2Rpc2FibGUoY2FtKTsKKwkJb21hcDI0eHhjYW1f
c2Vuc29yX2VuYWJsZShjYW0pOworCX0KKworCW9tYXAyNHh4Y2FtX2NhcHR1cmVfY29udChjYW0p
OworfQorCisvKgorICoKKyAqIElPQ1RMIGludGVyZmFjZS4KKyAqCisgKi8KKworc3RhdGljIGlu
dCB2aWRpb2NfcXVlcnljYXAoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQgKmZoLAorCQkJICAgc3Ry
dWN0IHY0bDJfY2FwYWJpbGl0eSAqY2FwKQoreworCXN0cnVjdCBvbWFwMjR4eGNhbV9maCAqb2Zo
ID0gZmg7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtID0gb2ZoLT5jYW07CisKKwlz
dHJsY3B5KGNhcC0+ZHJpdmVyLCBDQU1fTkFNRSwgc2l6ZW9mKGNhcC0+ZHJpdmVyKSk7CisJc3Ry
bGNweShjYXAtPmNhcmQsIGNhbS0+dmZkLT5uYW1lLCBzaXplb2YoY2FwLT5jYXJkKSk7CisJY2Fw
LT52ZXJzaW9uID0gT01BUDI0WFhDQU1fVkVSU0lPTjsKKwljYXAtPmNhcGFiaWxpdGllcyA9IFY0
TDJfQ0FQX1ZJREVPX0NBUFRVUkUgfCBWNEwyX0NBUF9TVFJFQU1JTkc7CisKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIGludCB2aWRpb2NfZW51bV9mbXRfdmlkX2NhcChzdHJ1Y3QgZmlsZSAqZmls
ZSwgdm9pZCAqZmgsCisJCQkJICAgc3RydWN0IHY0bDJfZm10ZGVzYyAqZikKK3sKKwlzdHJ1Y3Qg
b21hcDI0eHhjYW1fZmggKm9maCA9IGZoOworCXN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNh
bSA9IG9maC0+Y2FtOworCWludCBydmFsOworCisJcnZhbCA9IHZpZGlvY19pbnRfZW51bV9mbXRf
Y2FwKGNhbS0+c2RldiwgZik7CisKKwlyZXR1cm4gcnZhbDsKK30KKworc3RhdGljIGludCB2aWRp
b2NfZ19mbXRfdmlkX2NhcChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsCisJCQkJc3RydWN0
IHY0bDJfZm9ybWF0ICpmKQoreworCXN0cnVjdCBvbWFwMjR4eGNhbV9maCAqb2ZoID0gZmg7CisJ
c3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtID0gb2ZoLT5jYW07CisJaW50IHJ2YWw7CisK
KwltdXRleF9sb2NrKCZjYW0tPm11dGV4KTsKKwlydmFsID0gdmlkaW9jX2ludF9nX2ZtdF9jYXAo
Y2FtLT5zZGV2LCBmKTsKKwltdXRleF91bmxvY2soJmNhbS0+bXV0ZXgpOworCisJcmV0dXJuIHJ2
YWw7Cit9CisKK3N0YXRpYyBpbnQgdmlkaW9jX3NfZm10X3ZpZF9jYXAoc3RydWN0IGZpbGUgKmZp
bGUsIHZvaWQgKmZoLAorCQkJCXN0cnVjdCB2NGwyX2Zvcm1hdCAqZikKK3sKKwlzdHJ1Y3Qgb21h
cDI0eHhjYW1fZmggKm9maCA9IGZoOworCXN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSA9
IG9maC0+Y2FtOworCWludCBydmFsOworCisJbXV0ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJaWYg
KGNhbS0+c3RyZWFtaW5nKSB7CisJCXJ2YWwgPSAtRUJVU1k7CisJCWdvdG8gb3V0OworCX0KKwor
CXJ2YWwgPSB2aWRpb2NfaW50X3NfZm10X2NhcChjYW0tPnNkZXYsIGYpOworCitvdXQ6CisJbXV0
ZXhfdW5sb2NrKCZjYW0tPm11dGV4KTsKKworCWlmICghcnZhbCkgeworCQltdXRleF9sb2NrKCZv
ZmgtPnZicS52Yl9sb2NrKTsKKwkJb2ZoLT5waXggPSBmLT5mbXQucGl4OworCQltdXRleF91bmxv
Y2soJm9maC0+dmJxLnZiX2xvY2spOworCX0KKworCW1lbXNldChmLCAwLCBzaXplb2YoKmYpKTsK
Kwl2aWRpb2NfZ19mbXRfdmlkX2NhcChmaWxlLCBmaCwgZik7CisKKwlyZXR1cm4gcnZhbDsKK30K
Kworc3RhdGljIGludCB2aWRpb2NfdHJ5X2ZtdF92aWRfY2FwKHN0cnVjdCBmaWxlICpmaWxlLCB2
b2lkICpmaCwKKwkJCQkgIHN0cnVjdCB2NGwyX2Zvcm1hdCAqZikKK3sKKwlzdHJ1Y3Qgb21hcDI0
eHhjYW1fZmggKm9maCA9IGZoOworCXN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSA9IG9m
aC0+Y2FtOworCWludCBydmFsOworCisJbXV0ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJcnZhbCA9
IHZpZGlvY19pbnRfdHJ5X2ZtdF9jYXAoY2FtLT5zZGV2LCBmKTsKKwltdXRleF91bmxvY2soJmNh
bS0+bXV0ZXgpOworCisJcmV0dXJuIHJ2YWw7Cit9CisKK3N0YXRpYyBpbnQgdmlkaW9jX3JlcWJ1
ZnMoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQgKmZoLAorCQkJICBzdHJ1Y3QgdjRsMl9yZXF1ZXN0
YnVmZmVycyAqYikKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZmggKm9maCA9IGZoOworCXN0cnVj
dCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSA9IG9maC0+Y2FtOworCWludCBydmFsOworCisJbXV0
ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJaWYgKGNhbS0+c3RyZWFtaW5nKSB7CisJCW11dGV4X3Vu
bG9jaygmY2FtLT5tdXRleCk7CisJCXJldHVybiAtRUJVU1k7CisJfQorCisJb21hcDI0eHhjYW1f
dmJxX2ZyZWVfbW1hcF9idWZmZXJzKCZvZmgtPnZicSk7CisJbXV0ZXhfdW5sb2NrKCZjYW0tPm11
dGV4KTsKKworCXJ2YWwgPSB2aWRlb2J1Zl9yZXFidWZzKCZvZmgtPnZicSwgYik7CisKKwkvKgor
CSAqIEVpdGhlciB2aWRlb2J1Zl9yZXFidWZzIGZhaWxlZCBvciB0aGUgYnVmZmVycyBhcmUgbm90
CisJICogbWVtb3J5LW1hcHBlZCAod2hpY2ggd291bGQgbmVlZCBzcGVjaWFsIGF0dGVudGlvbiku
CisJICovCisJaWYgKHJ2YWwgPCAwIHx8IGItPm1lbW9yeSAhPSBWNEwyX01FTU9SWV9NTUFQKQor
CQlnb3RvIG91dDsKKworCXJ2YWwgPSBvbWFwMjR4eGNhbV92YnFfYWxsb2NfbW1hcF9idWZmZXJz
KCZvZmgtPnZicSwgcnZhbCk7CisJaWYgKHJ2YWwpCisJCW9tYXAyNHh4Y2FtX3ZicV9mcmVlX21t
YXBfYnVmZmVycygmb2ZoLT52YnEpOworCitvdXQ6CisJcmV0dXJuIHJ2YWw7Cit9CisKK3N0YXRp
YyBpbnQgdmlkaW9jX3F1ZXJ5YnVmKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpmaCwKKwkJCSAg
IHN0cnVjdCB2NGwyX2J1ZmZlciAqYikKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZmggKm9maCA9
IGZoOworCisJcmV0dXJuIHZpZGVvYnVmX3F1ZXJ5YnVmKCZvZmgtPnZicSwgYik7Cit9CisKK3N0
YXRpYyBpbnQgdmlkaW9jX3FidWYoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQgKmZoLCBzdHJ1Y3Qg
djRsMl9idWZmZXIgKmIpCit7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2ZoICpvZmggPSBmaDsKKwor
CXJldHVybiB2aWRlb2J1Zl9xYnVmKCZvZmgtPnZicSwgYik7Cit9CisKK3N0YXRpYyBpbnQgdmlk
aW9jX2RxYnVmKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpmaCwgc3RydWN0IHY0bDJfYnVmZmVy
ICpiKQoreworCXN0cnVjdCBvbWFwMjR4eGNhbV9maCAqb2ZoID0gZmg7CisJc3RydWN0IG9tYXAy
NHh4Y2FtX2RldmljZSAqY2FtID0gb2ZoLT5jYW07CisJc3RydWN0IHZpZGVvYnVmX2J1ZmZlciAq
dmI7CisJaW50IHJ2YWw7CisKK3ZpZGVvYnVmX2RxYnVmX2FnYWluOgorCXJ2YWwgPSB2aWRlb2J1
Zl9kcWJ1Zigmb2ZoLT52YnEsIGIsIGZpbGUtPmZfZmxhZ3MgJiBPX05PTkJMT0NLKTsKKwlpZiAo
cnZhbCkKKwkJZ290byBvdXQ7CisKKwl2YiA9IG9maC0+dmJxLmJ1ZnNbYi0+aW5kZXhdOworCisJ
bXV0ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJLyogX25lZWRzX3Jlc2V0IHJldHVybnMgLUVJTyBp
ZiByZXNldCBpcyByZXF1aXJlZC4gKi8KKwlydmFsID0gdmlkaW9jX2ludF9nX25lZWRzX3Jlc2V0
KGNhbS0+c2RldiwgKHZvaWQgKil2Yi0+YmFkZHIpOworCW11dGV4X3VubG9jaygmY2FtLT5tdXRl
eCk7CisJaWYgKHJ2YWwgPT0gLUVJTykKKwkJc2NoZWR1bGVfd29yaygmY2FtLT5zZW5zb3JfcmVz
ZXRfd29yayk7CisJZWxzZQorCQlydmFsID0gMDsKKworb3V0OgorCS8qCisJICogVGhpcyBpcyBh
IGhhY2suIFdlIGRvbid0IHdhbnQgdG8gc2hvdyAtRUlPIHRvIHRoZSB1c2VyCisJICogc3BhY2Uu
IFJlcXVldWUgdGhlIGJ1ZmZlciBhbmQgdHJ5IGFnYWluIGlmIHdlJ3JlIG5vdCBkb2luZworCSAq
IHRoaXMgaW4gbm9uLWJsb2NraW5nIG1vZGUuCisJICovCisJaWYgKHJ2YWwgPT0gLUVJTykgewor
CQl2aWRlb2J1Zl9xYnVmKCZvZmgtPnZicSwgYik7CisJCWlmICghKGZpbGUtPmZfZmxhZ3MgJiBP
X05PTkJMT0NLKSkKKwkJCWdvdG8gdmlkZW9idWZfZHFidWZfYWdhaW47CisJCS8qCisJCSAqIFdl
IGRvbid0IGhhdmUgYSB2aWRlb2J1Zl9idWZmZXIgbm93IC0tLSBtYXliZSBuZXh0CisJCSAqIHRp
bWUuLi4KKwkJICovCisJCXJ2YWwgPSAtRUFHQUlOOworCX0KKworCXJldHVybiBydmFsOworfQor
CitzdGF0aWMgaW50IHZpZGlvY19zdHJlYW1vbihzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgs
IGVudW0gdjRsMl9idWZfdHlwZSBpKQoreworCXN0cnVjdCBvbWFwMjR4eGNhbV9maCAqb2ZoID0g
Zmg7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2RldmljZSAqY2FtID0gb2ZoLT5jYW07CisJaW50IHJ2
YWw7CisKKwltdXRleF9sb2NrKCZjYW0tPm11dGV4KTsKKwlpZiAoY2FtLT5zdHJlYW1pbmcpIHsK
KwkJcnZhbCA9IC1FQlVTWTsKKwkJZ290byBvdXQ7CisJfQorCisJcnZhbCA9IG9tYXAyNHh4Y2Ft
X3NlbnNvcl9pZl9lbmFibGUoY2FtKTsKKwlpZiAocnZhbCkgeworCQlkZXZfZGJnKGNhbS0+ZGV2
LCAidmlkaW9jX2ludF9nX2lmcGFybSBmYWlsZWRcbiIpOworCQlnb3RvIG91dDsKKwl9CisKKwly
dmFsID0gdmlkZW9idWZfc3RyZWFtb24oJm9maC0+dmJxKTsKKwlpZiAoIXJ2YWwpIHsKKwkJY2Ft
LT5zdHJlYW1pbmcgPSBmaWxlOworCQlzeXNmc19ub3RpZnkoJmNhbS0+ZGV2LT5rb2JqLCBOVUxM
LCAic3RyZWFtaW5nIik7CisJfQorCitvdXQ6CisJbXV0ZXhfdW5sb2NrKCZjYW0tPm11dGV4KTsK
KworCXJldHVybiBydmFsOworfQorCitzdGF0aWMgaW50IHZpZGlvY19zdHJlYW1vZmYoc3RydWN0
IGZpbGUgKmZpbGUsIHZvaWQgKmZoLCBlbnVtIHY0bDJfYnVmX3R5cGUgaSkKK3sKKwlzdHJ1Y3Qg
b21hcDI0eHhjYW1fZmggKm9maCA9IGZoOworCXN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNh
bSA9IG9maC0+Y2FtOworCXN0cnVjdCB2aWRlb2J1Zl9xdWV1ZSAqcSA9ICZvZmgtPnZicTsKKwlp
bnQgcnZhbDsKKworCWF0b21pY19pbmMoJmNhbS0+cmVzZXRfZGlzYWJsZSk7CisKKwlmbHVzaF9z
Y2hlZHVsZWRfd29yaygpOworCisJcnZhbCA9IHZpZGVvYnVmX3N0cmVhbW9mZihxKTsKKwlpZiAo
IXJ2YWwpIHsKKwkJbXV0ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJCWNhbS0+c3RyZWFtaW5nID0g
TlVMTDsKKwkJbXV0ZXhfdW5sb2NrKCZjYW0tPm11dGV4KTsKKwkJc3lzZnNfbm90aWZ5KCZjYW0t
PmRldi0+a29iaiwgTlVMTCwgInN0cmVhbWluZyIpOworCX0KKworCWF0b21pY19kZWMoJmNhbS0+
cmVzZXRfZGlzYWJsZSk7CisKKwlyZXR1cm4gcnZhbDsKK30KKworc3RhdGljIGludCB2aWRpb2Nf
ZW51bV9pbnB1dChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsCisJCQkgICAgIHN0cnVjdCB2
NGwyX2lucHV0ICppbnApCit7CisJaWYgKGlucC0+aW5kZXggPiAwKQorCQlyZXR1cm4gLUVJTlZB
TDsKKworCXN0cmxjcHkoaW5wLT5uYW1lLCAiY2FtZXJhIiwgc2l6ZW9mKGlucC0+bmFtZSkpOwor
CWlucC0+dHlwZSA9IFY0TDJfSU5QVVRfVFlQRV9DQU1FUkE7CisKKwlyZXR1cm4gMDsKK30KKwor
c3RhdGljIGludCB2aWRpb2NfZ19pbnB1dChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHVu
c2lnbmVkIGludCAqaSkKK3sKKwkqaSA9IDA7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGlu
dCB2aWRpb2Nfc19pbnB1dChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsIHVuc2lnbmVkIGlu
dCBpKQoreworCWlmIChpID4gMCkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlyZXR1cm4gMDsKK30K
Kworc3RhdGljIGludCB2aWRpb2NfcXVlcnljdHJsKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpm
aCwKKwkJCSAgICBzdHJ1Y3QgdjRsMl9xdWVyeWN0cmwgKmEpCit7CisJc3RydWN0IG9tYXAyNHh4
Y2FtX2ZoICpvZmggPSBmaDsKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0gPSBvZmgt
PmNhbTsKKwlpbnQgcnZhbDsKKworCXJ2YWwgPSB2aWRpb2NfaW50X3F1ZXJ5Y3RybChjYW0tPnNk
ZXYsIGEpOworCisJcmV0dXJuIHJ2YWw7Cit9CisKK3N0YXRpYyBpbnQgdmlkaW9jX2dfY3RybChz
dHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsCisJCQkgc3RydWN0IHY0bDJfY29udHJvbCAqYSkK
K3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZmggKm9maCA9IGZoOworCXN0cnVjdCBvbWFwMjR4eGNh
bV9kZXZpY2UgKmNhbSA9IG9maC0+Y2FtOworCWludCBydmFsOworCisJbXV0ZXhfbG9jaygmY2Ft
LT5tdXRleCk7CisJcnZhbCA9IHZpZGlvY19pbnRfZ19jdHJsKGNhbS0+c2RldiwgYSk7CisJbXV0
ZXhfdW5sb2NrKCZjYW0tPm11dGV4KTsKKworCXJldHVybiBydmFsOworfQorCitzdGF0aWMgaW50
IHZpZGlvY19zX2N0cmwoc3RydWN0IGZpbGUgKmZpbGUsIHZvaWQgKmZoLAorCQkJIHN0cnVjdCB2
NGwyX2NvbnRyb2wgKmEpCit7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2ZoICpvZmggPSBmaDsKKwlz
dHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0gPSBvZmgtPmNhbTsKKwlpbnQgcnZhbDsKKwor
CW11dGV4X2xvY2soJmNhbS0+bXV0ZXgpOworCXJ2YWwgPSB2aWRpb2NfaW50X3NfY3RybChjYW0t
PnNkZXYsIGEpOworCW11dGV4X3VubG9jaygmY2FtLT5tdXRleCk7CisKKwlyZXR1cm4gcnZhbDsK
K30KKworc3RhdGljIGludCB2aWRpb2NfZ19wYXJtKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpm
aCwKKwkJCSBzdHJ1Y3QgdjRsMl9zdHJlYW1wYXJtICphKSB7CisJc3RydWN0IG9tYXAyNHh4Y2Ft
X2ZoICpvZmggPSBmaDsKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0gPSBvZmgtPmNh
bTsKKwlpbnQgcnZhbDsKKworCWlmIChhLT50eXBlICE9IFY0TDJfQlVGX1RZUEVfVklERU9fQ0FQ
VFVSRSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwltdXRleF9sb2NrKCZjYW0tPm11dGV4KTsKKwly
dmFsID0gdmlkaW9jX2ludF9nX3Bhcm0oY2FtLT5zZGV2LCBhKTsKKwltdXRleF91bmxvY2soJmNh
bS0+bXV0ZXgpOworCisJcmV0dXJuIHJ2YWw7Cit9CisKK3N0YXRpYyBpbnQgdmlkaW9jX3NfcGFy
bShzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgsCisJCQkgc3RydWN0IHY0bDJfc3RyZWFtcGFy
bSAqYSkKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZmggKm9maCA9IGZoOworCXN0cnVjdCBvbWFw
MjR4eGNhbV9kZXZpY2UgKmNhbSA9IG9maC0+Y2FtOworCXN0cnVjdCB2NGwyX3N0cmVhbXBhcm0g
b2xkX3N0cmVhbXBhcm07CisJaW50IHJ2YWw7CisKKwlpZiAoYS0+dHlwZSAhPSBWNEwyX0JVRl9U
WVBFX1ZJREVPX0NBUFRVUkUpCisJCXJldHVybiAtRUlOVkFMOworCisJbXV0ZXhfbG9jaygmY2Ft
LT5tdXRleCk7CisJaWYgKGNhbS0+c3RyZWFtaW5nKSB7CisJCXJ2YWwgPSAtRUJVU1k7CisJCWdv
dG8gb3V0OworCX0KKworCW9sZF9zdHJlYW1wYXJtLnR5cGUgPSBWNEwyX0JVRl9UWVBFX1ZJREVP
X0NBUFRVUkU7CisJcnZhbCA9IHZpZGlvY19pbnRfZ19wYXJtKGNhbS0+c2RldiwgJm9sZF9zdHJl
YW1wYXJtKTsKKwlpZiAocnZhbCkKKwkJZ290byBvdXQ7CisKKwlydmFsID0gdmlkaW9jX2ludF9z
X3Bhcm0oY2FtLT5zZGV2LCBhKTsKKwlpZiAocnZhbCkKKwkJZ290byBvdXQ7CisKKwlydmFsID0g
b21hcDI0eHhjYW1fc2Vuc29yX2lmX2VuYWJsZShjYW0pOworCS8qCisJICogUmV2ZXJ0IHRvIG9s
ZCBzdHJlYW1pbmcgcGFyYW1ldGVycyBpZiBlbmFibGluZyBzZW5zb3IKKwkgKiBpbnRlcmZhY2Ug
d2l0aCB0aGUgbmV3IG9uZXMgZmFpbGVkLgorCSAqLworCWlmIChydmFsKQorCQl2aWRpb2NfaW50
X3NfcGFybShjYW0tPnNkZXYsICZvbGRfc3RyZWFtcGFybSk7CisKK291dDoKKwltdXRleF91bmxv
Y2soJmNhbS0+bXV0ZXgpOworCisJcmV0dXJuIHJ2YWw7Cit9CisKKy8qCisgKgorICogRmlsZSBv
cGVyYXRpb25zLgorICoKKyAqLworCitzdGF0aWMgdW5zaWduZWQgaW50IG9tYXAyNHh4Y2FtX3Bv
bGwoc3RydWN0IGZpbGUgKmZpbGUsCisJCQkJICAgICBzdHJ1Y3QgcG9sbF90YWJsZV9zdHJ1Y3Qg
KndhaXQpCit7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2ZoICpmaCA9IGZpbGUtPnByaXZhdGVfZGF0
YTsKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0gPSBmaC0+Y2FtOworCXN0cnVjdCB2
aWRlb2J1Zl9idWZmZXIgKnZiOworCisJbXV0ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJaWYgKGNh
bS0+c3RyZWFtaW5nICE9IGZpbGUpIHsKKwkJbXV0ZXhfdW5sb2NrKCZjYW0tPm11dGV4KTsKKwkJ
cmV0dXJuIFBPTExFUlI7CisJfQorCW11dGV4X3VubG9jaygmY2FtLT5tdXRleCk7CisKKwltdXRl
eF9sb2NrKCZmaC0+dmJxLnZiX2xvY2spOworCWlmIChsaXN0X2VtcHR5KCZmaC0+dmJxLnN0cmVh
bSkpIHsKKwkJbXV0ZXhfdW5sb2NrKCZmaC0+dmJxLnZiX2xvY2spOworCQlyZXR1cm4gUE9MTEVS
UjsKKwl9CisJdmIgPSBsaXN0X2VudHJ5KGZoLT52YnEuc3RyZWFtLm5leHQsIHN0cnVjdCB2aWRl
b2J1Zl9idWZmZXIsIHN0cmVhbSk7CisJbXV0ZXhfdW5sb2NrKCZmaC0+dmJxLnZiX2xvY2spOwor
CisJcG9sbF93YWl0KGZpbGUsICZ2Yi0+ZG9uZSwgd2FpdCk7CisKKwlpZiAodmItPnN0YXRlID09
IFZJREVPQlVGX0RPTkUgfHwgdmItPnN0YXRlID09IFZJREVPQlVGX0VSUk9SKQorCQlyZXR1cm4g
UE9MTElOIHwgUE9MTFJETk9STTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG9tYXAy
NHh4Y2FtX21tYXBfYnVmZmVycyhzdHJ1Y3QgZmlsZSAqZmlsZSwKKwkJCQkgICAgc3RydWN0IHZt
X2FyZWFfc3RydWN0ICp2bWEpCit7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2ZoICpmaCA9IGZpbGUt
PnByaXZhdGVfZGF0YTsKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0gPSBmaC0+Y2Ft
OworCXN0cnVjdCB2aWRlb2J1Zl9xdWV1ZSAqdmJxID0gJmZoLT52YnE7CisJdW5zaWduZWQgaW50
IGZpcnN0LCBsYXN0LCBzaXplLCBpLCBqOworCWludCBlcnIgPSAwOworCisJbXV0ZXhfbG9jaygm
Y2FtLT5tdXRleCk7CisJaWYgKGNhbS0+c3RyZWFtaW5nKSB7CisJCW11dGV4X3VubG9jaygmY2Ft
LT5tdXRleCk7CisJCXJldHVybiAtRUJVU1k7CisJfQorCW11dGV4X3VubG9jaygmY2FtLT5tdXRl
eCk7CisJbXV0ZXhfbG9jaygmdmJxLT52Yl9sb2NrKTsKKworCS8qIGxvb2sgZm9yIGZpcnN0IGJ1
ZmZlciB0byBtYXAgKi8KKwlmb3IgKGZpcnN0ID0gMDsgZmlyc3QgPCBWSURFT19NQVhfRlJBTUU7
IGZpcnN0KyspIHsKKwkJaWYgKE5VTEwgPT0gdmJxLT5idWZzW2ZpcnN0XSkKKwkJCWNvbnRpbnVl
OworCQlpZiAoVjRMMl9NRU1PUllfTU1BUCAhPSB2YnEtPmJ1ZnNbZmlyc3RdLT5tZW1vcnkpCisJ
CQljb250aW51ZTsKKwkJaWYgKHZicS0+YnVmc1tmaXJzdF0tPmJvZmYgPT0gKHZtYS0+dm1fcGdv
ZmYgPDwgUEFHRV9TSElGVCkpCisJCQlicmVhazsKKwl9CisKKwkvKiBsb29rIGZvciBsYXN0IGJ1
ZmZlciB0byBtYXAgKi8KKwlmb3IgKHNpemUgPSAwLCBsYXN0ID0gZmlyc3Q7IGxhc3QgPCBWSURF
T19NQVhfRlJBTUU7IGxhc3QrKykgeworCQlpZiAoTlVMTCA9PSB2YnEtPmJ1ZnNbbGFzdF0pCisJ
CQljb250aW51ZTsKKwkJaWYgKFY0TDJfTUVNT1JZX01NQVAgIT0gdmJxLT5idWZzW2xhc3RdLT5t
ZW1vcnkpCisJCQljb250aW51ZTsKKwkJc2l6ZSArPSB2YnEtPmJ1ZnNbbGFzdF0tPmJzaXplOwor
CQlpZiAoc2l6ZSA9PSAodm1hLT52bV9lbmQgLSB2bWEtPnZtX3N0YXJ0KSkKKwkJCWJyZWFrOwor
CX0KKworCXNpemUgPSAwOworCWZvciAoaSA9IGZpcnN0OyBpIDw9IGxhc3Q7IGkrKykgeworCQlz
dHJ1Y3QgdmlkZW9idWZfZG1hYnVmICpkbWEgPSB2aWRlb2J1Zl90b19kbWEodmJxLT5idWZzW2ld
KTsKKworCQlmb3IgKGogPSAwOyBqIDwgZG1hLT5zZ2xlbjsgaisrKSB7CisJCQllcnIgPSByZW1h
cF9wZm5fcmFuZ2UoCisJCQkJdm1hLCB2bWEtPnZtX3N0YXJ0ICsgc2l6ZSwKKwkJCQlwYWdlX3Rv
X3BmbihzZ19wYWdlKCZkbWEtPnNnbGlzdFtqXSkpLAorCQkJCXNnX2RtYV9sZW4oJmRtYS0+c2ds
aXN0W2pdKSwgdm1hLT52bV9wYWdlX3Byb3QpOworCQkJaWYgKGVycikKKwkJCQlnb3RvIG91dDsK
KwkJCXNpemUgKz0gc2dfZG1hX2xlbigmZG1hLT5zZ2xpc3Rbal0pOworCQl9CisJfQorCitvdXQ6
CisJbXV0ZXhfdW5sb2NrKCZ2YnEtPnZiX2xvY2spOworCisJcmV0dXJuIGVycjsKK30KKworc3Rh
dGljIGludCBvbWFwMjR4eGNhbV9tbWFwKHN0cnVjdCBmaWxlICpmaWxlLCBzdHJ1Y3Qgdm1fYXJl
YV9zdHJ1Y3QgKnZtYSkKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZmggKmZoID0gZmlsZS0+cHJp
dmF0ZV9kYXRhOworCWludCBydmFsOworCisJLyogbGV0IHRoZSB2aWRlby1idWYgbWFwcGVyIGNo
ZWNrIGFyZ3VtZW50cyBhbmQgc2V0LXVwIHN0cnVjdHVyZXMgKi8KKwlydmFsID0gdmlkZW9idWZf
bW1hcF9tYXBwZXIoJmZoLT52YnEsIHZtYSk7CisJaWYgKHJ2YWwpCisJCXJldHVybiBydmFsOwor
CisJdm1hLT52bV9wYWdlX3Byb3QgPSBwZ3Byb3Rfbm9uY2FjaGVkKHZtYS0+dm1fcGFnZV9wcm90
KTsKKworCS8qIGRvIG1hcHBpbmcgdG8gb3VyIGFsbG9jYXRlZCBidWZmZXJzICovCisJcnZhbCA9
IG9tYXAyNHh4Y2FtX21tYXBfYnVmZmVycyhmaWxlLCB2bWEpOworCS8qCisJICogSW4gY2FzZSBv
ZiBlcnJvciwgZnJlZSB2bWEtPnZtX3ByaXZhdGVfZGF0YSBhbGxvY2F0ZWQgYnkKKwkgKiB2aWRl
b2J1Zl9tbWFwX21hcHBlci4KKwkgKi8KKwlpZiAocnZhbCkKKwkJa2ZyZWUodm1hLT52bV9wcml2
YXRlX2RhdGEpOworCisJcmV0dXJuIHJ2YWw7Cit9CisKK3N0YXRpYyBpbnQgb21hcDI0eHhjYW1f
b3BlbihzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKK3sKKwlpbnQgbWlu
b3IgPSBpbWlub3IoaW5vZGUpOworCXN0cnVjdCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSA9IG9t
YXAyNHh4Y2FtLnByaXY7CisJc3RydWN0IG9tYXAyNHh4Y2FtX2ZoICpmaDsKKwlzdHJ1Y3QgdjRs
Ml9mb3JtYXQgZm9ybWF0OworCisJaWYgKCFjYW0gfHwgIWNhbS0+dmZkIHx8IChjYW0tPnZmZC0+
bWlub3IgIT0gbWlub3IpKQorCQlyZXR1cm4gLUVOT0RFVjsKKworCWZoID0ga3phbGxvYyhzaXpl
b2YoKmZoKSwgR0ZQX0tFUk5FTCk7CisJaWYgKGZoID09IE5VTEwpCisJCXJldHVybiAtRU5PTUVN
OworCisJbXV0ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJaWYgKGNhbS0+c2RldiA9PSBOVUxMIHx8
ICF0cnlfbW9kdWxlX2dldChjYW0tPnNkZXYtPm1vZHVsZSkpIHsKKwkJbXV0ZXhfdW5sb2NrKCZj
YW0tPm11dGV4KTsKKwkJZ290byBvdXRfdHJ5X21vZHVsZV9nZXQ7CisJfQorCisJaWYgKGF0b21p
Y19pbmNfcmV0dXJuKCZjYW0tPnVzZXJzKSA9PSAxKSB7CisJCW9tYXAyNHh4Y2FtX2h3aW5pdChj
YW0pOworCQlpZiAob21hcDI0eHhjYW1fc2Vuc29yX2VuYWJsZShjYW0pKSB7CisJCQltdXRleF91
bmxvY2soJmNhbS0+bXV0ZXgpOworCQkJZ290byBvdXRfb21hcDI0eHhjYW1fc2Vuc29yX2VuYWJs
ZTsKKwkJfQorCX0KKwltdXRleF91bmxvY2soJmNhbS0+bXV0ZXgpOworCisJZmgtPmNhbSA9IGNh
bTsKKwltdXRleF9sb2NrKCZjYW0tPm11dGV4KTsKKwl2aWRpb2NfaW50X2dfZm10X2NhcChjYW0t
PnNkZXYsICZmb3JtYXQpOworCW11dGV4X3VubG9jaygmY2FtLT5tdXRleCk7CisJLyogRklYTUU6
IGhvdyBhYm91dCBmaC0+cGl4IHdoZW4gdGhlcmUgYXJlIG1vcmUgdXNlcnM/ICovCisJZmgtPnBp
eCA9IGZvcm1hdC5mbXQucGl4OworCisJZmlsZS0+cHJpdmF0ZV9kYXRhID0gZmg7CisKKwlzcGlu
X2xvY2tfaW5pdCgmZmgtPnZicV9sb2NrKTsKKworCXZpZGVvYnVmX3F1ZXVlX3NnX2luaXQoJmZo
LT52YnEsICZvbWFwMjR4eGNhbV92YnFfb3BzLCBOVUxMLAorCQkJCSZmaC0+dmJxX2xvY2ssIFY0
TDJfQlVGX1RZUEVfVklERU9fQ0FQVFVSRSwKKwkJCQlWNEwyX0ZJRUxEX05PTkUsCisJCQkJc2l6
ZW9mKHN0cnVjdCB2aWRlb2J1Zl9idWZmZXIpLCBmaCk7CisKKwlyZXR1cm4gMDsKKworb3V0X29t
YXAyNHh4Y2FtX3NlbnNvcl9lbmFibGU6CisJb21hcDI0eHhjYW1fcG93ZXJvbl9yZXNldChjYW0p
OworCW1vZHVsZV9wdXQoY2FtLT5zZGV2LT5tb2R1bGUpOworCitvdXRfdHJ5X21vZHVsZV9nZXQ6
CisJa2ZyZWUoZmgpOworCisJcmV0dXJuIC1FTk9ERVY7Cit9CisKK3N0YXRpYyBpbnQgb21hcDI0
eHhjYW1fcmVsZWFzZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKK3sK
KwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZmggKmZoID0gZmlsZS0+cHJpdmF0ZV9kYXRhOworCXN0cnVj
dCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbSA9IGZoLT5jYW07CisKKwlhdG9taWNfaW5jKCZjYW0t
PnJlc2V0X2Rpc2FibGUpOworCisJZmx1c2hfc2NoZWR1bGVkX3dvcmsoKTsKKworCS8qIHN0b3Ag
c3RyZWFtaW5nIGNhcHR1cmUgKi8KKwl2aWRlb2J1Zl9zdHJlYW1vZmYoJmZoLT52YnEpOworCisJ
bXV0ZXhfbG9jaygmY2FtLT5tdXRleCk7CisJaWYgKGNhbS0+c3RyZWFtaW5nID09IGZpbGUpIHsK
KwkJY2FtLT5zdHJlYW1pbmcgPSBOVUxMOworCQltdXRleF91bmxvY2soJmNhbS0+bXV0ZXgpOwor
CQlzeXNmc19ub3RpZnkoJmNhbS0+ZGV2LT5rb2JqLCBOVUxMLCAic3RyZWFtaW5nIik7CisJfSBl
bHNlIHsKKwkJbXV0ZXhfdW5sb2NrKCZjYW0tPm11dGV4KTsKKwl9CisKKwlhdG9taWNfZGVjKCZj
YW0tPnJlc2V0X2Rpc2FibGUpOworCisJb21hcDI0eHhjYW1fdmJxX2ZyZWVfbW1hcF9idWZmZXJz
KCZmaC0+dmJxKTsKKworCS8qCisJICogTWFrZSBzdXJlIHRoZSByZXNldCB3b3JrIHdlIG1pZ2h0
IGhhdmUgc2NoZWR1bGVkIGlzIG5vdAorCSAqIHBlbmRpbmchIEl0IG1heSBiZSBydW4gKm9ubHkq
IGlmIHdlIGhhdmUgdXNlcnMuIChBbmQgaXQgbWF5CisJICogbm90IGJlIHNjaGVkdWxlZCBhbnlt
b3JlIHNpbmNlIHN0cmVhbWluZyBpcyBhbHJlYWR5CisJICogZGlzYWJsZWQuKQorCSAqLworCWZs
dXNoX3NjaGVkdWxlZF93b3JrKCk7CisKKwltdXRleF9sb2NrKCZjYW0tPm11dGV4KTsKKwlpZiAo
YXRvbWljX2RlY19yZXR1cm4oJmNhbS0+dXNlcnMpID09IDApIHsKKwkJb21hcDI0eHhjYW1fc2Vu
c29yX2Rpc2FibGUoY2FtKTsKKwkJb21hcDI0eHhjYW1fcG93ZXJvbl9yZXNldChjYW0pOworCX0K
KwltdXRleF91bmxvY2soJmNhbS0+bXV0ZXgpOworCisJZmlsZS0+cHJpdmF0ZV9kYXRhID0gTlVM
TDsKKworCW1vZHVsZV9wdXQoY2FtLT5zZGV2LT5tb2R1bGUpOworCWtmcmVlKGZoKTsKKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyBvbWFwMjR4eGNhbV9m
b3BzID0geworCS5sbHNlZWsJID0gbm9fbGxzZWVrLAorCS5pb2N0bAkgPSB2aWRlb19pb2N0bDIs
CisJLnBvbGwJID0gb21hcDI0eHhjYW1fcG9sbCwKKwkubW1hcAkgPSBvbWFwMjR4eGNhbV9tbWFw
LAorCS5vcGVuCSA9IG9tYXAyNHh4Y2FtX29wZW4sCisJLnJlbGVhc2UgPSBvbWFwMjR4eGNhbV9y
ZWxlYXNlLAorfTsKKworLyoKKyAqCisgKiBQb3dlciBtYW5hZ2VtZW50LgorICoKKyAqLworCisj
aWZkZWYgQ09ORklHX1BNCitzdGF0aWMgaW50IG9tYXAyNHh4Y2FtX3N1c3BlbmQoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldiwgcG1fbWVzc2FnZV90IHN0YXRlKQoreworCXN0cnVjdCBvbWFw
MjR4eGNhbV9kZXZpY2UgKmNhbSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCisJaWYg
KGF0b21pY19yZWFkKCZjYW0tPnVzZXJzKSA9PSAwKQorCQlyZXR1cm4gMDsKKworCWlmICghYXRv
bWljX3JlYWQoJmNhbS0+cmVzZXRfZGlzYWJsZSkpCisJCW9tYXAyNHh4Y2FtX2NhcHR1cmVfc3Rv
cChjYW0pOworCisJb21hcDI0eHhjYW1fc2Vuc29yX2Rpc2FibGUoY2FtKTsKKwlvbWFwMjR4eGNh
bV9wb3dlcm9uX3Jlc2V0KGNhbSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBvbWFw
MjR4eGNhbV9yZXN1bWUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3Qg
b21hcDI0eHhjYW1fZGV2aWNlICpjYW0gPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwor
CWlmIChhdG9taWNfcmVhZCgmY2FtLT51c2VycykgPT0gMCkKKwkJcmV0dXJuIDA7CisKKwlvbWFw
MjR4eGNhbV9od2luaXQoY2FtKTsKKwlvbWFwMjR4eGNhbV9zZW5zb3JfZW5hYmxlKGNhbSk7CisK
KwlpZiAoIWF0b21pY19yZWFkKCZjYW0tPnJlc2V0X2Rpc2FibGUpKQorCQlvbWFwMjR4eGNhbV9j
YXB0dXJlX2NvbnQoY2FtKTsKKworCXJldHVybiAwOworfQorI2VuZGlmIC8qIENPTkZJR19QTSAq
LworCitzdGF0aWMgY29uc3Qgc3RydWN0IHY0bDJfaW9jdGxfb3BzIG9tYXAyNHh4Y2FtX2lvY3Rs
X2ZvcHMgPSB7CisJLnZpZGlvY19xdWVyeWNhcAk9IHZpZGlvY19xdWVyeWNhcCwKKwkudmlkaW9j
X2VudW1fZm10X3ZpZF9jYXAJPSB2aWRpb2NfZW51bV9mbXRfdmlkX2NhcCwKKwkudmlkaW9jX2df
Zm10X3ZpZF9jYXAJPSB2aWRpb2NfZ19mbXRfdmlkX2NhcCwKKwkudmlkaW9jX3NfZm10X3ZpZF9j
YXAJPSB2aWRpb2Nfc19mbXRfdmlkX2NhcCwKKwkudmlkaW9jX3RyeV9mbXRfdmlkX2NhcAk9IHZp
ZGlvY190cnlfZm10X3ZpZF9jYXAsCisJLnZpZGlvY19yZXFidWZzCQk9IHZpZGlvY19yZXFidWZz
LAorCS52aWRpb2NfcXVlcnlidWYJPSB2aWRpb2NfcXVlcnlidWYsCisJLnZpZGlvY19xYnVmCQk9
IHZpZGlvY19xYnVmLAorCS52aWRpb2NfZHFidWYJCT0gdmlkaW9jX2RxYnVmLAorCS52aWRpb2Nf
c3RyZWFtb24JPSB2aWRpb2Nfc3RyZWFtb24sCisJLnZpZGlvY19zdHJlYW1vZmYJPSB2aWRpb2Nf
c3RyZWFtb2ZmLAorCS52aWRpb2NfZW51bV9pbnB1dAk9IHZpZGlvY19lbnVtX2lucHV0LAorCS52
aWRpb2NfZ19pbnB1dAkJPSB2aWRpb2NfZ19pbnB1dCwKKwkudmlkaW9jX3NfaW5wdXQJCT0gdmlk
aW9jX3NfaW5wdXQsCisJLnZpZGlvY19xdWVyeWN0cmwJPSB2aWRpb2NfcXVlcnljdHJsLAorCS52
aWRpb2NfZ19jdHJsCQk9IHZpZGlvY19nX2N0cmwsCisJLnZpZGlvY19zX2N0cmwJCT0gdmlkaW9j
X3NfY3RybCwKKwkudmlkaW9jX2dfcGFybQkJPSB2aWRpb2NfZ19wYXJtLAorCS52aWRpb2Nfc19w
YXJtCQk9IHZpZGlvY19zX3Bhcm0sCit9OworCisvKgorICoKKyAqIENhbWVyYSBkZXZpY2UgKGku
ZS4gL2Rldi92aWRlbykuCisgKgorICovCisKK3N0YXRpYyBpbnQgb21hcDI0eHhjYW1fZGV2aWNl
X3JlZ2lzdGVyKHN0cnVjdCB2NGwyX2ludF9kZXZpY2UgKnMpCit7CisJc3RydWN0IG9tYXAyNHh4
Y2FtX2RldmljZSAqY2FtID0gcy0+dS5zbGF2ZS0+bWFzdGVyLT5wcml2OworCXN0cnVjdCB2aWRl
b19kZXZpY2UgKnZmZDsKKwlpbnQgcnZhbDsKKworCS8qIFdlIGFscmVhZHkgaGF2ZSBhIHNsYXZl
LiAqLworCWlmIChjYW0tPnNkZXYpCisJCXJldHVybiAtRUJVU1k7CisKKwljYW0tPnNkZXYgPSBz
OworCisJaWYgKGRldmljZV9jcmVhdGVfZmlsZShjYW0tPmRldiwgJmRldl9hdHRyX3N0cmVhbWlu
ZykgIT0gMCkgeworCQlkZXZfZXJyKGNhbS0+ZGV2LCAiY291bGQgbm90IHJlZ2lzdGVyIHN5c2Zz
IGVudHJ5XG4iKTsKKwkJcnZhbCA9IC1FQlVTWTsKKwkJZ290byBlcnI7CisJfQorCisJLyogaW5p
dGlhbGl6ZSB0aGUgdmlkZW9fZGV2aWNlIHN0cnVjdCAqLworCXZmZCA9IGNhbS0+dmZkID0gdmlk
ZW9fZGV2aWNlX2FsbG9jKCk7CisJaWYgKCF2ZmQpIHsKKwkJZGV2X2VycihjYW0tPmRldiwgImNv
dWxkIG5vdCBhbGxvY2F0ZSB2aWRlbyBkZXZpY2Ugc3RydWN0XG4iKTsKKwkJcnZhbCA9IC1FTk9N
RU07CisJCWdvdG8gZXJyOworCX0KKwl2ZmQtPnJlbGVhc2UgPSB2aWRlb19kZXZpY2VfcmVsZWFz
ZTsKKworCXZmZC0+cGFyZW50ID0gY2FtLT5kZXY7CisKKwlzdHJsY3B5KHZmZC0+bmFtZSwgQ0FN
X05BTUUsIHNpemVvZih2ZmQtPm5hbWUpKTsKKwl2ZmQtPnZmbF90eXBlCQkgPSBWSURfVFlQRV9D
QVBUVVJFIHwgVklEX1RZUEVfQ0hST01BS0VZOworCXZmZC0+Zm9wcwkJID0gJm9tYXAyNHh4Y2Ft
X2ZvcHM7CisJdmZkLT5taW5vcgkJID0gLTE7CisJdmZkLT5pb2N0bF9vcHMJCSA9ICZvbWFwMjR4
eGNhbV9pb2N0bF9mb3BzOworCisJb21hcDI0eHhjYW1faHdpbml0KGNhbSk7CisKKwlydmFsID0g
b21hcDI0eHhjYW1fc2Vuc29yX2luaXQoY2FtKTsKKwlpZiAocnZhbCkKKwkJZ290byBlcnI7CisK
KwlpZiAodmlkZW9fcmVnaXN0ZXJfZGV2aWNlKHZmZCwgVkZMX1RZUEVfR1JBQkJFUiwgdmlkZW9f
bnIpIDwgMCkgeworCQlkZXZfZXJyKGNhbS0+ZGV2LCAiY291bGQgbm90IHJlZ2lzdGVyIFY0TCBk
ZXZpY2VcbiIpOworCQl2ZmQtPm1pbm9yID0gLTE7CisJCXJ2YWwgPSAtRUJVU1k7CisJCWdvdG8g
ZXJyOworCX0KKworCW9tYXAyNHh4Y2FtX3Bvd2Vyb25fcmVzZXQoY2FtKTsKKworCWRldl9pbmZv
KGNhbS0+ZGV2LCAicmVnaXN0ZXJlZCBkZXZpY2UgdmlkZW8lZFxuIiwgdmZkLT5taW5vcik7CisK
KwlyZXR1cm4gMDsKKworZXJyOgorCW9tYXAyNHh4Y2FtX2RldmljZV91bnJlZ2lzdGVyKHMpOwor
CisJcmV0dXJuIHJ2YWw7Cit9CisKK3N0YXRpYyB2b2lkIG9tYXAyNHh4Y2FtX2RldmljZV91bnJl
Z2lzdGVyKHN0cnVjdCB2NGwyX2ludF9kZXZpY2UgKnMpCit7CisJc3RydWN0IG9tYXAyNHh4Y2Ft
X2RldmljZSAqY2FtID0gcy0+dS5zbGF2ZS0+bWFzdGVyLT5wcml2OworCisJb21hcDI0eHhjYW1f
c2Vuc29yX2V4aXQoY2FtKTsKKworCWlmIChjYW0tPnZmZCkgeworCQlpZiAoY2FtLT52ZmQtPm1p
bm9yID09IC0xKSB7CisJCQkvKgorCQkJICogVGhlIGRldmljZSB3YXMgbmV2ZXIgcmVnaXN0ZXJl
ZCwgc28gcmVsZWFzZSB0aGUKKwkJCSAqIHZpZGVvX2RldmljZSBzdHJ1Y3QgZGlyZWN0bHkuCisJ
CQkgKi8KKwkJCXZpZGVvX2RldmljZV9yZWxlYXNlKGNhbS0+dmZkKTsKKwkJfSBlbHNlIHsKKwkJ
CS8qCisJCQkgKiBUaGUgdW5yZWdpc3RlciBmdW5jdGlvbiB3aWxsIHJlbGVhc2UgdGhlCisJCQkg
KiB2aWRlb19kZXZpY2Ugc3RydWN0IGFzIHdlbGwgYXMKKwkJCSAqIHVucmVnaXN0ZXJpbmcgaXQu
CisJCQkgKi8KKwkJCXZpZGVvX3VucmVnaXN0ZXJfZGV2aWNlKGNhbS0+dmZkKTsKKwkJfQorCQlj
YW0tPnZmZCA9IE5VTEw7CisJfQorCisJZGV2aWNlX3JlbW92ZV9maWxlKGNhbS0+ZGV2LCAmZGV2
X2F0dHJfc3RyZWFtaW5nKTsKKworCWNhbS0+c2RldiA9IE5VTEw7Cit9CisKK3N0YXRpYyBzdHJ1
Y3QgdjRsMl9pbnRfbWFzdGVyIG9tYXAyNHh4Y2FtX21hc3RlciA9IHsKKwkuYXR0YWNoID0gb21h
cDI0eHhjYW1fZGV2aWNlX3JlZ2lzdGVyLAorCS5kZXRhY2ggPSBvbWFwMjR4eGNhbV9kZXZpY2Vf
dW5yZWdpc3RlciwKK307CisKK3N0YXRpYyBzdHJ1Y3QgdjRsMl9pbnRfZGV2aWNlIG9tYXAyNHh4
Y2FtID0geworCS5tb2R1bGUJPSBUSElTX01PRFVMRSwKKwkubmFtZQk9IENBTV9OQU1FLAorCS50
eXBlCT0gdjRsMl9pbnRfdHlwZV9tYXN0ZXIsCisJLnUJPSB7CisJCS5tYXN0ZXIgPSAmb21hcDI0
eHhjYW1fbWFzdGVyCisJfSwKK307CisKKy8qCisgKgorICogRHJpdmVyIGluaXRpYWxpc2F0aW9u
IGFuZCBkZWluaXRpYWxpc2F0aW9uLgorICoKKyAqLworCitzdGF0aWMgaW50IF9faW5pdCBvbWFw
MjR4eGNhbV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQoreworCXN0cnVjdCBv
bWFwMjR4eGNhbV9kZXZpY2UgKmNhbTsKKwlzdHJ1Y3QgcmVzb3VyY2UgKm1lbTsKKwlpbnQgaXJx
OworCisJY2FtID0ga3phbGxvYyhzaXplb2YoKmNhbSksIEdGUF9LRVJORUwpOworCWlmICghY2Ft
KSB7CisJCWRldl9lcnIoJnBkZXYtPmRldiwgImNvdWxkIG5vdCBhbGxvY2F0ZSBtZW1vcnlcbiIp
OworCQlnb3RvIGVycjsKKwl9CisKKwlwbGF0Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2LCBjYW0pOwor
CisJY2FtLT5kZXYgPSAmcGRldi0+ZGV2OworCisJLyoKKwkgKiBJbXBvc2UgYSBsb3dlciBsaW1p
dCBvbiB0aGUgYW1vdW50IG9mIG1lbW9yeSBhbGxvY2F0ZWQgZm9yCisJICogY2FwdHVyZS4gV2Ug
cmVxdWlyZSBhdCBsZWFzdCBlbm91Z2ggbWVtb3J5IHRvIGRvdWJsZS1idWZmZXIKKwkgKiBRVkdB
ICgzMDBLQikuCisJICovCisJaWYgKGNhcHR1cmVfbWVtIDwgMzIwICogMjQwICogMiAqIDIpCisJ
CWNhcHR1cmVfbWVtID0gMzIwICogMjQwICogMiAqIDI7CisJY2FtLT5jYXB0dXJlX21lbSA9IGNh
cHR1cmVfbWVtOworCisJLyogcmVxdWVzdCB0aGUgbWVtIHJlZ2lvbiBmb3IgdGhlIGNhbWVyYSBy
ZWdpc3RlcnMgKi8KKwltZW0gPSBwbGF0Zm9ybV9nZXRfcmVzb3VyY2UocGRldiwgSU9SRVNPVVJD
RV9NRU0sIDApOworCWlmICghbWVtKSB7CisJCWRldl9lcnIoY2FtLT5kZXYsICJubyBtZW0gcmVz
b3VyY2U/XG4iKTsKKwkJZ290byBlcnI7CisJfQorCWlmICghcmVxdWVzdF9tZW1fcmVnaW9uKG1l
bS0+c3RhcnQsIChtZW0tPmVuZCAtIG1lbS0+c3RhcnQpICsgMSwKKwkJCQlwZGV2LT5uYW1lKSkg
eworCQlkZXZfZXJyKGNhbS0+ZGV2LAorCQkJImNhbm5vdCByZXNlcnZlIGNhbWVyYSByZWdpc3Rl
ciBJL08gcmVnaW9uXG4iKTsKKwkJZ290byBlcnI7CisJfQorCWNhbS0+bW1pb19iYXNlX3BoeXMg
PSBtZW0tPnN0YXJ0OworCWNhbS0+bW1pb19zaXplID0gKG1lbS0+ZW5kIC0gbWVtLT5zdGFydCkg
KyAxOworCisJLyogbWFwIHRoZSByZWdpb24gKi8KKwljYW0tPm1taW9fYmFzZSA9ICh1bnNpZ25l
ZCBsb25nKQorCQlpb3JlbWFwX25vY2FjaGUoY2FtLT5tbWlvX2Jhc2VfcGh5cywgY2FtLT5tbWlv
X3NpemUpOworCWlmICghY2FtLT5tbWlvX2Jhc2UpIHsKKwkJZGV2X2VycihjYW0tPmRldiwgImNh
bm5vdCBtYXAgY2FtZXJhIHJlZ2lzdGVyIEkvTyByZWdpb25cbiIpOworCQlnb3RvIGVycjsKKwl9
CisKKwlpcnEgPSBwbGF0Zm9ybV9nZXRfaXJxKHBkZXYsIDApOworCWlmIChpcnEgPD0gMCkgewor
CQlkZXZfZXJyKGNhbS0+ZGV2LCAibm8gaXJxIGZvciBjYW1lcmE/XG4iKTsKKwkJZ290byBlcnI7
CisJfQorCisJLyogaW5zdGFsbCB0aGUgaW50ZXJydXB0IHNlcnZpY2Ugcm91dGluZSAqLworCWlm
IChyZXF1ZXN0X2lycShpcnEsIG9tYXAyNHh4Y2FtX2lzciwgMCwgQ0FNX05BTUUsIGNhbSkpIHsK
KwkJZGV2X2VycihjYW0tPmRldiwKKwkJCSJjb3VsZCBub3QgaW5zdGFsbCBpbnRlcnJ1cHQgc2Vy
dmljZSByb3V0aW5lXG4iKTsKKwkJZ290byBlcnI7CisJfQorCWNhbS0+aXJxID0gaXJxOworCisJ
aWYgKG9tYXAyNHh4Y2FtX2Nsb2NrX2dldChjYW0pKQorCQlnb3RvIGVycjsKKworCUlOSVRfV09S
SygmY2FtLT5zZW5zb3JfcmVzZXRfd29yaywgb21hcDI0eHhjYW1fc2Vuc29yX3Jlc2V0X3dvcmsp
OworCisJbXV0ZXhfaW5pdCgmY2FtLT5tdXRleCk7CisJc3Bpbl9sb2NrX2luaXQoJmNhbS0+Y29y
ZV9lbmFibGVfZGlzYWJsZV9sb2NrKTsKKworCW9tYXAyNHh4Y2FtX3NnZG1hX2luaXQoJmNhbS0+
c2dkbWEsCisJCQkgICAgICAgY2FtLT5tbWlvX2Jhc2UgKyBDQU1ETUFfUkVHX09GRlNFVCwKKwkJ
CSAgICAgICBvbWFwMjR4eGNhbV9zdGFsbGVkX2RtYV9yZXNldCwKKwkJCSAgICAgICAodW5zaWdu
ZWQgbG9uZyljYW0pOworCisJb21hcDI0eHhjYW0ucHJpdiA9IGNhbTsKKworCWlmICh2NGwyX2lu
dF9kZXZpY2VfcmVnaXN0ZXIoJm9tYXAyNHh4Y2FtKSkKKwkJZ290byBlcnI7CisKKwlyZXR1cm4g
MDsKKworZXJyOgorCW9tYXAyNHh4Y2FtX3JlbW92ZShwZGV2KTsKKwlyZXR1cm4gLUVOT0RFVjsK
K30KKworc3RhdGljIGludCBvbWFwMjR4eGNhbV9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKK3sKKwlzdHJ1Y3Qgb21hcDI0eHhjYW1fZGV2aWNlICpjYW0gPSBwbGF0Zm9ybV9n
ZXRfZHJ2ZGF0YShwZGV2KTsKKworCWlmICghY2FtKQorCQlyZXR1cm4gMDsKKworCWlmIChvbWFw
MjR4eGNhbS5wcml2ICE9IE5VTEwpCisJCXY0bDJfaW50X2RldmljZV91bnJlZ2lzdGVyKCZvbWFw
MjR4eGNhbSk7CisJb21hcDI0eHhjYW0ucHJpdiA9IE5VTEw7CisKKwlvbWFwMjR4eGNhbV9jbG9j
a19wdXQoY2FtKTsKKworCWlmIChjYW0tPmlycSkgeworCQlmcmVlX2lycShjYW0tPmlycSwgY2Ft
KTsKKwkJY2FtLT5pcnEgPSAwOworCX0KKworCWlmIChjYW0tPm1taW9fYmFzZSkgeworCQlpb3Vu
bWFwKCh2b2lkICopY2FtLT5tbWlvX2Jhc2UpOworCQljYW0tPm1taW9fYmFzZSA9IDA7CisJfQor
CisJaWYgKGNhbS0+bW1pb19iYXNlX3BoeXMpIHsKKwkJcmVsZWFzZV9tZW1fcmVnaW9uKGNhbS0+
bW1pb19iYXNlX3BoeXMsIGNhbS0+bW1pb19zaXplKTsKKwkJY2FtLT5tbWlvX2Jhc2VfcGh5cyA9
IDA7CisJfQorCisJa2ZyZWUoY2FtKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgc3RydWN0
IHBsYXRmb3JtX2RyaXZlciBvbWFwMjR4eGNhbV9kcml2ZXIgPSB7CisJLnByb2JlCSA9IG9tYXAy
NHh4Y2FtX3Byb2JlLAorCS5yZW1vdmUJID0gb21hcDI0eHhjYW1fcmVtb3ZlLAorI2lmZGVmIENP
TkZJR19QTQorCS5zdXNwZW5kID0gb21hcDI0eHhjYW1fc3VzcGVuZCwKKwkucmVzdW1lCSA9IG9t
YXAyNHh4Y2FtX3Jlc3VtZSwKKyNlbmRpZgorCS5kcml2ZXIJID0geworCQkubmFtZSA9IENBTV9O
QU1FLAorCQkub3duZXIgPSBUSElTX01PRFVMRSwKKwl9LAorfTsKKworLyoKKyAqCisgKiBNb2R1
bGUgaW5pdGlhbGlzYXRpb24gYW5kIGRlaW5pdGlhbGlzYXRpb24KKyAqCisgKi8KKworc3RhdGlj
IGludCBfX2luaXQgb21hcDI0eHhjYW1faW5pdCh2b2lkKQoreworCXJldHVybiBwbGF0Zm9ybV9k
cml2ZXJfcmVnaXN0ZXIoJm9tYXAyNHh4Y2FtX2RyaXZlcik7Cit9CisKK3N0YXRpYyB2b2lkIF9f
ZXhpdCBvbWFwMjR4eGNhbV9jbGVhbnVwKHZvaWQpCit7CisJcGxhdGZvcm1fZHJpdmVyX3VucmVn
aXN0ZXIoJm9tYXAyNHh4Y2FtX2RyaXZlcik7Cit9CisKK01PRFVMRV9BVVRIT1IoIlNha2FyaSBB
aWx1cyA8c2FrYXJpLmFpbHVzQG5va2lhLmNvbT4iKTsKK01PRFVMRV9ERVNDUklQVElPTigiT01B
UDI0eHggVmlkZW8gZm9yIExpbnV4IGNhbWVyYSBkcml2ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJH
UEwiKTsKK21vZHVsZV9wYXJhbSh2aWRlb19uciwgaW50LCAwKTsKK01PRFVMRV9QQVJNX0RFU0Mo
dmlkZW9fbnIsCisJCSAiTWlub3IgbnVtYmVyIGZvciB2aWRlbyBkZXZpY2UgKC0xID09PiBhdXRv
IGFzc2lnbikiKTsKK21vZHVsZV9wYXJhbShjYXB0dXJlX21lbSwgaW50LCAwKTsKK01PRFVMRV9Q
QVJNX0RFU0MoY2FwdHVyZV9tZW0sICJNYXhpbXVtIGFtb3VudCBvZiBtZW1vcnkgZm9yIGNhcHR1
cmUgIgorCQkgImJ1ZmZlcnMgKGRlZmF1bHQgNDgwMGtpQikiKTsKKworbW9kdWxlX2luaXQob21h
cDI0eHhjYW1faW5pdCk7Cittb2R1bGVfZXhpdChvbWFwMjR4eGNhbV9jbGVhbnVwKTsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvbWVkaWEvdmlkZW8vb21hcDI0eHhjYW0uaCBiL2RyaXZlcnMvbWVkaWEv
dmlkZW8vb21hcDI0eHhjYW0uaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4y
Y2U2N2Y1Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9tZWRpYS92aWRlby9vbWFwMjR4eGNh
bS5oCkBAIC0wLDAgKzEsNTkzIEBACisvKgorICogZHJpdmVycy9tZWRpYS92aWRlby9vbWFwMjR4
eGNhbS5oCisgKgorICogQ29weXJpZ2h0IChDKSAyMDA0IE1vbnRhVmlzdGEgU29mdHdhcmUsIElu
Yy4KKyAqIENvcHlyaWdodCAoQykgMjAwNCBUZXhhcyBJbnN0cnVtZW50cy4KKyAqIENvcHlyaWdo
dCAoQykgMjAwNyBOb2tpYSBDb3Jwb3JhdGlvbi4KKyAqCisgKiBDb250YWN0OiBTYWthcmkgQWls
dXMgPHNha2FyaS5haWx1c0Bub2tpYS5jb20+CisgKgorICogQmFzZWQgb24gY29kZSBmcm9tIEFu
ZHkgTG93ZSA8c291cmNlQG12aXN0YS5jb20+LgorICoKKyAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVl
IHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IKKyAqIG1vZGlmeSBpdCB1
bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCisgKiB2ZXJz
aW9uIDIgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uCisgKgor
ICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBi
ZSB1c2VmdWwsIGJ1dAorICogV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUg
aW1wbGllZCB3YXJyYW50eSBvZgorICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEg
UEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUKKyAqIEdlbmVyYWwgUHVibGljIExpY2Vu
c2UgZm9yIG1vcmUgZGV0YWlscy4KKyAqCisgKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBj
b3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQorICogYWxvbmcgd2l0aCB0aGlz
IHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmUKKyAqIEZvdW5kYXRp
b24sIEluYy4sIDUxIEZyYW5rbGluIFN0LCBGaWZ0aCBGbG9vciwgQm9zdG9uLCBNQQorICogMDIx
MTAtMTMwMSBVU0EKKyAqLworCisjaWZuZGVmIE9NQVAyNFhYQ0FNX0gKKyNkZWZpbmUgT01BUDI0
WFhDQU1fSAorCisjaW5jbHVkZSA8bWVkaWEvdmlkZW9idWYtZG1hLXNnLmg+CisjaW5jbHVkZSA8
bWVkaWEvdjRsMi1pbnQtZGV2aWNlLmg+CisKKy8qCisgKgorICogR2VuZXJhbCBkcml2ZXIgcmVs
YXRlZCBkZWZpbml0aW9ucy4KKyAqCisgKi8KKworI2RlZmluZSBDQU1fTkFNRQkJCQkib21hcDI0
eHhjYW0iCisKKyNkZWZpbmUgQ0FNX01DTEsJCQkJOTYwMDAwMDAKKworLyogbnVtYmVyIG9mIGJ5
dGVzIHRyYW5zZmVycmVkIHBlciBETUEgcmVxdWVzdCAqLworI2RlZmluZSBETUFfVEhSRVNIT0xE
CQkJCTMyCisKKy8qCisgKiBOVU1fQ0FNRE1BX0NIQU5ORUxTIGlzIHRoZSBudW1iZXIgb2YgbG9n
aWNhbCBjaGFubmVscyBwcm92aWRlZCBieQorICogdGhlIGNhbWVyYSBETUEgY29udHJvbGxlci4K
KyAqLworI2RlZmluZSBOVU1fQ0FNRE1BX0NIQU5ORUxTCQkJNAorCisvKgorICogTlVNX1NHX0RN
QSBpcyB0aGUgbnVtYmVyIG9mIHNjYXR0ZXItZ2F0aGVyIERNQSB0cmFuc2ZlcnMgdGhhdCBjYW4K
KyAqIGJlIHF1ZXVlZC4gKFdlIGRvbid0IGhhdmUgYW55IG92ZXJsYXkgc2dsaXN0cyBub3cuKQor
ICovCisjZGVmaW5lIE5VTV9TR19ETUEJCQkJKFZJREVPX01BWF9GUkFNRSkKKworLyoKKyAqCisg
KiBSZWdpc3RlciBkZWZpbml0aW9ucy4KKyAqCisgKi8KKworLyogc3Vic3lzdGVtIHJlZ2lzdGVy
IGJsb2NrIG9mZnNldHMgKi8KKyNkZWZpbmUgQ0NfUkVHX09GRlNFVAkJCQkweDAwMDAwNDAwCisj
ZGVmaW5lIENBTURNQV9SRUdfT0ZGU0VUCQkJMHgwMDAwMDgwMAorI2RlZmluZSBDQU1NTVVfUkVH
X09GRlNFVAkJCTB4MDAwMDBDMDAKKworLyogZGVmaW5lIGNhbWVyYSBzdWJzeXN0ZW0gcmVnaXN0
ZXIgb2Zmc2V0cyAqLworI2RlZmluZSBDQU1fUkVWSVNJT04JCQkJMHgwMDAKKyNkZWZpbmUgQ0FN
X1NZU0NPTkZJRwkJCQkweDAxMAorI2RlZmluZSBDQU1fU1lTU1RBVFVTCQkJCTB4MDE0CisjZGVm
aW5lIENBTV9JUlFTVEFUVVMJCQkJMHgwMTgKKyNkZWZpbmUgQ0FNX0dQTwkJCQkJMHgwNDAKKyNk
ZWZpbmUgQ0FNX0dQSQkJCQkJMHgwNTAKKworLyogZGVmaW5lIGNhbWVyYSBjb3JlIHJlZ2lzdGVy
IG9mZnNldHMgKi8KKyNkZWZpbmUgQ0NfUkVWSVNJT04JCQkJMHgwMDAKKyNkZWZpbmUgQ0NfU1lT
Q09ORklHCQkJCTB4MDEwCisjZGVmaW5lIENDX1NZU1NUQVRVUwkJCQkweDAxNAorI2RlZmluZSBD
Q19JUlFTVEFUVVMJCQkJMHgwMTgKKyNkZWZpbmUgQ0NfSVJRRU5BQkxFCQkJCTB4MDFDCisjZGVm
aW5lIENDX0NUUkwJCQkJCTB4MDQwCisjZGVmaW5lIENDX0NUUkxfRE1BCQkJCTB4MDQ0CisjZGVm
aW5lIENDX0NUUkxfWENMSwkJCQkweDA0OAorI2RlZmluZSBDQ19GSUZPREFUQQkJCQkweDA0Qwor
I2RlZmluZSBDQ19URVNUCQkJCQkweDA1MAorI2RlZmluZSBDQ19HRU5QQVIJCQkJMHgwNTQKKyNk
ZWZpbmUgQ0NfQ0NQRlNDUgkJCQkweDA1OAorI2RlZmluZSBDQ19DQ1BGRUNSCQkJCTB4MDVDCisj
ZGVmaW5lIENDX0NDUExTQ1IJCQkJMHgwNjAKKyNkZWZpbmUgQ0NfQ0NQTEVDUgkJCQkweDA2NAor
I2RlZmluZSBDQ19DQ1BERlIJCQkJMHgwNjgKKworLyogZGVmaW5lIGNhbWVyYSBkbWEgcmVnaXN0
ZXIgb2Zmc2V0cyAqLworI2RlZmluZSBDQU1ETUFfUkVWSVNJT04JCQkJMHgwMDAKKyNkZWZpbmUg
Q0FNRE1BX0lSUVNUQVRVU19MMAkJCTB4MDA4CisjZGVmaW5lIENBTURNQV9JUlFTVEFUVVNfTDEJ
CQkweDAwQworI2RlZmluZSBDQU1ETUFfSVJRU1RBVFVTX0wyCQkJMHgwMTAKKyNkZWZpbmUgQ0FN
RE1BX0lSUVNUQVRVU19MMwkJCTB4MDE0CisjZGVmaW5lIENBTURNQV9JUlFFTkFCTEVfTDAJCQkw
eDAxOAorI2RlZmluZSBDQU1ETUFfSVJRRU5BQkxFX0wxCQkJMHgwMUMKKyNkZWZpbmUgQ0FNRE1B
X0lSUUVOQUJMRV9MMgkJCTB4MDIwCisjZGVmaW5lIENBTURNQV9JUlFFTkFCTEVfTDMJCQkweDAy
NAorI2RlZmluZSBDQU1ETUFfU1lTU1RBVFVTCQkJMHgwMjgKKyNkZWZpbmUgQ0FNRE1BX09DUF9T
WVNDT05GSUcJCQkweDAyQworI2RlZmluZSBDQU1ETUFfQ0FQU18wCQkJCTB4MDY0CisjZGVmaW5l
IENBTURNQV9DQVBTXzIJCQkJMHgwNkMKKyNkZWZpbmUgQ0FNRE1BX0NBUFNfMwkJCQkweDA3MAor
I2RlZmluZSBDQU1ETUFfQ0FQU180CQkJCTB4MDc0CisjZGVmaW5lIENBTURNQV9HQ1IJCQkJMHgw
NzgKKyNkZWZpbmUgQ0FNRE1BX0NDUihuKQkJCQkoMHgwODAgKyAobikqMHg2MCkKKyNkZWZpbmUg
Q0FNRE1BX0NMTktfQ1RSTChuKQkJCSgweDA4NCArIChuKSoweDYwKQorI2RlZmluZSBDQU1ETUFf
Q0lDUihuKQkJCQkoMHgwODggKyAobikqMHg2MCkKKyNkZWZpbmUgQ0FNRE1BX0NTUihuKQkJCQko
MHgwOEMgKyAobikqMHg2MCkKKyNkZWZpbmUgQ0FNRE1BX0NTRFAobikJCQkJKDB4MDkwICsgKG4p
KjB4NjApCisjZGVmaW5lIENBTURNQV9DRU4obikJCQkJKDB4MDk0ICsgKG4pKjB4NjApCisjZGVm
aW5lIENBTURNQV9DRk4obikJCQkJKDB4MDk4ICsgKG4pKjB4NjApCisjZGVmaW5lIENBTURNQV9D
U1NBKG4pCQkJCSgweDA5QyArIChuKSoweDYwKQorI2RlZmluZSBDQU1ETUFfQ0RTQShuKQkJCQko
MHgwQTAgKyAobikqMHg2MCkKKyNkZWZpbmUgQ0FNRE1BX0NTRUkobikJCQkJKDB4MEE0ICsgKG4p
KjB4NjApCisjZGVmaW5lIENBTURNQV9DU0ZJKG4pCQkJCSgweDBBOCArIChuKSoweDYwKQorI2Rl
ZmluZSBDQU1ETUFfQ0RFSShuKQkJCQkoMHgwQUMgKyAobikqMHg2MCkKKyNkZWZpbmUgQ0FNRE1B
X0NERkkobikJCQkJKDB4MEIwICsgKG4pKjB4NjApCisjZGVmaW5lIENBTURNQV9DU0FDKG4pCQkJ
CSgweDBCNCArIChuKSoweDYwKQorI2RlZmluZSBDQU1ETUFfQ0RBQyhuKQkJCQkoMHgwQjggKyAo
bikqMHg2MCkKKyNkZWZpbmUgQ0FNRE1BX0NDRU4obikJCQkJKDB4MEJDICsgKG4pKjB4NjApCisj
ZGVmaW5lIENBTURNQV9DQ0ZOKG4pCQkJCSgweDBDMCArIChuKSoweDYwKQorI2RlZmluZSBDQU1E
TUFfQ09MT1IobikJCQkJKDB4MEM0ICsgKG4pKjB4NjApCisKKy8qIGRlZmluZSBjYW1lcmEgbW11
IHJlZ2lzdGVyIG9mZnNldHMgKi8KKyNkZWZpbmUgQ0FNTU1VX1JFVklTSU9OCQkJCTB4MDAwCisj
ZGVmaW5lIENBTU1NVV9TWVNDT05GSUcJCQkweDAxMAorI2RlZmluZSBDQU1NTVVfU1lTU1RBVFVT
CQkJMHgwMTQKKyNkZWZpbmUgQ0FNTU1VX0lSUVNUQVRVUwkJCTB4MDE4CisjZGVmaW5lIENBTU1N
VV9JUlFFTkFCTEUJCQkweDAxQworI2RlZmluZSBDQU1NTVVfV0FMS0lOR19TVAkJCTB4MDQwCisj
ZGVmaW5lIENBTU1NVV9DTlRMCQkJCTB4MDQ0CisjZGVmaW5lIENBTU1NVV9GQVVMVF9BRAkJCQkw
eDA0OAorI2RlZmluZSBDQU1NTVVfVFRCCQkJCTB4MDRDCisjZGVmaW5lIENBTU1NVV9MT0NLCQkJ
CTB4MDUwCisjZGVmaW5lIENBTU1NVV9MRF9UTEIJCQkJMHgwNTQKKyNkZWZpbmUgQ0FNTU1VX0NB
TQkJCQkweDA1OAorI2RlZmluZSBDQU1NTVVfUkFNCQkJCTB4MDVDCisjZGVmaW5lIENBTU1NVV9H
RkxVU0gJCQkJMHgwNjAKKyNkZWZpbmUgQ0FNTU1VX0ZMVVNIX0VOVFJZCQkJMHgwNjQKKyNkZWZp
bmUgQ0FNTU1VX1JFQURfQ0FNCQkJCTB4MDY4CisjZGVmaW5lIENBTU1NVV9SRUFEX1JBTQkJCQkw
eDA2QworI2RlZmluZSBDQU1NTVVfRU1VX0ZBVUxUX0FECQkJMHgwNzAKKworLyogRGVmaW5lIGJp
dCBmaWVsZHMgd2l0aGluIHNlbGVjdGVkIHJlZ2lzdGVycyAqLworI2RlZmluZSBDQU1fUkVWSVNJ
T05fTUFKT1IJCQkoMTUgPDwgNCkKKyNkZWZpbmUgQ0FNX1JFVklTSU9OX01BSk9SX1NISUZUCQk0
CisjZGVmaW5lIENBTV9SRVZJU0lPTl9NSU5PUgkJCSgxNSA8PCAwKQorI2RlZmluZSBDQU1fUkVW
SVNJT05fTUlOT1JfU0hJRlQJCTAKKworI2RlZmluZSBDQU1fU1lTQ09ORklHX1NPRlRSRVNFVAkJ
CSgxIDw8ICAxKQorI2RlZmluZSBDQU1fU1lTQ09ORklHX0FVVE9JRExFCQkJKDEgPDwgIDApCisK
KyNkZWZpbmUgQ0FNX1NZU1NUQVRVU19SRVNFVERPTkUJCQkoMSA8PCAgMCkKKworI2RlZmluZSBD
QU1fSVJRU1RBVFVTX0NDX0lSUQkJCSgxIDw8ICA0KQorI2RlZmluZSBDQU1fSVJRU1RBVFVTX01N
VV9JUlEJCQkoMSA8PCAgMykKKyNkZWZpbmUgQ0FNX0lSUVNUQVRVU19ETUFfSVJRMgkJCSgxIDw8
ICAyKQorI2RlZmluZSBDQU1fSVJRU1RBVFVTX0RNQV9JUlExCQkJKDEgPDwgIDEpCisjZGVmaW5l
IENBTV9JUlFTVEFUVVNfRE1BX0lSUTAJCQkoMSA8PCAgMCkKKworI2RlZmluZSBDQU1fR1BPX0NB
TV9TX1BfRU4JCQkoMSA8PCAgMSkKKyNkZWZpbmUgQ0FNX0dQT19DQU1fQ0NQX01PREUJCQkoMSA8
PCAgMCkKKworI2RlZmluZSBDQU1fR1BJX0NDX0RNQV9SRVExCQkJKDEgPDwgMjQpCisjZGVmaW5l
IENBUF9HUElfQ0NfRE1BX1JFUTAJCQkoMSA8PCAyMykKKyNkZWZpbmUgQ0FQX0dQSV9DQU1fTVNU
QU5EQlkJCQkoMSA8PCAyMSkKKyNkZWZpbmUgQ0FQX0dQSV9DQU1fV0FJVAkJCSgxIDw8IDIwKQor
I2RlZmluZSBDQVBfR1BJX0NBTV9TX0RBVEEJCQkoMSA8PCAxNykKKyNkZWZpbmUgQ0FQX0dQSV9D
QU1fU19DTEsJCQkoMSA8PCAxNikKKyNkZWZpbmUgQ0FQX0dQSV9DQU1fUF9EQVRBCQkJKDB4RkZG
IDw8IDMpCisjZGVmaW5lIENBUF9HUElfQ0FNX1BfREFUQV9TSElGVAkJMworI2RlZmluZSBDQVBf
R1BJX0NBTV9QX1ZTCQkJKDEgPDwgIDIpCisjZGVmaW5lIENBUF9HUElfQ0FNX1BfSFMJCQkoMSA8
PCAgMSkKKyNkZWZpbmUgQ0FQX0dQSV9DQU1fUF9DTEsJCQkoMSA8PCAgMCkKKworI2RlZmluZSBD
Q19SRVZJU0lPTl9NQUpPUgkJCSgxNSA8PCA0KQorI2RlZmluZSBDQ19SRVZJU0lPTl9NQUpPUl9T
SElGVAkJCTQKKyNkZWZpbmUgQ0NfUkVWSVNJT05fTUlOT1IJCQkoMTUgPDwgMCkKKyNkZWZpbmUg
Q0NfUkVWSVNJT05fTUlOT1JfU0hJRlQJCQkwCisKKyNkZWZpbmUgQ0NfU1lTQ09ORklHX1NJRExF
TU9ERQkJCSgzIDw8ICAzKQorI2RlZmluZSBDQ19TWVNDT05GSUdfU0lETEVNT0RFX0ZJRExFCQko
MCA8PCAgMykKKyNkZWZpbmUgQ0NfU1lTQ09ORklHX1NJRExFTU9ERV9OSURMRQkJKDEgPDwgIDMp
CisjZGVmaW5lIENDX1NZU0NPTkZJR19TT0ZUUkVTRVQJCQkoMSA8PCAgMSkKKyNkZWZpbmUgQ0Nf
U1lTQ09ORklHX0FVVE9JRExFCQkJKDEgPDwgIDApCisKKyNkZWZpbmUgQ0NfU1lTU1RBVFVTX1JF
U0VURE9ORQkJCSgxIDw8ICAwKQorCisjZGVmaW5lIENDX0lSUVNUQVRVU19GU19JUlEJCQkoMSA8
PCAxOSkKKyNkZWZpbmUgQ0NfSVJRU1RBVFVTX0xFX0lSUQkJCSgxIDw8IDE4KQorI2RlZmluZSBD
Q19JUlFTVEFUVVNfTFNfSVJRCQkJKDEgPDwgMTcpCisjZGVmaW5lIENDX0lSUVNUQVRVU19GRV9J
UlEJCQkoMSA8PCAxNikKKyNkZWZpbmUgQ0NfSVJRU1RBVFVTX0ZXX0VSUl9JUlEJCQkoMSA8PCAx
MCkKKyNkZWZpbmUgQ0NfSVJRU1RBVFVTX0ZTQ19FUlJfSVJRCQkoMSA8PCAgOSkKKyNkZWZpbmUg
Q0NfSVJRU1RBVFVTX1NTQ19FUlJfSVJRCQkoMSA8PCAgOCkKKyNkZWZpbmUgQ0NfSVJRU1RBVFVT
X0ZJRk9fTk9FTVBUWV9JUlEJCSgxIDw8ICA0KQorI2RlZmluZSBDQ19JUlFTVEFUVVNfRklGT19G
VUxMX0lSUQkJKDEgPDwgIDMpCisjZGVmaW5lIENDX0lSUVNUQVRVU19GSUZPX1RIUl9JUlEJCSgx
IDw8ICAyKQorI2RlZmluZSBDQ19JUlFTVEFUVVNfRklGT19PRl9JUlEJCSgxIDw8ICAxKQorI2Rl
ZmluZSBDQ19JUlFTVEFUVVNfRklGT19VRl9JUlEJCSgxIDw8ICAwKQorCisjZGVmaW5lIENDX0lS
UUVOQUJMRV9GU19JUlEJCQkoMSA8PCAxOSkKKyNkZWZpbmUgQ0NfSVJRRU5BQkxFX0xFX0lSUQkJ
CSgxIDw8IDE4KQorI2RlZmluZSBDQ19JUlFFTkFCTEVfTFNfSVJRCQkJKDEgPDwgMTcpCisjZGVm
aW5lIENDX0lSUUVOQUJMRV9GRV9JUlEJCQkoMSA8PCAxNikKKyNkZWZpbmUgQ0NfSVJRRU5BQkxF
X0ZXX0VSUl9JUlEJCQkoMSA8PCAxMCkKKyNkZWZpbmUgQ0NfSVJRRU5BQkxFX0ZTQ19FUlJfSVJR
CQkoMSA8PCAgOSkKKyNkZWZpbmUgQ0NfSVJRRU5BQkxFX1NTQ19FUlJfSVJRCQkoMSA8PCAgOCkK
KyNkZWZpbmUgQ0NfSVJRRU5BQkxFX0ZJRk9fTk9FTVBUWV9JUlEJCSgxIDw8ICA0KQorI2RlZmlu
ZSBDQ19JUlFFTkFCTEVfRklGT19GVUxMX0lSUQkJKDEgPDwgIDMpCisjZGVmaW5lIENDX0lSUUVO
QUJMRV9GSUZPX1RIUl9JUlEJCSgxIDw8ICAyKQorI2RlZmluZSBDQ19JUlFFTkFCTEVfRklGT19P
Rl9JUlEJCSgxIDw8ICAxKQorI2RlZmluZSBDQ19JUlFFTkFCTEVfRklGT19VRl9JUlEJCSgxIDw8
ICAwKQorCisjZGVmaW5lIENDX0NUUkxfQ0NfT05FX1NIT1QJCQkoMSA8PCAyMCkKKyNkZWZpbmUg
Q0NfQ1RSTF9DQ19JRl9TWU5DSFJPCQkJKDEgPDwgMTkpCisjZGVmaW5lIENDX0NUUkxfQ0NfUlNU
CQkJCSgxIDw8IDE4KQorI2RlZmluZSBDQ19DVFJMX0NDX0ZSQU1FX1RSSUcJCQkoMSA8PCAxNykK
KyNkZWZpbmUgQ0NfQ1RSTF9DQ19FTgkJCQkoMSA8PCAxNikKKyNkZWZpbmUgQ0NfQ1RSTF9OT0JU
X1NZTkNIUk8JCQkoMSA8PCAxMykKKyNkZWZpbmUgQ0NfQ1RSTF9CVF9DT1JSRUNUCQkJKDEgPDwg
MTIpCisjZGVmaW5lIENDX0NUUkxfUEFSX09SREVSQ0FNCQkJKDEgPDwgMTEpCisjZGVmaW5lIEND
X0NUUkxfUEFSX0NMS19QT0wJCQkoMSA8PCAxMCkKKyNkZWZpbmUgQ0NfQ1RSTF9OT0JUX0hTX1BP
TAkJCSgxIDw8ICA5KQorI2RlZmluZSBDQ19DVFJMX05PQlRfVlNfUE9MCQkJKDEgPDwgIDgpCisj
ZGVmaW5lIENDX0NUUkxfUEFSX01PREUJCQkoNyA8PCAgMSkKKyNkZWZpbmUgQ0NfQ1RSTF9QQVJf
TU9ERV9TSElGVAkJCTEKKyNkZWZpbmUgQ0NfQ1RSTF9QQVJfTU9ERV9OT0JUOAkJCSgwIDw8ICAx
KQorI2RlZmluZSBDQ19DVFJMX1BBUl9NT0RFX05PQlQxMAkJCSgxIDw8ICAxKQorI2RlZmluZSBD
Q19DVFJMX1BBUl9NT0RFX05PQlQxMgkJCSgyIDw8ICAxKQorI2RlZmluZSBDQ19DVFJMX1BBUl9N
T0RFX0JUOAkJCSg0IDw8ICAxKQorI2RlZmluZSBDQ19DVFJMX1BBUl9NT0RFX0JUMTAJCQkoNSA8
PCAgMSkKKyNkZWZpbmUgQ0NfQ1RSTF9QQVJfTU9ERV9GSUZPVEVTVAkJKDcgPDwgIDEpCisjZGVm
aW5lIENDX0NUUkxfQ0NQX01PREUJCQkoMSA8PCAgMCkKKworI2RlZmluZSBDQ19DVFJMX0RNQV9F
TgkJCQkoMSA8PCAgOCkKKyNkZWZpbmUgQ0NfQ1RSTF9ETUFfRklGT19USFJFU0hPTEQJCSgweDdG
IDw8IDApCisjZGVmaW5lIENDX0NUUkxfRE1BX0ZJRk9fVEhSRVNIT0xEX1NISUZUCTAKKworI2Rl
ZmluZSBDQ19DVFJMX1hDTEtfRElWCQkJKDB4MUYgPDwgMCkKKyNkZWZpbmUgQ0NfQ1RSTF9YQ0xL
X0RJVl9TSElGVAkJCTAKKyNkZWZpbmUgQ0NfQ1RSTF9YQ0xLX0RJVl9TVEFCTEVfTE9XCQkoMCA8
PCAgMCkKKyNkZWZpbmUgQ0NfQ1RSTF9YQ0xLX0RJVl9TVEFCTEVfSElHSAkJKDEgPDwgIDApCisj
ZGVmaW5lIENDX0NUUkxfWENMS19ESVZfQllQQVNTCQkJKDMxIDw8IDApCisKKyNkZWZpbmUgQ0Nf
VEVTVF9GSUZPX1JEX1BPSU5URVIJCQkoMHhGRiA8PCAyNCkKKyNkZWZpbmUgQ0NfVEVTVF9GSUZP
X1JEX1BPSU5URVJfU0hJRlQJCTI0CisjZGVmaW5lIENDX1RFU1RfRklGT19XUl9QT0lOVEVSCQkJ
KDB4RkYgPDwgMTYpCisjZGVmaW5lIENDX1RFU1RfRklGT19XUl9QT0lOVEVSX1NISUZUCQkxNgor
I2RlZmluZSBDQ19URVNUX0ZJRk9fTEVWRUwJCQkoMHhGRiA8PCAgOCkKKyNkZWZpbmUgQ0NfVEVT
VF9GSUZPX0xFVkVMX1NISUZUCQk4CisjZGVmaW5lIENDX1RFU1RfRklGT19MRVZFTF9QRUFLCQkJ
KDB4RkYgPDwgIDApCisjZGVmaW5lIENDX1RFU1RfRklGT19MRVZFTF9QRUFLX1NISUZUCQkwCisK
KyNkZWZpbmUgQ0NfR0VOUEFSX0ZJRk9fREVQVEgJCQkoNyA8PCAgMCkKKyNkZWZpbmUgQ0NfR0VO
UEFSX0ZJRk9fREVQVEhfU0hJRlQJCTAKKworI2RlZmluZSBDQ19DQ1BERlJfQUxQSEEJCQkJKDB4
RkYgPDwgIDgpCisjZGVmaW5lIENDX0NDUERGUl9BTFBIQV9TSElGVAkJCTgKKyNkZWZpbmUgQ0Nf
Q0NQREZSX0RBVEFGT1JNQVQJCQkoMTUgPDwgIDApCisjZGVmaW5lIENDX0NDUERGUl9EQVRBRk9S
TUFUX1NISUZUCQkwCisjZGVmaW5lIENDX0NDUERGUl9EQVRBRk9STUFUX1lVVjQyMkJFCQkoMCA8
PCAgMCkKKyNkZWZpbmUgQ0NfQ0NQREZSX0RBVEFGT1JNQVRfWVVWNDIyCQkoMSA8PCAgMCkKKyNk
ZWZpbmUgQ0NfQ0NQREZSX0RBVEFGT1JNQVRfWVVWNDIwCQkoMiA8PCAgMCkKKyNkZWZpbmUgQ0Nf
Q0NQREZSX0RBVEFGT1JNQVRfUkdCNDQ0CQkoNCA8PCAgMCkKKyNkZWZpbmUgQ0NfQ0NQREZSX0RB
VEFGT1JNQVRfUkdCNTY1CQkoNSA8PCAgMCkKKyNkZWZpbmUgQ0NfQ0NQREZSX0RBVEFGT1JNQVRf
UkdCODg4TkRFCQkoNiA8PCAgMCkKKyNkZWZpbmUgQ0NfQ0NQREZSX0RBVEFGT1JNQVRfUkdCODg4
CQkoNyA8PCAgMCkKKyNkZWZpbmUgQ0NfQ0NQREZSX0RBVEFGT1JNQVRfUkFXOE5ERQkJKDggPDwg
IDApCisjZGVmaW5lIENDX0NDUERGUl9EQVRBRk9STUFUX1JBVzgJCSg5IDw8ICAwKQorI2RlZmlu
ZSBDQ19DQ1BERlJfREFUQUZPUk1BVF9SQVcxME5ERQkJKDEwIDw8ICAwKQorI2RlZmluZSBDQ19D
Q1BERlJfREFUQUZPUk1BVF9SQVcxMAkJKDExIDw8ICAwKQorI2RlZmluZSBDQ19DQ1BERlJfREFU
QUZPUk1BVF9SQVcxMk5ERQkJKDEyIDw8ICAwKQorI2RlZmluZSBDQ19DQ1BERlJfREFUQUZPUk1B
VF9SQVcxMgkJKDEzIDw8ICAwKQorI2RlZmluZSBDQ19DQ1BERlJfREFUQUZPUk1BVF9KUEVHOAkJ
KDE1IDw8ICAwKQorCisjZGVmaW5lIENBTURNQV9SRVZJU0lPTl9NQUpPUgkJCSgxNSA8PCA0KQor
I2RlZmluZSBDQU1ETUFfUkVWSVNJT05fTUFKT1JfU0hJRlQJCTQKKyNkZWZpbmUgQ0FNRE1BX1JF
VklTSU9OX01JTk9SCQkJKDE1IDw8IDApCisjZGVmaW5lIENBTURNQV9SRVZJU0lPTl9NSU5PUl9T
SElGVAkJMAorCisjZGVmaW5lIENBTURNQV9PQ1BfU1lTQ09ORklHX01JRExFTU9ERQkJKDMgPDwg
MTIpCisjZGVmaW5lIENBTURNQV9PQ1BfU1lTQ09ORklHX01JRExFTU9ERV9GU1RBTkRCWQkoMCA8
PCAxMikKKyNkZWZpbmUgQ0FNRE1BX09DUF9TWVNDT05GSUdfTUlETEVNT0RFX05TVEFOREJZCSgx
IDw8IDEyKQorI2RlZmluZSBDQU1ETUFfT0NQX1NZU0NPTkZJR19NSURMRU1PREVfU1NUQU5EQlkJ
KDIgPDwgMTIpCisjZGVmaW5lIENBTURNQV9PQ1BfU1lTQ09ORklHX0ZVTkNfQ0xPQ0sJCSgxIDw8
ICA5KQorI2RlZmluZSBDQU1ETUFfT0NQX1NZU0NPTkZJR19PQ1BfQ0xPQ0sJCSgxIDw8ICA4KQor
I2RlZmluZSBDQU1ETUFfT0NQX1NZU0NPTkZJR19FTVVGUkVFCQkoMSA8PCAgNSkKKyNkZWZpbmUg
Q0FNRE1BX09DUF9TWVNDT05GSUdfU0lETEVNT0RFCQkoMyA8PCAgMykKKyNkZWZpbmUgQ0FNRE1B
X09DUF9TWVNDT05GSUdfU0lETEVNT0RFX0ZJRExFCSgwIDw8ICAzKQorI2RlZmluZSBDQU1ETUFf
T0NQX1NZU0NPTkZJR19TSURMRU1PREVfTklETEUJKDEgPDwgIDMpCisjZGVmaW5lIENBTURNQV9P
Q1BfU1lTQ09ORklHX1NJRExFTU9ERV9TSURMRQkoMiA8PCAgMykKKyNkZWZpbmUgQ0FNRE1BX09D
UF9TWVNDT05GSUdfU09GVFJFU0VUCQkoMSA8PCAgMSkKKyNkZWZpbmUgQ0FNRE1BX09DUF9TWVND
T05GSUdfQVVUT0lETEUJCSgxIDw8ICAwKQorCisjZGVmaW5lIENBTURNQV9TWVNTVEFUVVNfUkVT
RVRET05FCQkoMSA8PCAgMCkKKworI2RlZmluZSBDQU1ETUFfR0NSX0FSQklUUkFUSU9OX1JBVEUJ
CSgweEZGIDw8IDE2KQorI2RlZmluZSBDQU1ETUFfR0NSX0FSQklUUkFUSU9OX1JBVEVfU0hJRlQJ
MTYKKyNkZWZpbmUgQ0FNRE1BX0dDUl9NQVhfQ0hBTk5FTF9GSUZPX0RFUFRICSgweEZGIDw8IDAp
CisjZGVmaW5lIENBTURNQV9HQ1JfTUFYX0NIQU5ORUxfRklGT19ERVBUSF9TSElGVAkwCisKKyNk
ZWZpbmUgQ0FNRE1BX0NDUl9TRUxfU1JDX0RTVF9TWU5DCQkoMSA8PCAyNCkKKyNkZWZpbmUgQ0FN
RE1BX0NDUl9QUkVGRVRDSAkJCSgxIDw8IDIzKQorI2RlZmluZSBDQU1ETUFfQ0NSX1NVUEVSVklT
T1IJCQkoMSA8PCAyMikKKyNkZWZpbmUgQ0FNRE1BX0NDUl9TRUNVUkUJCQkoMSA8PCAyMSkKKyNk
ZWZpbmUgQ0FNRE1BX0NDUl9CUwkJCQkoMSA8PCAxOCkKKyNkZWZpbmUgQ0FNRE1BX0NDUl9UUkFO
U1BBUkVOVF9DT1BZX0VOQUJMRQkoMSA8PCAxNykKKyNkZWZpbmUgQ0FNRE1BX0NDUl9DT05TVEFO
VF9GSUxMX0VOQUJMRQkJKDEgPDwgMTYpCisjZGVmaW5lIENBTURNQV9DQ1JfRFNUX0FNT0RFCQkJ
KDMgPDwgMTQpCisjZGVmaW5lIENBTURNQV9DQ1JfRFNUX0FNT0RFX0NPTlNUX0FERFIJCSgwIDw8
IDE0KQorI2RlZmluZSBDQU1ETUFfQ0NSX0RTVF9BTU9ERV9QT1NUX0lOQwkJKDEgPDwgMTQpCisj
ZGVmaW5lIENBTURNQV9DQ1JfRFNUX0FNT0RFX1NHTF9JRFgJCSgyIDw8IDE0KQorI2RlZmluZSBD
QU1ETUFfQ0NSX0RTVF9BTU9ERV9EQkxfSURYCQkoMyA8PCAxNCkKKyNkZWZpbmUgQ0FNRE1BX0ND
Ul9TUkNfQU1PREUJCQkoMyA8PCAxMikKKyNkZWZpbmUgQ0FNRE1BX0NDUl9TUkNfQU1PREVfQ09O
U1RfQUREUgkJKDAgPDwgMTIpCisjZGVmaW5lIENBTURNQV9DQ1JfU1JDX0FNT0RFX1BPU1RfSU5D
CQkoMSA8PCAxMikKKyNkZWZpbmUgQ0FNRE1BX0NDUl9TUkNfQU1PREVfU0dMX0lEWAkJKDIgPDwg
MTIpCisjZGVmaW5lIENBTURNQV9DQ1JfU1JDX0FNT0RFX0RCTF9JRFgJCSgzIDw8IDEyKQorI2Rl
ZmluZSBDQU1ETUFfQ0NSX1dSX0FDVElWRQkJCSgxIDw8IDEwKQorI2RlZmluZSBDQU1ETUFfQ0NS
X1JEX0FDVElWRQkJCSgxIDw8ICA5KQorI2RlZmluZSBDQU1ETUFfQ0NSX1NVU1BFTkRfU0VOU0lU
SVZFCQkoMSA8PCAgOCkKKyNkZWZpbmUgQ0FNRE1BX0NDUl9FTkFCTEUJCQkoMSA8PCAgNykKKyNk
ZWZpbmUgQ0FNRE1BX0NDUl9QUklPCQkJCSgxIDw8ICA2KQorI2RlZmluZSBDQU1ETUFfQ0NSX0ZT
CQkJCSgxIDw8ICA1KQorI2RlZmluZSBDQU1ETUFfQ0NSX1NZTkNIUk8JCQkoKDMgPDwgMTkpIHwg
KDMxIDw8IDApKQorI2RlZmluZSBDQU1ETUFfQ0NSX1NZTkNIUk9fQ0FNRVJBCQkweDAxCisKKyNk
ZWZpbmUgQ0FNRE1BX0NMTktfQ1RSTF9FTkFCTEVfTE5LCQkoMSA8PCAxNSkKKyNkZWZpbmUgQ0FN
RE1BX0NMTktfQ1RSTF9ORVhUTENIX0lECQkoMHgxRiA8PCAwKQorI2RlZmluZSBDQU1ETUFfQ0xO
S19DVFJMX05FWFRMQ0hfSURfU0hJRlQJMAorCisjZGVmaW5lIENBTURNQV9DSUNSX01JU0FMSUdO
RURfRVJSX0lFCQkoMSA8PCAxMSkKKyNkZWZpbmUgQ0FNRE1BX0NJQ1JfU1VQRVJWSVNPUl9FUlJf
SUUJCSgxIDw8IDEwKQorI2RlZmluZSBDQU1ETUFfQ0lDUl9TRUNVUkVfRVJSX0lFCQkoMSA8PCAg
OSkKKyNkZWZpbmUgQ0FNRE1BX0NJQ1JfVFJBTlNfRVJSX0lFCQkoMSA8PCAgOCkKKyNkZWZpbmUg
Q0FNRE1BX0NJQ1JfUEFDS0VUX0lFCQkJKDEgPDwgIDcpCisjZGVmaW5lIENBTURNQV9DSUNSX0JM
T0NLX0lFCQkJKDEgPDwgIDUpCisjZGVmaW5lIENBTURNQV9DSUNSX0xBU1RfSUUJCQkoMSA8PCAg
NCkKKyNkZWZpbmUgQ0FNRE1BX0NJQ1JfRlJBTUVfSUUJCQkoMSA8PCAgMykKKyNkZWZpbmUgQ0FN
RE1BX0NJQ1JfSEFMRl9JRQkJCSgxIDw8ICAyKQorI2RlZmluZSBDQU1ETUFfQ0lDUl9EUk9QX0lF
CQkJKDEgPDwgIDEpCisKKyNkZWZpbmUgQ0FNRE1BX0NTUl9NSVNBTElHTkVEX0VSUgkJKDEgPDwg
MTEpCisjZGVmaW5lIENBTURNQV9DU1JfU1VQRVJWSVNPUl9FUlIJCSgxIDw8IDEwKQorI2RlZmlu
ZSBDQU1ETUFfQ1NSX1NFQ1VSRV9FUlIJCQkoMSA8PCAgOSkKKyNkZWZpbmUgQ0FNRE1BX0NTUl9U
UkFOU19FUlIJCQkoMSA8PCAgOCkKKyNkZWZpbmUgQ0FNRE1BX0NTUl9QQUNLRVQJCQkoMSA8PCAg
NykKKyNkZWZpbmUgQ0FNRE1BX0NTUl9TWU5DCQkJCSgxIDw8ICA2KQorI2RlZmluZSBDQU1ETUFf
Q1NSX0JMT0NLCQkJKDEgPDwgIDUpCisjZGVmaW5lIENBTURNQV9DU1JfTEFTVAkJCQkoMSA8PCAg
NCkKKyNkZWZpbmUgQ0FNRE1BX0NTUl9GUkFNRQkJCSgxIDw8ICAzKQorI2RlZmluZSBDQU1ETUFf
Q1NSX0hBTEYJCQkJKDEgPDwgIDIpCisjZGVmaW5lIENBTURNQV9DU1JfRFJPUAkJCQkoMSA8PCAg
MSkKKworI2RlZmluZSBDQU1ETUFfQ1NEUF9TUkNfRU5ESUFOTkVTUwkJKDEgPDwgMjEpCisjZGVm
aW5lIENBTURNQV9DU0RQX1NSQ19FTkRJQU5ORVNTX0xPQ0sJCSgxIDw8IDIwKQorI2RlZmluZSBD
QU1ETUFfQ1NEUF9EU1RfRU5ESUFOTkVTUwkJKDEgPDwgMTkpCisjZGVmaW5lIENBTURNQV9DU0RQ
X0RTVF9FTkRJQU5ORVNTX0xPQ0sJCSgxIDw8IDE4KQorI2RlZmluZSBDQU1ETUFfQ1NEUF9XUklU
RV9NT0RFCQkJKDMgPDwgMTYpCisjZGVmaW5lIENBTURNQV9DU0RQX1dSSVRFX01PREVfV1JOUAkJ
KDAgPDwgMTYpCisjZGVmaW5lIENBTURNQV9DU0RQX1dSSVRFX01PREVfUE9TVEVECQkoMSA8PCAx
NikKKyNkZWZpbmUgQ0FNRE1BX0NTRFBfV1JJVEVfTU9ERV9QT1NURURfTEFTVF9XUk5QCSgyIDw8
IDE2KQorI2RlZmluZSBDQU1ETUFfQ1NEUF9EU1RfQlVSU1RfRU4JCSgzIDw8IDE0KQorI2RlZmlu
ZSBDQU1ETUFfQ1NEUF9EU1RfQlVSU1RfRU5fMQkJKDAgPDwgMTQpCisjZGVmaW5lIENBTURNQV9D
U0RQX0RTVF9CVVJTVF9FTl8xNgkJKDEgPDwgMTQpCisjZGVmaW5lIENBTURNQV9DU0RQX0RTVF9C
VVJTVF9FTl8zMgkJKDIgPDwgMTQpCisjZGVmaW5lIENBTURNQV9DU0RQX0RTVF9CVVJTVF9FTl82
NAkJKDMgPDwgMTQpCisjZGVmaW5lIENBTURNQV9DU0RQX0RTVF9QQUNLRUQJCQkoMSA8PCAxMykK
KyNkZWZpbmUgQ0FNRE1BX0NTRFBfV1JfQUREX1RSU0xUCQkoMTUgPDwgOSkKKyNkZWZpbmUgQ0FN
RE1BX0NTRFBfV1JfQUREX1RSU0xUX0VOQUJMRV9NUkVRQURECSgzIDw8ICA5KQorI2RlZmluZSBD
QU1ETUFfQ1NEUF9TUkNfQlVSU1RfRU4JCSgzIDw8ICA3KQorI2RlZmluZSBDQU1ETUFfQ1NEUF9T
UkNfQlVSU1RfRU5fMQkJKDAgPDwgIDcpCisjZGVmaW5lIENBTURNQV9DU0RQX1NSQ19CVVJTVF9F
Tl8xNgkJKDEgPDwgIDcpCisjZGVmaW5lIENBTURNQV9DU0RQX1NSQ19CVVJTVF9FTl8zMgkJKDIg
PDwgIDcpCisjZGVmaW5lIENBTURNQV9DU0RQX1NSQ19CVVJTVF9FTl82NAkJKDMgPDwgIDcpCisj
ZGVmaW5lIENBTURNQV9DU0RQX1NSQ19QQUNLRUQJCQkoMSA8PCAgNikKKyNkZWZpbmUgQ0FNRE1B
X0NTRFBfUkRfQUREX1RSU0xUCQkoMTUgPDwgMikKKyNkZWZpbmUgQ0FNRE1BX0NTRFBfUkRfQURE
X1RSU0xUX0VOQUJMRV9NUkVRQURECSgzIDw8ICAyKQorI2RlZmluZSBDQU1ETUFfQ1NEUF9EQVRB
X1RZUEUJCQkoMyA8PCAgMCkKKyNkZWZpbmUgQ0FNRE1BX0NTRFBfREFUQV9UWVBFXzhCSVRTCQko
MCA8PCAgMCkKKyNkZWZpbmUgQ0FNRE1BX0NTRFBfREFUQV9UWVBFXzE2QklUUwkJKDEgPDwgIDAp
CisjZGVmaW5lIENBTURNQV9DU0RQX0RBVEFfVFlQRV8zMkJJVFMJCSgyIDw8ICAwKQorCisjZGVm
aW5lIENBTU1NVV9TWVNDT05GSUdfQVVUT0lETEUJCSgxIDw8ICAwKQorCisvKgorICoKKyAqIERl
Y2xhcmF0aW9ucy4KKyAqCisgKi8KKworLyogZm9yd2FyZCBkZWNsYXJhdGlvbnMgKi8KK3N0cnVj
dCBvbWFwMjR4eGNhbV9zZ2RtYTsKK3N0cnVjdCBvbWFwMjR4eGNhbV9kbWE7CisKK3R5cGVkZWYg
dm9pZCAoKnNnZG1hX2NhbGxiYWNrX3QpKHN0cnVjdCBvbWFwMjR4eGNhbV9zZ2RtYSAqY2FtLAor
CQkJCSB1MzIgc3RhdHVzLCB2b2lkICphcmcpOwordHlwZWRlZiB2b2lkICgqZG1hX2NhbGxiYWNr
X3QpKHN0cnVjdCBvbWFwMjR4eGNhbV9kbWEgKmNhbSwKKwkJCSAgICAgICB1MzIgc3RhdHVzLCB2
b2lkICphcmcpOworCitzdHJ1Y3QgY2hhbm5lbF9zdGF0ZSB7CisJZG1hX2NhbGxiYWNrX3QgY2Fs
bGJhY2s7CisJdm9pZCAqYXJnOworfTsKKworLyogc2dkbWEgc3RhdGUgZm9yIGVhY2ggb2YgdGhl
IHBvc3NpYmxlIHZpZGVvYnVmX2J1ZmZlcnMgKyAyIG92ZXJsYXlzICovCitzdHJ1Y3Qgc2dkbWFf
c3RhdGUgeworCWNvbnN0IHN0cnVjdCBzY2F0dGVybGlzdCAqc2dsaXN0OworCWludCBzZ2xlbjsJ
CSAvKiBudW1iZXIgb2Ygc2dsaXN0IGVudHJpZXMgKi8KKwlpbnQgbmV4dF9zZ2xpc3Q7CSAvKiBp
bmRleCBvZiBuZXh0IHNnbGlzdCBlbnRyeSB0byBwcm9jZXNzICovCisJdW5zaWduZWQgaW50IGJ5
dGVzX3JlYWQ7IC8qIG51bWJlciBvZiBieXRlcyByZWFkICovCisJdW5zaWduZWQgaW50IGxlbjsg
ICAgICAgIC8qIHRvdGFsIGxlbmd0aCBvZiBzZ2xpc3QgKGV4Y2x1ZGluZworCQkJCSAgKiBieXRl
cyBkdWUgdG8gcGFnZSBhbGlnbm1lbnQpICovCisJaW50IHF1ZXVlZF9zZ2xpc3Q7CSAvKiBudW1i
ZXIgb2Ygc2dsaXN0IGVudHJpZXMgcXVldWVkIGZvciBETUEgKi8KKwl1MzIgY3NyOwkJIC8qIERN
QSByZXR1cm4gY29kZSAqLworCXNnZG1hX2NhbGxiYWNrX3QgY2FsbGJhY2s7CisJdm9pZCAqYXJn
OworfTsKKworLyogcGh5c2ljYWwgRE1BIGNoYW5uZWwgbWFuYWdlbWVudCAqLworc3RydWN0IG9t
YXAyNHh4Y2FtX2RtYSB7CisJc3BpbmxvY2tfdCBsb2NrOwkvKiBMb2NrIGZvciB0aGUgd2hvbGUg
c3RydWN0dXJlLiAqLworCisJdW5zaWduZWQgbG9uZyBiYXNlOwkvKiBiYXNlIGFkZHJlc3MgZm9y
IGRtYSBjb250cm9sbGVyICovCisKKwkvKiBXaGlsZSBkbWFfc3RvcCE9MCwgYW4gYXR0ZW1wdCB0
byBzdGFydCBhIG5ldyBETUEgdHJhbnNmZXIgd2lsbAorCSAqIGZhaWwuCisJICovCisJYXRvbWlj
X3QgZG1hX3N0b3A7CisJaW50IGZyZWVfZG1hY2g7CQkvKiBudW1iZXIgb2YgZG1hIGNoYW5uZWxz
IGZyZWUgKi8KKwlpbnQgbmV4dF9kbWFjaDsJCS8qIGluZGV4IG9mIG5leHQgZG1hIGNoYW5uZWwg
dG8gdXNlICovCisJc3RydWN0IGNoYW5uZWxfc3RhdGUgY2hfc3RhdGVbTlVNX0NBTURNQV9DSEFO
TkVMU107Cit9OworCisvKiBzY2F0dGVyLWdhdGhlciBETUEgKHNjYXR0ZXJsaXN0IHN0dWZmKSBt
YW5hZ2VtZW50ICovCitzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEgeworCXN0cnVjdCBvbWFwMjR4
eGNhbV9kbWEgZG1hOworCisJc3BpbmxvY2tfdCBsb2NrOwkvKiBMb2NrIGZvciB0aGUgZmllbGRz
IGJlbG93LiAqLworCWludCBmcmVlX3NnZG1hOwkJLyogbnVtYmVyIG9mIGZyZWUgc2cgZG1hIHNs
b3RzICovCisJaW50IG5leHRfc2dkbWE7CQkvKiBpbmRleCBvZiBuZXh0IHNnIGRtYSBzbG90IHRv
IHVzZSAqLworCXN0cnVjdCBzZ2RtYV9zdGF0ZSBzZ19zdGF0ZVtOVU1fU0dfRE1BXTsKKworCS8q
IFJlc2V0IHRpbWVyIGRhdGEgKi8KKwlzdHJ1Y3QgdGltZXJfbGlzdCByZXNldF90aW1lcjsKK307
CisKKy8qIHBlci1kZXZpY2UgZGF0YSBzdHJ1Y3R1cmUgKi8KK3N0cnVjdCBvbWFwMjR4eGNhbV9k
ZXZpY2UgeworCS8qKiogbXV0ZXggICoqKi8KKwkvKgorCSAqIG11dGV4IHNlcmlhbGlzZXMgYWNj
ZXNzIHRvIHRoaXMgc3RydWN0dXJlLiBBbHNvIGNhbWVyYQorCSAqIG9wZW5pbmcgYW5kIHJlbGVh
c2luZyBpcyBzeW5jaHJvbmlzZWQgYnkgdGhpcy4KKwkgKi8KKwlzdHJ1Y3QgbXV0ZXggbXV0ZXg7
CisKKwkvKioqIGdlbmVyYWwgZHJpdmVyIHN0YXRlIGluZm9ybWF0aW9uICoqKi8KKwlhdG9taWNf
dCB1c2VyczsKKwkvKgorCSAqIExvY2sgdG8gc2VyaWFsaXNlIGNvcmUgZW5hYmxpbmcgYW5kIGRp
c2FibGluZyBhbmQgYWNjZXNzIHRvCisJICogc2dkbWFfaW5fcXVldWUuCisJICovCisJc3Bpbmxv
Y2tfdCBjb3JlX2VuYWJsZV9kaXNhYmxlX2xvY2s7CisJLyoKKwkgKiBOdW1iZXIgb3Igc2dkbWEg
cmVxdWVzdHMgaW4gc2NhdHRlci1nYXRoZXIgcXVldWUsIHByb3RlY3RlZAorCSAqIGJ5IHRoZSBs
b2NrIGFib3ZlLgorCSAqLworCWludCBzZ2RtYV9pbl9xdWV1ZTsKKwkvKgorCSAqIFNlbnNvciBp
bnRlcmZhY2UgcGFyYW1ldGVyczogaW50ZXJmYWNlIHR5cGUsIENDX0NUUkwKKwkgKiByZWdpc3Rl
ciB2YWx1ZSBhbmQgaW50ZXJmYWNlIHNwZWNpZmljIGRhdGEuCisJICovCisJaW50IGlmX3R5cGU7
CisJdW5pb24geworCQlzdHJ1Y3QgcGFyYWxsZWwgeworCQkJdTMyIHhjbGs7CisJCX0gYnQ2NTY7
CisJfSBpZl91OworCXUzMiBjY19jdHJsOworCisJLyoqKiBzdWJzeXN0ZW0gc3RydWN0dXJlcyAq
KiovCisJc3RydWN0IG9tYXAyNHh4Y2FtX3NnZG1hIHNnZG1hOworCisJLyoqKiBoYXJkd2FyZSBy
ZXNvdXJjZXMgKioqLworCXVuc2lnbmVkIGludCBpcnE7CisJdW5zaWduZWQgbG9uZyBtbWlvX2Jh
c2U7CisJdW5zaWduZWQgbG9uZyBtbWlvX2Jhc2VfcGh5czsKKwl1bnNpZ25lZCBsb25nIG1taW9f
c2l6ZTsKKworCS8qKiogaW50ZXJmYWNlcyBhbmQgZGV2aWNlICoqKi8KKwlzdHJ1Y3QgdjRsMl9p
bnRfZGV2aWNlICpzZGV2OworCXN0cnVjdCBkZXZpY2UgKmRldjsKKwlzdHJ1Y3QgdmlkZW9fZGV2
aWNlICp2ZmQ7CisKKwkvKioqIGNhbWVyYSBhbmQgc2Vuc29yIHJlc2V0IHJlbGF0ZWQgc3R1ZmYg
KioqLworCXN0cnVjdCB3b3JrX3N0cnVjdCBzZW5zb3JfcmVzZXRfd29yazsKKwkvKgorCSAqIFdl
J3JlIGluIHRoZSBtaWRkbGUgb2YgYSByZXNldC4gRG9uJ3QgZW5hYmxlIGNvcmUgaWYgdGhpcwor
CSAqIGlzIG5vbi16ZXJvISBUaGlzIGV4aXN0cyB0byBoZWxwIGRlY2lzaW9ubWFraW5nIGluIGEg
Y2FzZQorCSAqIHdoZXJlIHZpZGVvYnVmX3FidWYgaXMgY2FsbGVkIHdoaWxlIHdlIGFyZSBpbiB0
aGUgbWlkZGxlIG9mCisJICogYSByZXNldC4KKwkgKi8KKwlhdG9taWNfdCBpbl9yZXNldDsKKwkv
KgorCSAqIE5vbi16ZXJvIGlmIHdlIGRvbid0IHdhbnQgYW55IHJlc2V0cyBmb3Igbm93LiBVc2Vk
IHRvCisJICogcHJldmVudCByZXNldCB3b3JrIHRvIHJ1biB3aGVuIHdlJ3JlIGFib3V0IHRvIHN0
b3AKKwkgKiBzdHJlYW1pbmcuCisJICovCisJYXRvbWljX3QgcmVzZXRfZGlzYWJsZTsKKworCS8q
KiogdmlkZW8gZGV2aWNlIHBhcmFtZXRlcnMgKioqLworCWludCBjYXB0dXJlX21lbTsKKworCS8q
KiogY2FtZXJhIG1vZHVsZSBjbG9ja3MgKioqLworCXN0cnVjdCBjbGsgKmZjazsKKwlzdHJ1Y3Qg
Y2xrICppY2s7CisKKwkvKioqIGNhcHR1cmUgZGF0YSAqKiovCisJLyogZmlsZSBoYW5kbGUsIGlm
IHN0cmVhbWluZyBpcyBvbiAqLworCXN0cnVjdCBmaWxlICpzdHJlYW1pbmc7Cit9OworCisvKiBQ
ZXItZmlsZSBoYW5kbGUgZGF0YS4gKi8KK3N0cnVjdCBvbWFwMjR4eGNhbV9maCB7CisJc3Bpbmxv
Y2tfdCB2YnFfbG9jazsgLyogc3BpbmxvY2sgZm9yIHRoZSB2aWRlb2J1ZiBxdWV1ZSAqLworCXN0
cnVjdCB2aWRlb2J1Zl9xdWV1ZSB2YnE7CisJc3RydWN0IHY0bDJfcGl4X2Zvcm1hdCBwaXg7IC8q
IHNlcmlhbGlzZSBwaXggYnkgdmJxLT5sb2NrICovCisJYXRvbWljX3QgZmllbGRfY291bnQ7IC8q
IGZpZWxkIGNvdW50ZXIgZm9yIHZpZGVvYnVmX2J1ZmZlciAqLworCS8qIGFjY2Vzc2luZyBjYW0g
aGVyZSBkb2Vzbid0IG5lZWQgc2VyaWFsaXNhdGlvbjogaXQncyBjb25zdGFudCAqLworCXN0cnVj
dCBvbWFwMjR4eGNhbV9kZXZpY2UgKmNhbTsKK307CisKKy8qCisgKgorICogUmVnaXN0ZXIgSS9P
IGZ1bmN0aW9ucy4KKyAqCisgKi8KKworc3RhdGljIGlubGluZSB1MzIgb21hcDI0eHhjYW1fcmVn
X2luKHVuc2lnbmVkIGxvbmcgYmFzZSwgdTMyIG9mZnNldCkKK3sKKwlyZXR1cm4gcmVhZGwoYmFz
ZSArIG9mZnNldCk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdTMyIG9tYXAyNHh4Y2FtX3JlZ19vdXQo
dW5zaWduZWQgbG9uZyBiYXNlLCB1MzIgb2Zmc2V0LAorCQkJCQkgIHUzMiB2YWwpCit7CisJd3Jp
dGVsKHZhbCwgYmFzZSArIG9mZnNldCk7CisJcmV0dXJuIHZhbDsKK30KKworc3RhdGljIGlubGlu
ZSB1MzIgb21hcDI0eHhjYW1fcmVnX21lcmdlKHVuc2lnbmVkIGxvbmcgYmFzZSwgdTMyIG9mZnNl
dCwKKwkJCQkJICAgIHUzMiB2YWwsIHUzMiBtYXNrKQoreworCXUzMiBhZGRyID0gYmFzZSArIG9m
ZnNldDsKKwl1MzIgbmV3X3ZhbCA9IChyZWFkbChhZGRyKSAmIH5tYXNrKSB8ICh2YWwgJiBtYXNr
KTsKKworCXdyaXRlbChuZXdfdmFsLCBhZGRyKTsKKwlyZXR1cm4gbmV3X3ZhbDsKK30KKworLyoK
KyAqCisgKiBGdW5jdGlvbiBwcm90b3R5cGVzLgorICoKKyAqLworCisvKiBkbWEgcHJvdG90eXBl
cyAqLworCit2b2lkIG9tYXAyNHh4Y2FtX2RtYV9od2luaXQoc3RydWN0IG9tYXAyNHh4Y2FtX2Rt
YSAqZG1hKTsKK3ZvaWQgb21hcDI0eHhjYW1fZG1hX2lzcihzdHJ1Y3Qgb21hcDI0eHhjYW1fZG1h
ICpkbWEpOworCisvKiBzZ2RtYSBwcm90b3R5cGVzICovCisKK3ZvaWQgb21hcDI0eHhjYW1fc2dk
bWFfcHJvY2VzcyhzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEgKnNnZG1hKTsKK2ludCBvbWFwMjR4
eGNhbV9zZ2RtYV9xdWV1ZShzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEgKnNnZG1hLAorCQkJICAg
IGNvbnN0IHN0cnVjdCBzY2F0dGVybGlzdCAqc2dsaXN0LCBpbnQgc2dsZW4sCisJCQkgICAgaW50
IGxlbiwgc2dkbWFfY2FsbGJhY2tfdCBjYWxsYmFjaywgdm9pZCAqYXJnKTsKK3ZvaWQgb21hcDI0
eHhjYW1fc2dkbWFfc3luYyhzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEgKnNnZG1hKTsKK3ZvaWQg
b21hcDI0eHhjYW1fc2dkbWFfaW5pdChzdHJ1Y3Qgb21hcDI0eHhjYW1fc2dkbWEgKnNnZG1hLAor
CQkJICAgIHVuc2lnbmVkIGxvbmcgYmFzZSwKKwkJCSAgICB2b2lkICgqcmVzZXRfY2FsbGJhY2sp
KHVuc2lnbmVkIGxvbmcgZGF0YSksCisJCQkgICAgdW5zaWduZWQgbG9uZyByZXNldF9jYWxsYmFj
a19kYXRhKTsKK3ZvaWQgb21hcDI0eHhjYW1fc2dkbWFfZXhpdChzdHJ1Y3Qgb21hcDI0eHhjYW1f
c2dkbWEgKnNnZG1hKTsKKworI2VuZGlmCi0tIAoxLjYuMC4zCgo=
------=_Part_52235_30839869.1227866835821
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

--
video4linux-list mailing list
Unsubscribe mailto:video4linux-list-request@redhat.com?subject=unsubscribe
https://www.redhat.com/mailman/listinfo/video4linux-list
------=_Part_52235_30839869.1227866835821--
