Return-path: <linux-media-owner@vger.kernel.org>
Received: from metis.ext.pengutronix.de ([85.220.165.71]:33635 "EHLO
        metis.ext.pengutronix.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1752411AbeCMLU4 (ORCPT
        <rfc822;linux-media@vger.kernel.org>);
        Tue, 13 Mar 2018 07:20:56 -0400
Message-ID: <1520940054.3965.10.camel@pengutronix.de>
Subject: Re: coda: i.MX6 decoding performance issues for multi-streaming
From: Philipp Zabel <p.zabel@pengutronix.de>
To: Javier Martin <javiermartin@by.com.es>,
        linux-media <linux-media@vger.kernel.org>
Date: Tue, 13 Mar 2018 12:20:54 +0100
In-Reply-To: <c18549be-d55e-54d2-1524-1c51d05807ec@by.com.es>
References: <c18549be-d55e-54d2-1524-1c51d05807ec@by.com.es>
Content-Type: text/plain; charset="UTF-8"
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

Hi Javier,

On Mon, 2018-03-12 at 17:54 +0100, Javier Martin wrote:
> Hi,
> we have an i.MX6 Solo based board running the latest mainline kernel 
> (4.15.3).
> 
> As part of our development we were measuring the decoding performance of 
> the i.MX6 coda chip.
> 
> For that purpose we are feeding the decoder with 640x368 @ 30fps H.264 
> streams that have been generated by another i.MX6 coda encoder 
> configured with fixed qp = 25 and gopsize = 16.
> 
> For 1-2 streams it works smoothly. However, when adding the 3rd stream 
> the first decoder instance starts to output these kind of errors:
> 
> DEC_PIC_SUCCESS = 2097153  -> 0x200001
> DEC_PIC_SUCCESS = 2621441  -> 0x280001

I think these might be (recoverable?) error flags, but so far I have
never seen them myself.
I've had reports of those occurring occasionally with certain streams
(not encoded by coda, regardless of the number of running decoder
instances) though.

What is the coda firmware version you are using?

regards
Philipp
