Return-path: <linux-media-owner@vger.kernel.org>
Received: from relay3-d.mail.gandi.net ([217.70.183.195]:36231 "EHLO
        relay3-d.mail.gandi.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1752923AbeFILaR (ORCPT
        <rfc822;linux-media@vger.kernel.org>); Sat, 9 Jun 2018 07:30:17 -0400
From: Jacopo Mondi <jacopo+renesas@jmondi.org>
To: kieran.bingham+renesas@ideasonboard.com,
        laurent.pinchart@ideasonboard.com, niklas.soderlund@ragnatech.se
Cc: Jacopo Mondi <jacopo+renesas@jmondi.org>,
        linux-media@vger.kernel.org, linux-renesas-soc@vger.kernel.org
Subject: [RFC 2/2] dt-bindings: media: i2c: Add bindings for IMI RDACM20
Date: Sat,  9 Jun 2018 13:30:05 +0200
Message-Id: <1528543805-23945-3-git-send-email-jacopo+renesas@jmondi.org>
In-Reply-To: <1528543805-23945-1-git-send-email-jacopo+renesas@jmondi.org>
References: <1528543805-23945-1-git-send-email-jacopo+renesas@jmondi.org>
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

IMI D&D RDACM20 automotive platform is a Gigabit Multimedia Serial Link
(GMSL) camera transmitting video and I2C control messages on coax cable
physical link.

Document its device tree binding interface.

Signed-off-by: Jacopo Mondi <jacopo+renesas@jmondi.org>
---
 .../devicetree/bindings/media/i2c/imi,rdacm20.txt  | 62 ++++++++++++++++++++++
 1 file changed, 62 insertions(+)
 create mode 100644 Documentation/devicetree/bindings/media/i2c/imi,rdacm20.txt

diff --git a/Documentation/devicetree/bindings/media/i2c/imi,rdacm20.txt b/Documentation/devicetree/bindings/media/i2c/imi,rdacm20.txt
new file mode 100644
index 0000000..7fda068
--- /dev/null
+++ b/Documentation/devicetree/bindings/media/i2c/imi,rdacm20.txt
@@ -0,0 +1,62 @@
+IMI D&D RDACM20 Automotive Camera Platform
+------------------------------------------
+
+The IMI D&D RDACM20 is a GMSL-compatible camera designed for automotive
+applications. It is encloses a Maxim Integrated MAX9271 GMSL serializer, an
+Omnivision OV10635 camera sensor and an embedded MCU, and connects to a remote
+GMSL endpoint through a coaxial cable.
+
+                                                     IMI RDACM20
+ ---------------                               --------------------------------
+|      GMSL     |   <---  Video Stream        |       <- Video--------\        |
+|               |< ====== GMSL Link ======== >|MAX9271<- I2C bus-> <-->OV10635 |
+| de-serializer |   <---  I2C messages --->   |                   \<-->MCU     |
+ ---------------                               --------------------------------
+
+RDACM20 transmits video data generated by the embedded camera sensor on the
+GMSL serial channel to a remote GMSL de-serializer, as well as it receives and
+transmits I2C messages encapsulated in the GMSL bidirectional control channel.
+
+All I2C traffic received on the GMSL link not directed to the serializer is
+propagated on the local I2C bus to the embedded camera sensor and MCU. All
+I2C traffic generated on the local I2C bus not directed to the serializer is
+propagated to the remote de-serializer encapsulated in the GMSL control channel.
+
+Required Properties:
+
+- compatible: Shall be "imi,rdacm20".
+- reg: Pair of I2C device addresses, the first to be assigned to the serializer
+  the second to be assigned to the camera sensor.
+
+Connection to the remote GMSL endpoint are modeled using the OF graph bindings
+in accordance with the video interface bindings defined in
+Documentation/devicetree/bindings/media/video-interfaces.txt.
+
+The device node contains a single "port" child node with a single "endpoint"
+sub-device.
+
+Required endpoint properties:
+
+- remote-endpoint: phandle to the remote GMSL endpoint sub-node in the remote
+  node port.
+
+Example:
+-------
+
+	i2c@0 {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0>;
+
+		camera@51 {
+			compatible = "imi,rdacm20";
+			reg = <0x51 0x61>;
+
+			port {
+				rdacm20_out0: endpoint {
+					remote-endpoint = <&max9286_in0>;
+				};
+			};
+
+		};
+	};
-- 
2.7.4
