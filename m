Return-path: <linux-media-owner@vger.kernel.org>
Received: from perceval.ideasonboard.com ([95.142.166.194]:53217 "EHLO
	perceval.ideasonboard.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1758834Ab3BNUl6 (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Thu, 14 Feb 2013 15:41:58 -0500
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Adriano Martins <adrianomatosmartins@gmail.com>
Cc: linux-media <linux-media@vger.kernel.org>
Subject: Re: omap3isp IRQs
Date: Thu, 14 Feb 2013 21:42:12 +0100
Message-ID: <1554138.lFCgcHDuOa@avalon>
In-Reply-To: <CAJRKTVruizr6AZJk6i8nbG0VE_9iCtNg8y5XCDvJPTnEq9uhAQ@mail.gmail.com>
References: <CAJRKTVoKYyJqP1mE=HTmm2jq9uoSkX9kf0HcMxz7F9wZnD1Y5w@mail.gmail.com> <CAJRKTVpcBfyYfbdC-+DL2UgtDR=KNRO87a+Uch583sU=8h70CQ@mail.gmail.com> <CAJRKTVruizr6AZJk6i8nbG0VE_9iCtNg8y5XCDvJPTnEq9uhAQ@mail.gmail.com>
MIME-Version: 1.0
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

Hi Adriano,

On Thursday 14 February 2013 17:17:40 Adriano Martins wrote:
> 2013/2/13 Adriano Martins <adrianomatosmartins@gmail.com>:
> > 2013/2/13 Adriano Martins <adrianomatosmartins@gmail.com>:
> >> Hi,
> >> 
> >> Please, help me :-)
> >> 
> >> I trying capture frames from my new sensor, ov5640. I already capture
> >> images from a mt9p031 camera, but I have some problems with ov5640.
> >> 
> >> Someone can explain me what are the CCDC_VD0_IRQ and CCDC_VD1_IRQ?

Those two interrupts are generated by the CCDC using programmable line 
counters. The ISP driver programs the CCDC to generate the VD0 interrupt on 
the last line of the image and the VD1 interrupt at 2/3 of the image.

> >> In the mt9p031 sensor, I get all interrupts (including HS_VS_IRQ) and
> >> I can capture frames.
> >> 
> >> In other sensor, I can't capture any frame. I get many HS_VS_IRQ only,
> >> then yavta app hangs and I need stop it. Then I get CCDC stop timeout!
> >> Is it necessary get CCDC_VD0_IRQ and CCDC_VD1_IRQ ever to capture a
> >> frame?

Yes. A failure to get them usually indicates that the number of lines 
generated by the sensor doesn't match the number of lines expected by the CCDC 
(possibly because the HS signal is completely missing).

> >> I think all signal from ov5640 sensor are ok. A question about it:
> >> vsync may be in high level until the frame is transmitted? On my case
> >> I see just a pulse of vsync before hsync pulses. Is it correct?
> > 
> > I can capture frames now, and get all interrupts.
> > But, The image has only green color.
> 
> I solved my problem. The .data_lane_shift and yuv sequence were wrong.

Glad to know you've solved the problem :-)

> > I have configured the CCDC module as V4L2_MBUS_FMT_UYVY8_2X8, and the
> > sensor output format is configured as YUV422 with sequence UYVY.
> > 
> > somebody has any idea?

-- 
Regards,

Laurent Pinchart

