Return-path: <linux-dvb-bounces+mchehab=infradead.org@linuxtv.org>
Received: from 213.159.238.198.iptelecom.net.ua ([213.159.238.198]
	helo=mail.trirema.kiev.ua) by www.linuxtv.org with esmtp (Exim 4.63)
	(envelope-from <a3df@trirema.kiev.ua>) id 1KSwKR-0000DA-CN
	for linux-dvb@linuxtv.org; Tue, 12 Aug 2008 18:02:37 +0200
Received: from [10.0.1.222] (unknown [10.0.1.222])
	by mail.trirema.kiev.ua (Postfix) with ESMTP id 91C5938F7B
	for <linux-dvb@linuxtv.org>; Tue, 12 Aug 2008 19:51:08 +0300 (EEST)
Message-ID: <48A1B304.9010707@trirema.kiev.ua>
Date: Tue, 12 Aug 2008 18:57:56 +0300
From: Alexander Sotnikov <a3df@trirema.kiev.ua>
MIME-Version: 1.0
To: linux-dvb@linuxtv.org
Subject: [linux-dvb] ULE big somewhere : NPA+BRIDGED_FRAME+VLAN = Hardlock
 w/o any oops
List-Unsubscribe: <http://www.linuxtv.org/cgi-bin/mailman/listinfo/linux-dvb>,
	<mailto:linux-dvb-request@linuxtv.org?subject=unsubscribe>
List-Archive: <http://www.linuxtv.org/pipermail/linux-dvb>
List-Post: <mailto:linux-dvb@linuxtv.org>
List-Help: <mailto:linux-dvb-request@linuxtv.org?subject=help>
List-Subscribe: <http://www.linuxtv.org/cgi-bin/mailman/listinfo/linux-dvb>,
	<mailto:linux-dvb-request@linuxtv.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: linux-dvb-bounces@linuxtv.org
Errors-To: linux-dvb-bounces+mchehab=infradead.org@linuxtv.org
List-ID: <linux-dvb@linuxtv.org>

Hi all

while creating ULE  encapsulation driver for our in house DVB modulator
i found out   that i can hard lock DVB receiver    with  following packet

//normal arp request in  Vlan 4
0xff 0xff 0xff 0xff 0xff 0xff 0x00 0xff 0x9e 0x00 0x75 0xfa 0x81 0x00
0x00 0x04
0x08 0x06 0x00 0x01 0x08 0x00 0x06 0x04 0x00 0x01 0x00 0xff 0x9e 0x00
0x75 0xfa
0x0a 0x00 0x01 0x10 0xff 0xff 0xff 0xff 0xff 0xff 0x01 0x01 0x01 0x01

//same encapsulated in ULE headers with NPA <0x02 0x00 0x00 0x00 0x00 0x01>

0x00 0x38 0x00 0x01 0x02 0x00 0x00 0x00 0x00 0x01 0xff 0xff 0xff 0xff
0xff 0xff
0x00 0xff 0x9e 0x00 0x75 0xfa 0x81 0x00 0x00 0x04 0x08 0x06 0x00 0x01
0x08 0x00
0x06 0x04 0x00 0x01 0x00 0xff 0x9e 0x00 0x75 0xfa 0x0a 0x00 0x01 0x10
0xff 0xff
0xff 0xff 0xff 0xff 0x01 0x01 0x01 0x01 0x76 0x42 0x10 0x42


//all above  in  188 B   TS frame

TSD START -------------------
0x47 0x51 0x11 0x13 0x00 0x00 0x38 0x00 0x01 0x02 0x00 0x00 0x00 0x00
0x01 0xff
0xff 0xff 0xff 0xff 0xff 0x00 0xff 0x9e 0x00 0x75 0xfa 0x81 0x00 0x00
0x04 0x08
0x06 0x00 0x01 0x08 0x00 0x06 0x04 0x00 0x01 0x00 0xff 0x9e 0x00 0x75
0xfa 0x0a
0x00 0x01 0x10 0xff 0xff 0xff 0xff 0xff 0xff 0x01 0x01 0x01 0x01 0x76
0x42 0x10
0x42 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
0xff 0xff
0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
0xff 0xff
0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
0xff 0xff
0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
0xff 0xff
0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
0xff 0xff
0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
0xff 0xff
0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
0xff 0xff
0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff
TSD END ---------------------


packets w/o  VLAN tag  or   w/o  NPA  set  work perfectly   (kernel
version 2.6.26.1  stock drivers)
any pointers where to look for problem  are welcome

Alexander

_______________________________________________
linux-dvb mailing list
linux-dvb@linuxtv.org
http://www.linuxtv.org/cgi-bin/mailman/listinfo/linux-dvb
