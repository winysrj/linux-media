Return-path: <linux-media-owner@vger.kernel.org>
Received: from 1-1-12-13a.han.sth.bostream.se ([82.182.30.168]:56970 "EHLO
	palpatine.hardeman.nu" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751212Ab0DXIx0 (ORCPT
	<rfc822;linux-media@vger.kernel.org>);
	Sat, 24 Apr 2010 04:53:26 -0400
Date: Sat, 24 Apr 2010 10:53:21 +0200
From: David =?iso-8859-1?Q?H=E4rdeman?= <david@hardeman.nu>
To: Jarod Wilson <jarod@redhat.com>
Cc: mchehab@redhat.com, linux-media@vger.kernel.org,
	linux-input@vger.kernel.org
Subject: Re: [PATCH 2/3] ir-core: add imon pad and mce keymaps
Message-ID: <20100424085321.GA2668@hardeman.nu>
References: <20100416212622.GA6888@redhat.com>
 <20100416212835.GC2427@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20100416212835.GC2427@redhat.com>
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

On Fri, Apr 16, 2010 at 05:28:35PM -0400, Jarod Wilson wrote:
> 
> This adds the keymaps for the hardware decode scancodes imon
> devices create for their native imon pad (and mini) remotes,
> and the hardware scancodes generated by the imon devices when
> used with an rc6 windows media center ed. remote.
> 
> Signed-off-by: Jarod Wilson <jarod@redhat.com>
> 
> ---
>  drivers/media/IR/keymaps/Makefile      |    2 +
>  drivers/media/IR/keymaps/rc-imon-mce.c |  142 +++++++++++++++++++++++++++++
>  drivers/media/IR/keymaps/rc-imon-pad.c |  155 ++++++++++++++++++++++++++++++++
>  include/media/rc-map.h                 |    2 +
>  4 files changed, 301 insertions(+), 0 deletions(-)
> 
> diff --git a/drivers/media/IR/keymaps/Makefile b/drivers/media/IR/keymaps/Makefile
> index c4d891d..ec25258 100644
> --- a/drivers/media/IR/keymaps/Makefile
> +++ b/drivers/media/IR/keymaps/Makefile
> @@ -30,6 +30,8 @@ obj-$(CONFIG_RC_MAP) += rc-adstech-dvb-t-pci.o \
>  			rc-genius-tvgo-a11mce.o \
>  			rc-gotview7135.o \
>  			rc-hauppauge-new.o \
> +			rc-imon-mce.o \
> +			rc-imon-pad.o \
>  			rc-iodata-bctv7e.o \
>  			rc-kaiomy.o \
>  			rc-kworld-315u.o \
> diff --git a/drivers/media/IR/keymaps/rc-imon-mce.c b/drivers/media/IR/keymaps/rc-imon-mce.c
> new file mode 100644
> index 0000000..9c6dda3
> --- /dev/null
> +++ b/drivers/media/IR/keymaps/rc-imon-mce.c
> @@ -0,0 +1,142 @@
> +/* rc5-imon-mce.c - Keytable for Windows Media Center RC-6 remotes for use
> + * with the SoundGraph iMON/Antec Veris hardware IR decoder
> + *
> + * Copyright (c) 2010 by Jarod Wilson <jarod@redhat.com>
> + *
> + * This program is free software; you can redistribute it and/or modify
> + * it under the terms of the GNU General Public License as published by
> + * the Free Software Foundation; either version 2 of the License, or
> + * (at your option) any later version.
> + */
> +
> +#include <media/rc-map.h>
> +
> +/* mce-mode imon mce remote key table */
> +static struct ir_scancode imon_mce[] = {
> +	/* keys sorted mostly by frequency of use to optimize lookups */

Won't help at all, entries are inserted in scancode order in the actual 
in-kernel keytable to allow for binary scancode searches.


> +	{ 0x800ff415, KEY_REWIND },
> +	{ 0x800ff414, KEY_FASTFORWARD },
> +	{ 0x800ff41b, KEY_PREVIOUS },
> +	{ 0x800ff41a, KEY_NEXT },
...
> diff --git a/drivers/media/IR/keymaps/rc-imon-pad.c 
> b/drivers/media/IR/keymaps/rc-imon-pad.c
> new file mode 100644
> index 0000000..331ba90
> --- /dev/null
> +++ b/drivers/media/IR/keymaps/rc-imon-pad.c
> @@ -0,0 +1,155 @@
> +/* rc5-imon-pad.c - Keytable for SoundGraph iMON PAD and Antec Veris
> + * RM-200 Remote Control
> + *
> + * Copyright (c) 2010 by Jarod Wilson <jarod@redhat.com>
> + *
> + * This program is free software; you can redistribute it and/or modify
> + * it under the terms of the GNU General Public License as published by
> + * the Free Software Foundation; either version 2 of the License, or
> + * (at your option) any later version.
> + */
> +
> +#include <media/rc-map.h>
> +
> +/*
> + * standard imon remote key table, which isn't really entirely
> + * "standard", as different receivers decode the same key on the
> + * same remote to different hex codes, and the silkscreened names
> + * vary a bit between the SoundGraph and Antec remotes... ugh.
> + */
> +static struct ir_scancode imon_pad[] = {
> +	/* keys sorted mostly by frequency of use to optimize lookups */

Ditto


-- 
David Härdeman
