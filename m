Return-path: <linux-media-owner@vger.kernel.org>
Received: from mail.gmx.net ([213.165.64.20]:45053 "HELO mail.gmx.net"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with SMTP
	id S1751890AbZKRKMj (ORCPT <rfc822;linux-media@vger.kernel.org>);
	Wed, 18 Nov 2009 05:12:39 -0500
Date: Wed, 18 Nov 2009 11:12:47 +0100 (CET)
From: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
To: Antonio Ospite <ospite@studenti.unina.it>
cc: Linux Media Mailing List <linux-media@vger.kernel.org>,
	Eric Miao <eric.y.miao@gmail.com>,
	linux-arm-kernel@lists.infradead.org,
	Mike Rapoport <mike@compulab.co.il>,
	Juergen Beisert <j.beisert@pengutronix.de>,
	Robert Jarzmik <robert.jarzmik@free.fr>
Subject: Re: [PATCH 2/3] pcm990-baseboard: don't use pxa_camera init() callback
In-Reply-To: <1258495463-26029-3-git-send-email-ospite@studenti.unina.it>
Message-ID: <Pine.LNX.4.64.0911181110180.5702@axis700.grange>
References: <1258495463-26029-1-git-send-email-ospite@studenti.unina.it>
 <1258495463-26029-3-git-send-email-ospite@studenti.unina.it>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

On Tue, 17 Nov 2009, Antonio Ospite wrote:

> pxa_camera init() is going to be removed.
> Configure PXA CIF pins directly in machine init function.

Same comment as to patch 1/3.

> 
> Signed-off-by: Antonio Ospite <ospite@studenti.unina.it>

Even though the change seems obvious, it better be tested - in case 
someone reconfigures camera pins somewhere after 
pcm990_baseboard_init()... Juergen, would you be able to test it?

Thanks
Guennadi

> ---
>  arch/arm/mach-pxa/pcm990-baseboard.c |    8 +-------
>  1 files changed, 1 insertions(+), 7 deletions(-)
> 
> diff --git a/arch/arm/mach-pxa/pcm990-baseboard.c b/arch/arm/mach-pxa/pcm990-baseboard.c
> index bbda570..d5255ae 100644
> --- a/arch/arm/mach-pxa/pcm990-baseboard.c
> +++ b/arch/arm/mach-pxa/pcm990-baseboard.c
> @@ -359,19 +359,12 @@ static unsigned long pcm990_camera_pin_config[] = {
>  	GPIO44_CIF_LV,
>  };
>  
> -static int pcm990_pxacamera_init(struct device *dev)
> -{
> -	pxa2xx_mfp_config(ARRAY_AND_SIZE(pcm990_camera_pin_config));
> -	return 0;
> -}
> -
>  /*
>   * CICR4: PCLK_EN:	Pixel clock is supplied by the sensor
>   *	MCLK_EN:	Master clock is generated by PXA
>   *	PCP:		Data sampled on the falling edge of pixel clock
>   */
>  struct pxacamera_platform_data pcm990_pxacamera_platform_data = {
> -	.init	= pcm990_pxacamera_init,
>  	.flags  = PXA_CAMERA_MASTER | PXA_CAMERA_DATAWIDTH_8 | PXA_CAMERA_DATAWIDTH_10 |
>  		PXA_CAMERA_PCLK_EN | PXA_CAMERA_MCLK_EN/* | PXA_CAMERA_PCP*/,
>  	.mclk_10khz = 1000,
> @@ -532,6 +525,7 @@ void __init pcm990_baseboard_init(void)
>  	pxa_set_ac97_info(NULL);
>  
>  #if defined(CONFIG_VIDEO_PXA27x) || defined(CONFIG_VIDEO_PXA27x_MODULE)
> +	pxa2xx_mfp_config(ARRAY_AND_SIZE(pcm990_camera_pin_config));
>  	pxa_set_camera_info(&pcm990_pxacamera_platform_data);
>  
>  	i2c_register_board_info(0, ARRAY_AND_SIZE(pcm990_i2c_devices));
> -- 
> 1.6.5.2
> 

---
Guennadi Liakhovetski, Ph.D.
Freelance Open-Source Software Developer
http://www.open-technology.de/
