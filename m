Return-path: <video4linux-list-bounces@redhat.com>
Received: from mx3.redhat.com (mx3.redhat.com [172.16.48.32])
	by int-mx1.corp.redhat.com (8.13.1/8.13.1) with ESMTP id m5TMYdrT011153
	for <video4linux-list@redhat.com>; Sun, 29 Jun 2008 18:34:39 -0400
Received: from fg-out-1718.google.com (fg-out-1718.google.com [72.14.220.158])
	by mx3.redhat.com (8.13.8/8.13.8) with ESMTP id m5TMYSRR006162
	for <video4linux-list@redhat.com>; Sun, 29 Jun 2008 18:34:28 -0400
Received: by fg-out-1718.google.com with SMTP id e21so777604fga.7
	for <video4linux-list@redhat.com>; Sun, 29 Jun 2008 15:34:27 -0700 (PDT)
Message-ID: <30353c3d0806291534y3b79d27aob9c4955b6d4ecb9c@mail.gmail.com>
Date: Sun, 29 Jun 2008 18:34:27 -0400
From: "David Ellingsworth" <david@identd.dyndns.org>
To: video4linux-list@redhat.com, "Jaime Velasco Juan" <jsagarribay@gmail.com>
In-Reply-To: <30353c3d0806281840y76796eebh3beae577a24f6049@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_Part_2084_32745573.1214778867713"
References: <30353c3d0806281840y76796eebh3beae577a24f6049@mail.gmail.com>
Cc: 
Subject: Re: [RFT v2] stk-webcam: Fix video_device handling
List-Unsubscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/mailman/private/video4linux-list>
List-Post: <mailto:video4linux-list@redhat.com>
List-Help: <mailto:video4linux-list-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=subscribe>
Sender: video4linux-list-bounces@redhat.com
Errors-To: video4linux-list-bounces@redhat.com
List-ID: <video4linux-list@redhat.com>

------=_Part_2084_32745573.1214778867713
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

[RFC v2.1] This patch should cleanly apply to the v4l-dvb devel branch
Patch attached.

Regards,

David Ellingsworth

------=_Part_2084_32745573.1214778867713
Content-Type: text/x-diff; name=0002-stk-camera-fix-video_device-handling.patch
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fi27y5rm0
Content-Disposition: attachment;
	filename=0002-stk-camera-fix-video_device-handling.patch

RnJvbSAyMTBhNGNhMWYzZDU5ZWMzZDE1MmJmOTE3N2ZkYTc1MGYwOTBmY2Y4IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBEYXZpZCBFbGxpbmdzd29ydGggPGRhdmlkQGlkZW50ZC5keW5k
bnMub3JnPgpEYXRlOiBTdW4sIDI5IEp1biAyMDA4IDE0OjM3OjU1IC0wNDAwClN1YmplY3Q6IFtQ
QVRDSF0gc3RrLWNhbWVyYTogZml4IHZpZGVvX2RldmljZSBoYW5kbGluZwoKClNpZ25lZC1vZmYt
Ynk6IERhdmlkIEVsbGluZ3N3b3J0aCA8ZGF2aWRAaWRlbnRkLmR5bmRucy5vcmc+Ci0tLQogZHJp
dmVycy9tZWRpYS92aWRlby9zdGstd2ViY2FtLmMgfCAgMTA2ICsrKysrKysrKysrKysrKy0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL21lZGlhL3ZpZGVvL3N0ay13ZWJjYW0uaCB8ICAg
IDMgKy0KIDIgZmlsZXMgY2hhbmdlZCwgNDMgaW5zZXJ0aW9ucygrKSwgNjYgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS92aWRlby9zdGstd2ViY2FtLmMgYi9kcml2ZXJz
L21lZGlhL3ZpZGVvL3N0ay13ZWJjYW0uYwppbmRleCBmMzA4YzM4Li4zNzgwNTlmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL21lZGlhL3ZpZGVvL3N0ay13ZWJjYW0uYworKysgYi9kcml2ZXJzL21lZGlh
L3ZpZGVvL3N0ay13ZWJjYW0uYwpAQCAtNjgsMTEgKzY4LDYgQEAgc3RhdGljIHZvaWQgc3RrX2Nh
bWVyYV9jbGVhbnVwKHN0cnVjdCBrcmVmICprcmVmKQogewogCXN0cnVjdCBzdGtfY2FtZXJhICpk
ZXYgPSB0b19zdGtfY2FtZXJhKGtyZWYpOwogCi0JU1RLX0lORk8oIlN5bnRlayBVU0IyLjAgQ2Ft
ZXJhIHJlbGVhc2UgcmVzb3VyY2VzIgotCQkiIHZpZGVvIGRldmljZSAvZGV2L3ZpZGVvJWRcbiIs
IGRldi0+dmRldi5taW5vcik7Ci0JdmlkZW9fdW5yZWdpc3Rlcl9kZXZpY2UoJmRldi0+dmRldik7
Ci0JZGV2LT52ZGV2LnByaXYgPSBOVUxMOwotCiAJaWYgKGRldi0+c2lvX2J1ZnMgIT0gTlVMTCB8
fCBkZXYtPmlzb2J1ZnMgIT0gTlVMTCkKIAkJU1RLX0VSUk9SKCJXZSBhcmUgbGVha2luZyBtZW1v
cnlcbiIpOwogCXVzYl9wdXRfaW50ZihkZXYtPmludGVyZmFjZSk7CkBAIC0yNTUsNyArMjUwLDcg
QEAgc3RhdGljIHNzaXplX3Qgc2hvd19icmlnaHRuZXNzKHN0cnVjdCBkZXZpY2UgKmNsYXNzLAog
CQkJc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKIHsKIAlzdHJ1Y3Qg
dmlkZW9fZGV2aWNlICp2ZGV2ID0gdG9fdmlkZW9fZGV2aWNlKGNsYXNzKTsKLQlzdHJ1Y3Qgc3Rr
X2NhbWVyYSAqZGV2ID0gdmRldl90b19jYW1lcmEodmRldik7CisJc3RydWN0IHN0a19jYW1lcmEg
KmRldiA9IGRldl9nZXRfZHJ2ZGF0YSh2ZGV2LT5kZXYpOwogCiAJcmV0dXJuIHNwcmludGYoYnVm
LCAiJVhcbiIsIGRldi0+dnNldHRpbmdzLmJyaWdodG5lc3MpOwogfQpAQCAtMjY4LDcgKzI2Myw3
IEBAIHN0YXRpYyBzc2l6ZV90IHN0b3JlX2JyaWdodG5lc3Moc3RydWN0IGRldmljZSAqY2xhc3Ms
CiAJaW50IHJldDsKIAogCXN0cnVjdCB2aWRlb19kZXZpY2UgKnZkZXYgPSB0b192aWRlb19kZXZp
Y2UoY2xhc3MpOwotCXN0cnVjdCBzdGtfY2FtZXJhICpkZXYgPSB2ZGV2X3RvX2NhbWVyYSh2ZGV2
KTsKKwlzdHJ1Y3Qgc3RrX2NhbWVyYSAqZGV2ID0gZGV2X2dldF9kcnZkYXRhKHZkZXYtPmRldik7
CiAKIAl2YWx1ZSA9IHNpbXBsZV9zdHJ0b3VsKGJ1ZiwgJmVuZHAsIDE2KTsKIApAQCAtMjg1LDcg
KzI4MCw3IEBAIHN0YXRpYyBzc2l6ZV90IHNob3dfaGZsaXAoc3RydWN0IGRldmljZSAqY2xhc3Ms
CiAJCXN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLCBjaGFyICpidWYpCiB7CiAJc3RydWN0
IHZpZGVvX2RldmljZSAqdmRldiA9IHRvX3ZpZGVvX2RldmljZShjbGFzcyk7Ci0Jc3RydWN0IHN0
a19jYW1lcmEgKmRldiA9IHZkZXZfdG9fY2FtZXJhKHZkZXYpOworCXN0cnVjdCBzdGtfY2FtZXJh
ICpkZXYgPSBkZXZfZ2V0X2RydmRhdGEodmRldi0+ZGV2KTsKIAogCXJldHVybiBzcHJpbnRmKGJ1
ZiwgIiVkXG4iLCBkZXYtPnZzZXR0aW5ncy5oZmxpcCk7CiB9CkBAIC0yOTQsNyArMjg5LDcgQEAg
c3RhdGljIHNzaXplX3Qgc3RvcmVfaGZsaXAoc3RydWN0IGRldmljZSAqY2xhc3MsCiAJCXN0cnVj
dCBkZXZpY2VfYXR0cmlidXRlICphdHRyLCBjb25zdCBjaGFyICpidWYsIHNpemVfdCBjb3VudCkK
IHsKIAlzdHJ1Y3QgdmlkZW9fZGV2aWNlICp2ZGV2ID0gdG9fdmlkZW9fZGV2aWNlKGNsYXNzKTsK
LQlzdHJ1Y3Qgc3RrX2NhbWVyYSAqZGV2ID0gdmRldl90b19jYW1lcmEodmRldik7CisJc3RydWN0
IHN0a19jYW1lcmEgKmRldiA9IGRldl9nZXRfZHJ2ZGF0YSh2ZGV2LT5kZXYpOwogCiAJaWYgKHN0
cm5jbXAoYnVmLCAiMSIsIDEpID09IDApCiAJCWRldi0+dnNldHRpbmdzLmhmbGlwID0gMTsKQEAg
LTMxMCw3ICszMDUsNyBAQCBzdGF0aWMgc3NpemVfdCBzaG93X3ZmbGlwKHN0cnVjdCBkZXZpY2Ug
KmNsYXNzLAogCQlzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQogewog
CXN0cnVjdCB2aWRlb19kZXZpY2UgKnZkZXYgPSB0b192aWRlb19kZXZpY2UoY2xhc3MpOwotCXN0
cnVjdCBzdGtfY2FtZXJhICpkZXYgPSB2ZGV2X3RvX2NhbWVyYSh2ZGV2KTsKKwlzdHJ1Y3Qgc3Rr
X2NhbWVyYSAqZGV2ID0gZGV2X2dldF9kcnZkYXRhKHZkZXYtPmRldik7CiAKIAlyZXR1cm4gc3By
aW50ZihidWYsICIlZFxuIiwgZGV2LT52c2V0dGluZ3MudmZsaXApOwogfQpAQCAtMzE5LDcgKzMx
NCw3IEBAIHN0YXRpYyBzc2l6ZV90IHN0b3JlX3ZmbGlwKHN0cnVjdCBkZXZpY2UgKmNsYXNzLAog
CQlzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwgY29uc3QgY2hhciAqYnVmLCBzaXplX3Qg
Y291bnQpCiB7CiAJc3RydWN0IHZpZGVvX2RldmljZSAqdmRldiA9IHRvX3ZpZGVvX2RldmljZShj
bGFzcyk7Ci0Jc3RydWN0IHN0a19jYW1lcmEgKmRldiA9IHZkZXZfdG9fY2FtZXJhKHZkZXYpOwor
CXN0cnVjdCBzdGtfY2FtZXJhICpkZXYgPSBkZXZfZ2V0X2RydmRhdGEodmRldi0+ZGV2KTsKIAog
CWlmIChzdHJuY21wKGJ1ZiwgIjEiLCAxKSA9PSAwKQogCQlkZXYtPnZzZXR0aW5ncy52ZmxpcCA9
IDE7CkBAIC02ODMsMTEgKzY3OCwxMSBAQCBzdGF0aWMgaW50IHY0bF9zdGtfb3BlbihzdHJ1Y3Qg
aW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZnApCiAJc3RydWN0IHZpZGVvX2RldmljZSAqdmRl
djsKIAogCXZkZXYgPSB2aWRlb19kZXZkYXRhKGZwKTsKLQlkZXYgPSB2ZGV2X3RvX2NhbWVyYSh2
ZGV2KTsKKwlkZXYgPSBkZXZfZ2V0X2RydmRhdGEodmRldi0+ZGV2KTsKIAogCWlmIChkZXYgPT0g
TlVMTCB8fCAhaXNfcHJlc2VudChkZXYpKQogCQlyZXR1cm4gLUVOWElPOwotCWZwLT5wcml2YXRl
X2RhdGEgPSB2ZGV2OworCWZwLT5wcml2YXRlX2RhdGEgPSBkZXY7CiAJa3JlZl9nZXQoJmRldi0+
a3JlZik7CiAJdXNiX2F1dG9wbV9nZXRfaW50ZXJmYWNlKGRldi0+aW50ZXJmYWNlKTsKIApAQCAt
Njk2LDE5ICs2OTEsNyBAQCBzdGF0aWMgaW50IHY0bF9zdGtfb3BlbihzdHJ1Y3QgaW5vZGUgKmlu
b2RlLCBzdHJ1Y3QgZmlsZSAqZnApCiAKIHN0YXRpYyBpbnQgdjRsX3N0a19yZWxlYXNlKHN0cnVj
dCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmcCkKIHsKLQlzdHJ1Y3Qgc3RrX2NhbWVyYSAq
ZGV2OwotCXN0cnVjdCB2aWRlb19kZXZpY2UgKnZkZXY7Ci0KLQl2ZGV2ID0gdmlkZW9fZGV2ZGF0
YShmcCk7Ci0JaWYgKHZkZXYgPT0gTlVMTCkgewotCQlTVEtfRVJST1IoInY0bF9yZWxlYXNlIGNh
bGxlZCB3L28gdmlkZW8gZGV2ZGF0YVxuIik7Ci0JCXJldHVybiAtRUZBVUxUOwotCX0KLQlkZXYg
PSB2ZGV2X3RvX2NhbWVyYSh2ZGV2KTsKLQlpZiAoZGV2ID09IE5VTEwpIHsKLQkJU1RLX0VSUk9S
KCJ2NGxfcmVsZWFzZSBjYWxsZWQgb24gcmVtb3ZlZCBkZXZpY2VcbiIpOwotCQlyZXR1cm4gLUVO
T0RFVjsKLQl9CisJc3RydWN0IHN0a19jYW1lcmEgKmRldiA9IGZwLT5wcml2YXRlX2RhdGE7CiAK
IAlpZiAoZGV2LT5vd25lciAhPSBmcCkgewogCQl1c2JfYXV0b3BtX3B1dF9pbnRlcmZhY2UoZGV2
LT5pbnRlcmZhY2UpOwpAQCAtNzM0LDE0ICs3MTcsOCBAQCBzdGF0aWMgc3NpemVfdCB2NGxfc3Rr
X3JlYWQoc3RydWN0IGZpbGUgKmZwLCBjaGFyIF9fdXNlciAqYnVmLAogCWludCBpOwogCWludCBy
ZXQ7CiAJdW5zaWduZWQgbG9uZyBmbGFnczsKLQlzdHJ1Y3Qgc3RrX2NhbWVyYSAqZGV2OwotCXN0
cnVjdCB2aWRlb19kZXZpY2UgKnZkZXY7CiAJc3RydWN0IHN0a19zaW9fYnVmZmVyICpzYnVmOwot
Ci0JdmRldiA9IHZpZGVvX2RldmRhdGEoZnApOwotCWlmICh2ZGV2ID09IE5VTEwpCi0JCXJldHVy
biAtRUZBVUxUOwotCWRldiA9IHZkZXZfdG9fY2FtZXJhKHZkZXYpOworCXN0cnVjdCBzdGtfY2Ft
ZXJhICpkZXYgPSBmcC0+cHJpdmF0ZV9kYXRhOwogCiAJaWYgKGRldiA9PSBOVUxMKQogCQlyZXR1
cm4gLUVJTzsKQEAgLTgwMCwxNSArNzc3LDggQEAgc3RhdGljIHNzaXplX3QgdjRsX3N0a19yZWFk
KHN0cnVjdCBmaWxlICpmcCwgY2hhciBfX3VzZXIgKmJ1ZiwKIAogc3RhdGljIHVuc2lnbmVkIGlu
dCB2NGxfc3RrX3BvbGwoc3RydWN0IGZpbGUgKmZwLCBwb2xsX3RhYmxlICp3YWl0KQogewotCXN0
cnVjdCBzdGtfY2FtZXJhICpkZXY7Ci0Jc3RydWN0IHZpZGVvX2RldmljZSAqdmRldjsKLQotCXZk
ZXYgPSB2aWRlb19kZXZkYXRhKGZwKTsKLQotCWlmICh2ZGV2ID09IE5VTEwpCi0JCXJldHVybiAt
RUZBVUxUOworCXN0cnVjdCBzdGtfY2FtZXJhICpkZXYgPSBmcC0+cHJpdmF0ZV9kYXRhOwogCi0J
ZGV2ID0gdmRldl90b19jYW1lcmEodmRldik7CiAJaWYgKGRldiA9PSBOVUxMKQogCQlyZXR1cm4g
LUVOT0RFVjsKIApAQCAtODQ2LDE2ICs4MTYsMTIgQEAgc3RhdGljIGludCB2NGxfc3RrX21tYXAo
c3RydWN0IGZpbGUgKmZwLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkKIAl1bnNpZ25lZCBp
bnQgaTsKIAlpbnQgcmV0OwogCXVuc2lnbmVkIGxvbmcgb2Zmc2V0ID0gdm1hLT52bV9wZ29mZiA8
PCBQQUdFX1NISUZUOwotCXN0cnVjdCBzdGtfY2FtZXJhICpkZXY7Ci0Jc3RydWN0IHZpZGVvX2Rl
dmljZSAqdmRldjsKKwlzdHJ1Y3Qgc3RrX2NhbWVyYSAqZGV2ID0gZnAtPnByaXZhdGVfZGF0YTsK
IAlzdHJ1Y3Qgc3RrX3Npb19idWZmZXIgKnNidWYgPSBOVUxMOwogCiAJaWYgKCEodm1hLT52bV9m
bGFncyAmIFZNX1dSSVRFKSB8fCAhKHZtYS0+dm1fZmxhZ3MgJiBWTV9TSEFSRUQpKQogCQlyZXR1
cm4gLUVJTlZBTDsKIAotCXZkZXYgPSB2aWRlb19kZXZkYXRhKGZwKTsKLQlkZXYgPSB2ZGV2X3Rv
X2NhbWVyYSh2ZGV2KTsKLQogCWZvciAoaSA9IDA7IGkgPCBkZXYtPm5fc2J1ZnM7IGkrKykgewog
CQlpZiAoZGV2LT5zaW9fYnVmc1tpXS52NGxidWYubS5vZmZzZXQgPT0gb2Zmc2V0KSB7CiAJCQlz
YnVmID0gZGV2LT5zaW9fYnVmcyArIGk7CkBAIC0xMzI3LDEwICsxMjkzLDYgQEAgc3RhdGljIHN0
cnVjdCBmaWxlX29wZXJhdGlvbnMgdjRsX3N0a19mb3BzID0gewogCS5sbHNlZWsgPSBub19sbHNl
ZWsKIH07CiAKLXN0YXRpYyB2b2lkIHN0a192NGxfZGV2X3JlbGVhc2Uoc3RydWN0IHZpZGVvX2Rl
dmljZSAqdmQpCi17Ci19Ci0KIHN0YXRpYyBzdHJ1Y3QgdmlkZW9fZGV2aWNlIHN0a192NGxfZGF0
YSA9IHsKIAkubmFtZSA9ICJzdGt3ZWJjYW0iLAogCS50eXBlID0gVkZMX1RZUEVfR1JBQkJFUiwK
QEAgLTEzMzksNyArMTMwMSw3IEBAIHN0YXRpYyBzdHJ1Y3QgdmlkZW9fZGV2aWNlIHN0a192NGxf
ZGF0YSA9IHsKIAkudHZub3JtcyA9IFY0TDJfU1REX1VOS05PV04sCiAJLmN1cnJlbnRfbm9ybSA9
IFY0TDJfU1REX1VOS05PV04sCiAJLmZvcHMgPSAmdjRsX3N0a19mb3BzLAotCS5yZWxlYXNlID0g
c3RrX3Y0bF9kZXZfcmVsZWFzZSwKKwkucmVsZWFzZSA9IHZpZGVvX2RldmljZV9yZWxlYXNlLAog
CiAJLnZpZGlvY19xdWVyeWNhcCA9IHN0a192aWRpb2NfcXVlcnljYXAsCiAJLnZpZGlvY19lbnVt
X2ZtdF92aWRfY2FwID0gc3RrX3ZpZGlvY19lbnVtX2ZtdF92aWRfY2FwLApAQCAtMTM2NywxNiAr
MTMyOSwxNiBAQCBzdGF0aWMgaW50IHN0a19yZWdpc3Rlcl92aWRlb19kZXZpY2Uoc3RydWN0IHN0
a19jYW1lcmEgKmRldikKIHsKIAlpbnQgZXJyOwogCi0JZGV2LT52ZGV2ID0gc3RrX3Y0bF9kYXRh
OwotCWRldi0+dmRldi5kZWJ1ZyA9IGRlYnVnOwotCWRldi0+dmRldi5kZXYgPSAmZGV2LT5pbnRl
cmZhY2UtPmRldjsKLQlkZXYtPnZkZXYucHJpdiA9IGRldjsKLQllcnIgPSB2aWRlb19yZWdpc3Rl
cl9kZXZpY2UoJmRldi0+dmRldiwgVkZMX1RZUEVfR1JBQkJFUiwgLTEpOworCSpkZXYtPnZkZXYg
PSBzdGtfdjRsX2RhdGE7CisJZGV2LT52ZGV2LT5kZWJ1ZyA9IGRlYnVnOworCWRldi0+dmRldi0+
ZGV2ID0gJmRldi0+aW50ZXJmYWNlLT5kZXY7CisJZGV2X3NldF9kcnZkYXRhKGRldi0+dmRldi0+
ZGV2LCBkZXYpOworCWVyciA9IHZpZGVvX3JlZ2lzdGVyX2RldmljZShkZXYtPnZkZXYsIFZGTF9U
WVBFX0dSQUJCRVIsIC0xKTsKIAlpZiAoZXJyKQogCQlTVEtfRVJST1IoInY0bCByZWdpc3RyYXRp
b24gZmFpbGVkXG4iKTsKIAllbHNlCiAJCVNUS19JTkZPKCJTeW50ZWsgVVNCMi4wIENhbWVyYSBp
cyBub3cgY29udHJvbGxpbmcgdmlkZW8gZGV2aWNlIgotCQkJIiAvZGV2L3ZpZGVvJWRcbiIsIGRl
di0+dmRldi5taW5vcik7CisJCQkiIC9kZXYvdmlkZW8lZFxuIiwgZGV2LT52ZGV2LT5taW5vcik7
CiAJcmV0dXJuIGVycjsKIH0KIApAQCAtMTM4Nyw3ICsxMzQ5LDcgQEAgc3RhdGljIGludCBzdGtf
Y2FtZXJhX3Byb2JlKHN0cnVjdCB1c2JfaW50ZXJmYWNlICppbnRlcmZhY2UsCiAJCWNvbnN0IHN0
cnVjdCB1c2JfZGV2aWNlX2lkICppZCkKIHsKIAlpbnQgaTsKLQlpbnQgZXJyOworCWludCBlcnIg
PSAwOwogCiAJc3RydWN0IHN0a19jYW1lcmEgKmRldiA9IE5VTEw7CiAJc3RydWN0IHVzYl9kZXZp
Y2UgKnVkZXYgPSBpbnRlcmZhY2VfdG9fdXNiZGV2KGludGVyZmFjZSk7CkBAIC0xNDMzLDggKzEz
OTUsOCBAQCBzdGF0aWMgaW50IHN0a19jYW1lcmFfcHJvYmUoc3RydWN0IHVzYl9pbnRlcmZhY2Ug
KmludGVyZmFjZSwKIAl9CiAJaWYgKCFkZXYtPmlzb2NfZXApIHsKIAkJU1RLX0VSUk9SKCJDb3Vs
ZCBub3QgZmluZCBpc29jLWluIGVuZHBvaW50Iik7Ci0JCWtyZWZfcHV0KCZkZXYtPmtyZWYsIHN0
a19jYW1lcmFfY2xlYW51cCk7Ci0JCXJldHVybiAtRU5PREVWOworCQllcnIgPSAtRU5PREVWOwor
CQlnb3RvIGVycm9yOwogCX0KIAlkZXYtPnZzZXR0aW5ncy5icmlnaHRuZXNzID0gMHg3ZmZmOwog
CWRldi0+dnNldHRpbmdzLnBhbGV0dGUgPSBWNEwyX1BJWF9GTVRfUkdCNTY1OwpAQCAtMTQ0Niwx
NiArMTQwOCwyNyBAQCBzdGF0aWMgaW50IHN0a19jYW1lcmFfcHJvYmUoc3RydWN0IHVzYl9pbnRl
cmZhY2UgKmludGVyZmFjZSwKIAogCXVzYl9zZXRfaW50ZmRhdGEoaW50ZXJmYWNlLCBkZXYpOwog
CisJZGV2LT52ZGV2ID0gdmlkZW9fZGV2aWNlX2FsbG9jKCk7CisJaWYgKGRldi0+dmRldiA9PSBO
VUxMKSB7CisJCWVyciA9IC1FTk9NRU07CisJCWdvdG8gZXJyb3I7CisJfQorCiAJZXJyID0gc3Rr
X3JlZ2lzdGVyX3ZpZGVvX2RldmljZShkZXYpOwogCWlmIChlcnIpIHsKLQkJa3JlZl9wdXQoJmRl
di0+a3JlZiwgc3RrX2NhbWVyYV9jbGVhbnVwKTsKLQkJcmV0dXJuIGVycjsKKwkJZ290byBlcnJv
cl92ZGV2OwogCX0KIAotCXN0a19jcmVhdGVfc3lzZnNfZmlsZXMoJmRldi0+dmRldik7CisJc3Rr
X2NyZWF0ZV9zeXNmc19maWxlcyhkZXYtPnZkZXYpOwogCXVzYl9hdXRvcG1fZW5hYmxlKGRldi0+
aW50ZXJmYWNlKTsKIAogCXJldHVybiAwOworCitlcnJvcl92ZGV2OgorCXZpZGVvX2RldmljZV9y
ZWxlYXNlKGRldi0+dmRldik7CitlcnJvcjoKKwlrcmVmX3B1dCgmZGV2LT5rcmVmLCBzdGtfY2Ft
ZXJhX2NsZWFudXApOworCXJldHVybiBlcnI7CiB9CiAKIHN0YXRpYyB2b2lkIHN0a19jYW1lcmFf
ZGlzY29ubmVjdChzdHJ1Y3QgdXNiX2ludGVyZmFjZSAqaW50ZXJmYWNlKQpAQCAtMTQ2Niw3ICsx
NDM5LDEyIEBAIHN0YXRpYyB2b2lkIHN0a19jYW1lcmFfZGlzY29ubmVjdChzdHJ1Y3QgdXNiX2lu
dGVyZmFjZSAqaW50ZXJmYWNlKQogCXVuc2V0X3ByZXNlbnQoZGV2KTsKIAogCXdha2VfdXBfaW50
ZXJydXB0aWJsZSgmZGV2LT53YWl0X2ZyYW1lKTsKLQlzdGtfcmVtb3ZlX3N5c2ZzX2ZpbGVzKCZk
ZXYtPnZkZXYpOworCXN0a19yZW1vdmVfc3lzZnNfZmlsZXMoZGV2LT52ZGV2KTsKKworCVNUS19J
TkZPKCJTeW50ZWsgVVNCMi4wIENhbWVyYSByZWxlYXNlIHJlc291cmNlcyIKKwkJIiB2aWRlbyBk
ZXZpY2UgL2Rldi92aWRlbyVkXG4iLCBkZXYtPnZkZXYtPm1pbm9yKTsKKworCXZpZGVvX3VucmVn
aXN0ZXJfZGV2aWNlKGRldi0+dmRldik7CiAKIAlrcmVmX3B1dCgmZGV2LT5rcmVmLCBzdGtfY2Ft
ZXJhX2NsZWFudXApOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS92aWRlby9zdGstd2Vi
Y2FtLmggYi9kcml2ZXJzL21lZGlhL3ZpZGVvL3N0ay13ZWJjYW0uaAppbmRleCBkZjRkZmVmLi44
NDI1N2ZlIDEwMDY0NAotLS0gYS9kcml2ZXJzL21lZGlhL3ZpZGVvL3N0ay13ZWJjYW0uaAorKysg
Yi9kcml2ZXJzL21lZGlhL3ZpZGVvL3N0ay13ZWJjYW0uaApAQCAtOTEsNyArOTEsNyBAQCBzdHJ1
Y3QgcmVndmFsIHsKIH07CiAKIHN0cnVjdCBzdGtfY2FtZXJhIHsKLQlzdHJ1Y3QgdmlkZW9fZGV2
aWNlIHZkZXY7CisJc3RydWN0IHZpZGVvX2RldmljZSAqdmRldjsKIAlzdHJ1Y3QgdXNiX2Rldmlj
ZSAqdWRldjsKIAlzdHJ1Y3QgdXNiX2ludGVyZmFjZSAqaW50ZXJmYWNlOwogCWludCB3ZWJjYW1f
bW9kZWw7CkBAIC0xMjIsNyArMTIyLDYgQEAgc3RydWN0IHN0a19jYW1lcmEgewogfTsKIAogI2Rl
ZmluZSB0b19zdGtfY2FtZXJhKGQpIGNvbnRhaW5lcl9vZihkLCBzdHJ1Y3Qgc3RrX2NhbWVyYSwg
a3JlZikKLSNkZWZpbmUgdmRldl90b19jYW1lcmEoZCkgY29udGFpbmVyX29mKGQsIHN0cnVjdCBz
dGtfY2FtZXJhLCB2ZGV2KQogCiB2b2lkIHN0a19jYW1lcmFfZGVsZXRlKHN0cnVjdCBrcmVmICop
OwogaW50IHN0a19jYW1lcmFfd3JpdGVfcmVnKHN0cnVjdCBzdGtfY2FtZXJhICosIHUxNiwgdTgp
OwotLSAKMS41LjUuMQoK
------=_Part_2084_32745573.1214778867713
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

--
video4linux-list mailing list
Unsubscribe mailto:video4linux-list-request@redhat.com?subject=unsubscribe
https://www.redhat.com/mailman/listinfo/video4linux-list
------=_Part_2084_32745573.1214778867713--
