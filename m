Return-path: <linux-media-owner@vger.kernel.org>
Received: from mx2.suse.de ([195.135.220.15]:49299 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1752351AbeDTNHF (ORCPT <rfc822;linux-media@vger.kernel.org>);
        Fri, 20 Apr 2018 09:07:05 -0400
Date: Fri, 20 Apr 2018 15:07:04 +0200
Message-ID: <s5hwox2uivb.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: "Mauro Carvalho Chehab" <mchehab@s-opensource.com>
Cc: <alsa-devel@alsa-project.org>,
        "Mauro Carvalho Chehab" <mchehab@infradead.org>,
        "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>,
        "Andrew Morton" <akpm@linux-foundation.org>,
        "Jaroslav Kysela" <perex@perex.cz>,
        "Linux Media Mailing List" <linux-media@vger.kernel.org>
Subject: Re: [PATCH] sound, isapnp: allow building more drivers with COMPILE_TEST
In-Reply-To: <082977bdb133dc0570f690d3f3a120207f1d63f1.1524229123.git.mchehab@s-opensource.com>
References: <082977bdb133dc0570f690d3f3a120207f1d63f1.1524229123.git.mchehab@s-opensource.com>
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-media-owner@vger.kernel.org
List-ID: <linux-media.vger.kernel.org>

On Fri, 20 Apr 2018 14:58:55 +0200,
Mauro Carvalho Chehab wrote:
> 
> Drivers that depend on ISAPNP currently can't be built with
> COMPILE_TEST. However, looking at isapnp.h, there are already
> stubs there to allow drivers to include it even when isa
> PNP is not supported.
> 
> So, remove such dependencies when COMPILE_TEST.
> 
> Signed-off-by: Mauro Carvalho Chehab <mchehab@s-opensource.com>

Acked-by: Takashi Iwai <tiwai@suse.de>


thanks,

Takashi


> ---
>  drivers/pnp/isapnp/Kconfig | 2 +-
>  sound/isa/Kconfig          | 6 +++---
>  2 files changed, 4 insertions(+), 4 deletions(-)
> 
> diff --git a/drivers/pnp/isapnp/Kconfig b/drivers/pnp/isapnp/Kconfig
> index f1ef36673ad4..a1af146d2d90 100644
> --- a/drivers/pnp/isapnp/Kconfig
> +++ b/drivers/pnp/isapnp/Kconfig
> @@ -3,7 +3,7 @@
>  #
>  config ISAPNP
>  	bool "ISA Plug and Play support"
> -	depends on ISA
> +	depends on ISA || COMPILE_TEST
>  	help
>  	  Say Y here if you would like support for ISA Plug and Play devices.
>  	  Some information is in <file:Documentation/isapnp.txt>.
> diff --git a/sound/isa/Kconfig b/sound/isa/Kconfig
> index d2a6cdd0395c..43b35a873d78 100644
> --- a/sound/isa/Kconfig
> +++ b/sound/isa/Kconfig
> @@ -39,7 +39,7 @@ config SND_ADLIB
>  
>  config SND_AD1816A
>  	tristate "Analog Devices SoundPort AD1816A"
> -	depends on PNP && ISA
> +	depends on PNP
>  	select ISAPNP
>  	select SND_OPL3_LIB
>  	select SND_MPU401_UART
> @@ -67,7 +67,7 @@ config SND_AD1848
>  
>  config SND_ALS100
>  	tristate "Diamond Tech. DT-019x and Avance Logic ALSxxx"
> -	depends on PNP && ISA
> +	depends on PNP
>  	select ISAPNP
>  	select SND_OPL3_LIB
>  	select SND_MPU401_UART
> @@ -108,7 +108,7 @@ config SND_AZT2316
>  
>  config SND_AZT2320
>  	tristate "Aztech Systems AZT2320"
> -	depends on PNP && ISA
> +	depends on PNP
>  	select ISAPNP
>  	select SND_OPL3_LIB
>  	select SND_MPU401_UART
> -- 
> 2.14.3
> 
> 
