Return-path: <video4linux-list-bounces@redhat.com>
Message-ID: <2ac79fa40901092218y6af40570m5cbe5aeb598038b2@mail.gmail.com>
Date: Sat, 10 Jan 2009 13:18:48 +0700
From: "=?UTF-8?Q?Nam_Ph=E1=BA=A1m_Th=C3=A0nh?=" <phamthanhnam.ptn@gmail.com>
To: "Mauro Carvalho Chehab" <mchehab@infradead.org>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_Part_231257_25414223.1231568328114"
Cc: video4linux-list <video4linux-list@redhat.com>,
	Linux Media Mailing List <linux-media@vger.kernel.org>
Subject: [PATCH] pwc: add support for webcam snapshot button (2)
List-Unsubscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/mailman/private/video4linux-list>
List-Post: <mailto:video4linux-list@redhat.com>
List-Help: <mailto:video4linux-list-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=subscribe>
Sender: video4linux-list-bounces@redhat.com
Errors-To: video4linux-list-bounces@redhat.com
List-ID: <linux-media.vger.kernel.org>

------=_Part_231257_25414223.1231568328114
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline



------=_Part_231257_25414223.1231568328114
Content-Type: text/x-patch; name=pwc-snapshot-button.patch
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fprvx6tu0
Content-Disposition: attachment; filename=pwc-snapshot-button.patch

VGhpcyBwYXRjaCBhZGRzIHN1cHBvcnQgZm9yIFBoaWxpcHMgd2ViY2FtIHNuYXBzaG90IGJ1dHRv
biBhcyBhbgpldmVudCBpbnB1dCBkZXZpY2UsIGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIHdl
YmNhbSBkcml2ZXJzLgpTaWduZWQtb2ZmLWJ5OiBQaGFtIFRoYW5oIE5hbSA8cGhhbXRoYW5obmFt
LnB0bkBnbWFpbC5jb20+CgpkaWZmIC11TnIgYS9saW51eC9kcml2ZXJzL21lZGlhL3ZpZGVvL3B3
Yy9LY29uZmlnIGIvbGludXgvZHJpdmVycy9tZWRpYS92aWRlby9wd2MvS2NvbmZpZwotLS0gYS9s
aW51eC9kcml2ZXJzL21lZGlhL3ZpZGVvL3B3Yy9LY29uZmlnCTIwMDktMDEtMDMgMjA6MDM6NDMu
MDAwMDAwMDAwICswNzAwCisrKyBiL2xpbnV4L2RyaXZlcnMvbWVkaWEvdmlkZW8vcHdjL0tjb25m
aWcJMjAwOS0wMS0wOSAxNjowOTo0NS4wMDAwMDAwMDAgKzA3MDAKQEAgLTM1LDMgKzM1LDEzIEBA
CiAJICBTYXkgWSBoZXJlIGluIG9yZGVyIHRvIGhhdmUgdGhlIHB3YyBkcml2ZXIgZ2VuZXJhdGUg
dmVyYm9zZSBkZWJ1Z2dpbmcKIAkgIG1lc3NhZ2VzLgogCSAgQSBzcGVjaWFsIG1vZHVsZSBvcHRp
b25zICd0cmFjZScgaXMgdXNlZCB0byBjb250cm9sIHRoZSB2ZXJib3NpdHkuCisKK2NvbmZpZyBV
U0JfUFdDX0lOUFVUX0VWREVWCisJYm9vbCAiVVNCIFBoaWxpcHMgQ2FtZXJhcyBpbnB1dCBldmVu
dHMgZGV2aWNlIHN1cHBvcnQiCisJZGVmYXVsdCB5CisJZGVwZW5kcyBvbiBVU0JfUFdDICYmIElO
UFVUCisJLS0taGVscC0tLQorCSAgVGhpcyBvcHRpb24gbWFrZXMgVVNCIFBoaWxpcHMgY2FtZXJh
cyByZWdpc3RlciB0aGUgc25hcHNob3QgYnV0dG9uIGFzCisJICBhbiBpbnB1dCBkZXZpY2UgdG8g
cmVwb3J0IGJ1dHRvbiBldmVudHMuCisKKwkgIElmIHlvdSBhcmUgaW4gZG91YnQsIHNheSBZLgpk
aWZmIC11TnIgYS9saW51eC9kcml2ZXJzL21lZGlhL3ZpZGVvL3B3Yy9wd2MuaCBiL2xpbnV4L2Ry
aXZlcnMvbWVkaWEvdmlkZW8vcHdjL3B3Yy5oCi0tLSBhL2xpbnV4L2RyaXZlcnMvbWVkaWEvdmlk
ZW8vcHdjL3B3Yy5oCTIwMDktMDEtMDMgMjA6MDM6NDMuMDAwMDAwMDAwICswNzAwCisrKyBiL2xp
bnV4L2RyaXZlcnMvbWVkaWEvdmlkZW8vcHdjL3B3Yy5oCTIwMDktMDEtMDkgMTc6MDY6MDQuMDAw
MDAwMDAwICswNzAwCkBAIC0zOCw2ICszOCw5IEBACiAjaW5jbHVkZSA8bGludXgvdmlkZW9kZXYu
aD4KICNpbmNsdWRlIDxtZWRpYS92NGwyLWNvbW1vbi5oPgogI2luY2x1ZGUgPG1lZGlhL3Y0bDIt
aW9jdGwuaD4KKyNpZmRlZiBDT05GSUdfVVNCX1BXQ19JTlBVVF9FVkRFVgorI2luY2x1ZGUgPGxp
bnV4L2lucHV0Lmg+CisjZW5kaWYKIAogI2luY2x1ZGUgInB3Yy11bmNvbXByZXNzLmgiCiAjaW5j
bHVkZSA8bWVkaWEvcHdjLWlvY3RsLmg+CkBAIC0yNTYsNiArMjU5LDkgQEAKICAgIGludCBwYW5f
YW5nbGU7CQkJLyogaW4gZGVncmVlcyAqIDEwMCAqLwogICAgaW50IHRpbHRfYW5nbGU7CQkJLyog
YWJzb2x1dGUgYW5nbGU7IDAsMCBpcyBob21lIHBvc2l0aW9uICovCiAgICBpbnQgc25hcHNob3Rf
YnV0dG9uX3N0YXR1czsJCS8qIHNldCB0byAxIHdoZW4gdGhlIHVzZXIgcHVzaCB0aGUgYnV0dG9u
LCByZXNldCB0byAwIHdoZW4gdGhpcyB2YWx1ZSBpcyByZWFkICovCisjaWZkZWYgQ09ORklHX1VT
Ql9QV0NfSU5QVVRfRVZERVYKKyAgIHN0cnVjdCBpbnB1dF9kZXYgKmJ1dHRvbl9kZXY7CS8qIHdl
YmNhbSBzbmFwc2hvdCBidXR0b24gaW5wdXQgKi8KKyNlbmRpZgogCiAgICAvKioqIE1pc2MuIGRh
dGEgKioqLwogICAgd2FpdF9xdWV1ZV9oZWFkX3QgZnJhbWVxOwkJLyogV2hlbiB3YWl0aW5nIGZv
ciBhIGZyYW1lIHRvIGZpbmlzaC4uLiAqLwpkaWZmIC11TnIgYS9saW51eC9kcml2ZXJzL21lZGlh
L3ZpZGVvL3B3Yy9wd2MtaWYuYyBiL2xpbnV4L2RyaXZlcnMvbWVkaWEvdmlkZW8vcHdjL3B3Yy1p
Zi5jCi0tLSBhL2xpbnV4L2RyaXZlcnMvbWVkaWEvdmlkZW8vcHdjL3B3Yy1pZi5jCTIwMDktMDEt
MDMgMjA6MDM6NDMuMDAwMDAwMDAwICswNzAwCisrKyBiL2xpbnV4L2RyaXZlcnMvbWVkaWEvdmlk
ZW8vcHdjL3B3Yy1pZi5jCTIwMDktMDEtMTAgMTE6MjY6NDQuMDAwMDAwMDAwICswNzAwCkBAIC01
Myw2ICs1Myw3IEBACiAgICAtIFhhdmllciBSb2NoZTogUXVpY2tDYW0gUHJvIDQwMDAgSUQKICAg
IC0gSmVucyBLbnVkc2VuOiBRdWlja0NhbSBab29tIElECiAgICAtIEouIERlYmVydDogUXVpY2tD
YW0gZm9yIE5vdGVib29rcyBJRAorICAgLSBQaGFtIFRoYW5oIE5hbTogd2ViY2FtIHNuYXBzaG90
IGJ1dHRvbiBhcyBhbiBldmVudCBpbnB1dCBkZXZpY2UKICovCiAKICNpbmNsdWRlIDxsaW51eC9l
cnJuby5oPgpAQCAtNjEsNiArNjIsMTMgQEAKICNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KICNp
bmNsdWRlIDxsaW51eC9wb2xsLmg+CiAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgorI2lmZGVmIENP
TkZJR19VU0JfUFdDX0lOUFVUX0VWREVWCisjaWYgTElOVVhfVkVSU0lPTl9DT0RFIDwgS0VSTkVM
X1ZFUlNJT04oMiwgNiwgMTgpCisjaW5jbHVkZSA8bGludXgvdXNiX2lucHV0Lmg+CisjZWxzZQor
I2luY2x1ZGUgPGxpbnV4L3VzYi9pbnB1dC5oPgorI2VuZGlmCisjZW5kaWYKICNpbmNsdWRlIDxs
aW51eC92bWFsbG9jLmg+CiAjaW5jbHVkZSA8bGludXgvdmVyc2lvbi5oPgogI2luY2x1ZGUgPGFz
bS9pby5oPgpAQCAtNTg3LDYgKzU5NSwyMyBAQAogCQkJCXBkZXYtPnZmcmFtZV9jb3VudCk7CiB9
CiAKK3N0YXRpYyB2b2lkIHB3Y19zbmFwc2hvdF9idXR0b24oc3RydWN0IHB3Y19kZXZpY2UgKnBk
ZXYsIGludCBkb3duKQoreworCWlmIChkb3duKSB7CisJCVBXQ19UUkFDRSgiU25hcHNob3QgYnV0
dG9uIHByZXNzZWQuXG4iKTsKKwkJcGRldi0+c25hcHNob3RfYnV0dG9uX3N0YXR1cyA9IDE7CisJ
fSBlbHNlIHsKKwkJUFdDX1RSQUNFKCJTbmFwc2hvdCBidXR0b24gcmVsZWFzZWQuXG4iKTsKKwl9
CisKKyNpZmRlZiBDT05GSUdfVVNCX1BXQ19JTlBVVF9FVkRFVgorCWlmIChwZGV2LT5idXR0b25f
ZGV2KSB7CisJCWlucHV0X3JlcG9ydF9rZXkocGRldi0+YnV0dG9uX2RldiwgQlROXzAsIGRvd24p
OworCQlpbnB1dF9zeW5jKHBkZXYtPmJ1dHRvbl9kZXYpOworCX0KKyNlbmRpZgorfQorCiBzdGF0
aWMgaW50IHB3Y19yY3Zfc2hvcnRfcGFja2V0KHN0cnVjdCBwd2NfZGV2aWNlICpwZGV2LCBjb25z
dCBzdHJ1Y3QgcHdjX2ZyYW1lX2J1ZiAqZmJ1ZikKIHsKIAlpbnQgYXdha2UgPSAwOwpAQCAtNjA0
LDEzICs2MjksNyBAQAogCQkJcGRldi0+dmZyYW1lc19lcnJvcisrOwogCQl9CiAJCWlmICgocHRy
WzBdIF4gcGRldi0+dm1pcnJvcikgJiAweDAxKSB7Ci0JCQlpZiAocHRyWzBdICYgMHgwMSkgewot
CQkJCXBkZXYtPnNuYXBzaG90X2J1dHRvbl9zdGF0dXMgPSAxOwotCQkJCVBXQ19UUkFDRSgiU25h
cHNob3QgYnV0dG9uIHByZXNzZWQuXG4iKTsKLQkJCX0KLQkJCWVsc2UgewotCQkJCVBXQ19UUkFD
RSgiU25hcHNob3QgYnV0dG9uIHJlbGVhc2VkLlxuIik7Ci0JCQl9CisJCQlwd2Nfc25hcHNob3Rf
YnV0dG9uKHBkZXYsIHB0clswXSAmIDB4MDEpOwogCQl9CiAJCWlmICgocHRyWzBdIF4gcGRldi0+
dm1pcnJvcikgJiAweDAyKSB7CiAJCQlpZiAocHRyWzBdICYgMHgwMikKQEAgLTYzNCwxMiArNjUz
LDcgQEAKIAllbHNlIGlmIChwZGV2LT50eXBlID09IDc0MCB8fCBwZGV2LT50eXBlID09IDcyMCkg
ewogCQl1bnNpZ25lZCBjaGFyICpwdHIgPSAodW5zaWduZWQgY2hhciAqKWZidWYtPmRhdGE7CiAJ
CWlmICgocHRyWzBdIF4gcGRldi0+dm1pcnJvcikgJiAweDAxKSB7Ci0JCQlpZiAocHRyWzBdICYg
MHgwMSkgewotCQkJCXBkZXYtPnNuYXBzaG90X2J1dHRvbl9zdGF0dXMgPSAxOwotCQkJCVBXQ19U
UkFDRSgiU25hcHNob3QgYnV0dG9uIHByZXNzZWQuXG4iKTsKLQkJCX0KLQkJCWVsc2UKLQkJCQlQ
V0NfVFJBQ0UoIlNuYXBzaG90IGJ1dHRvbiByZWxlYXNlZC5cbiIpOworCQkJcHdjX3NuYXBzaG90
X2J1dHRvbihwZGV2LCBwdHJbMF0gJiAweDAxKTsKIAkJfQogCQlwZGV2LT52bWlycm9yID0gcHRy
WzBdICYgMHgwMzsKIAl9CkBAIC0xMjIxLDYgKzEyMzUsMTUgQEAKIHsKIAlwd2NfcmVtb3ZlX3N5
c2ZzX2ZpbGVzKHBkZXYtPnZkZXYpOwogCXZpZGVvX3VucmVnaXN0ZXJfZGV2aWNlKHBkZXYtPnZk
ZXYpOworCisjaWZkZWYgQ09ORklHX1VTQl9QV0NfSU5QVVRfRVZERVYKKwlpZiAocGRldi0+YnV0
dG9uX2RldikgeworCQlpbnB1dF91bnJlZ2lzdGVyX2RldmljZShwZGV2LT5idXR0b25fZGV2KTsK
KwkJaW5wdXRfZnJlZV9kZXZpY2UocGRldi0+YnV0dG9uX2Rldik7CisJCWtmcmVlKHBkZXYtPmJ1
dHRvbl9kZXYtPnBoeXMpOworCQlwZGV2LT5idXR0b25fZGV2ID0gTlVMTDsKKwl9CisjZW5kaWYK
IH0KIAogLyogTm90ZSB0aGF0IGFsbCBjbGVhbnVwIGlzIGRvbmUgaW4gdGhlIHJldmVyc2Ugb3Jk
ZXIgYXMgaW4gX29wZW4gKi8KQEAgLTE0ODgsNiArMTUxMSw5IEBACiAJaW50IGZlYXR1cmVzID0g
MDsKIAlpbnQgdmlkZW9fbnIgPSAtMTsgLyogZGVmYXVsdDogdXNlIG5leHQgYXZhaWxhYmxlIGRl
dmljZSAqLwogCWNoYXIgc2VyaWFsX251bWJlclszMF0sICpuYW1lOworI2lmZGVmIENPTkZJR19V
U0JfUFdDX0lOUFVUX0VWREVWCisJY2hhciAqcGh5cyA9IE5VTEw7CisjZW5kaWYKIAogCXZlbmRv
cl9pZCA9IGxlMTZfdG9fY3B1KHVkZXYtPmRlc2NyaXB0b3IuaWRWZW5kb3IpOwogCXByb2R1Y3Rf
aWQgPSBsZTE2X3RvX2NwdSh1ZGV2LT5kZXNjcmlwdG9yLmlkUHJvZHVjdCk7CkBAIC0xODEyLDYg
KzE4MzgsMzkgQEAKIAlwd2Nfc2V0X2xlZHMocGRldiwgMCwgMCk7CiAJcHdjX2NhbWVyYV9wb3dl
cihwZGV2LCAwKTsKIAorI2lmZGVmIENPTkZJR19VU0JfUFdDX0lOUFVUX0VWREVWCisJLyogcmVn
aXN0ZXIgd2ViY2FtIHNuYXBzaG90IGJ1dHRvbiBpbnB1dCBkZXZpY2UgKi8KKwlwZGV2LT5idXR0
b25fZGV2ID0gaW5wdXRfYWxsb2NhdGVfZGV2aWNlKCk7CisJaWYgKCFwZGV2LT5idXR0b25fZGV2
KSB7CisJCVBXQ19FUlJPUigiRXJyLCBpbnN1ZmZpY2llbnQgbWVtb3J5IGZvciB3ZWJjYW0gc25h
cHNob3QgYnV0dG9uIGRldmljZS4iKTsKKwkJcmV0dXJuIC1FTk9NRU07CisJfQorCisJcGRldi0+
YnV0dG9uX2Rldi0+bmFtZSA9ICJQV0Mgc25hcHNob3QgYnV0dG9uIjsKKwlwaHlzID0ga2FzcHJp
bnRmKEdGUF9LRVJORUwsInVzYi0lcy0lcyIsIHBkZXYtPnVkZXYtPmJ1cy0+YnVzX25hbWUsIHBk
ZXYtPnVkZXYtPmRldnBhdGgpOworCWlmICghcGh5cykgeworCQlpbnB1dF9mcmVlX2RldmljZShw
ZGV2LT5idXR0b25fZGV2KTsKKwkJcmV0dXJuIC1FTk9NRU07CisJfQorCXBkZXYtPmJ1dHRvbl9k
ZXYtPnBoeXMgPSBwaHlzOworCXVzYl90b19pbnB1dF9pZChwZGV2LT51ZGV2LCAmcGRldi0+YnV0
dG9uX2Rldi0+aWQpOworI2lmIExJTlVYX1ZFUlNJT05fQ09ERSA+PSBLRVJORUxfVkVSU0lPTigy
LCA2LCAyMikKKwlwZGV2LT5idXR0b25fZGV2LT5kZXYucGFyZW50ID0gJnBkZXYtPnVkZXYtPmRl
djsKKyNlbHNlCisJcGRldi0+YnV0dG9uX2Rldi0+Y2Rldi5kZXYgPSAmcGRldi0+dWRldi0+ZGV2
OworI2VuZGlmCisJcGRldi0+YnV0dG9uX2Rldi0+ZXZiaXRbMF0gPSBCSVRfTUFTSyhFVl9LRVkp
OworCXBkZXYtPmJ1dHRvbl9kZXYtPmtleWJpdFtCSVRfV09SRChCVE5fMCldID0gQklUX01BU0so
QlROXzApOworCisJcmMgPSBpbnB1dF9yZWdpc3Rlcl9kZXZpY2UocGRldi0+YnV0dG9uX2Rldik7
CisJaWYgKHJjKSB7CisJCWlucHV0X2ZyZWVfZGV2aWNlKHBkZXYtPmJ1dHRvbl9kZXYpOworCQlr
ZnJlZShwZGV2LT5idXR0b25fZGV2LT5waHlzKTsKKwkJcGRldi0+YnV0dG9uX2RldiA9IE5VTEw7
CisJCXJldHVybiByYzsKKwl9CisjZW5kaWYKKwogCXJldHVybiAwOwogCiBlcnJfdW5yZWc6Cg==

------=_Part_231257_25414223.1231568328114
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

--
video4linux-list mailing list
Unsubscribe mailto:video4linux-list-request@redhat.com?subject=unsubscribe
https://www.redhat.com/mailman/listinfo/video4linux-list
------=_Part_231257_25414223.1231568328114--
