Return-path: <video4linux-list-bounces@redhat.com>
Received: from mx2.redhat.com (mx2.redhat.com [10.255.15.25])
	by int-mx2.corp.redhat.com (8.13.1/8.13.1) with ESMTP id n5J0GaCb028508
	for <video4linux-list@redhat.com>; Thu, 18 Jun 2009 20:16:36 -0400
Received: from mail04.idc.renesas.com (mail.renesas.com [202.234.163.13])
	by mx2.redhat.com (8.13.8/8.13.8) with ESMTP id n5J0GMJA001389
	for <video4linux-list@redhat.com>; Thu, 18 Jun 2009 20:16:22 -0400
Date: Fri, 19 Jun 2009 09:16:14 +0900
From: Kuninori Morimoto <morimoto.kuninori@renesas.com>
In-reply-to: <Pine.LNX.4.64.0906181722460.7460@axis700.grange>
To: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Message-id: <uvdmt9iy9.wl%morimoto.kuninori@renesas.com>
MIME-version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-type: text/plain; charset=US-ASCII
References: <ud49domlx.wl%morimoto.kuninori@renesas.com>
	<Pine.LNX.4.64.0906091057120.4085@axis700.grange>
	<ubpoxoelq.wl%morimoto.kuninori@renesas.com>
	<Pine.LNX.4.64.0906181722460.7460@axis700.grange>
Cc: V4L-Linux <video4linux-list@redhat.com>
Subject: Re: [PATCH] soc-camera: fix missing clean up on error path
List-Unsubscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/mailman/private/video4linux-list>
List-Post: <mailto:video4linux-list@redhat.com>
List-Help: <mailto:video4linux-list-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/video4linux-list>,
	<mailto:video4linux-list-request@redhat.com?subject=subscribe>
Sender: video4linux-list-bounces@redhat.com
Errors-To: video4linux-list-bounces@redhat.com
List-ID: <video4linux-list@redhat.com>


Dear Guennadi

> If soc_camera_init_user_formats() fails in soc_camera_probe(), we have to call
> client's .remove() method to unregister the video device.
> 
> Reported-by: Kuninori Morimoto <morimoto.kuninori@renesas.com>
> Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
> ---
> Hi Morimoto-san
(snip)
> Could you please verify that this patch fixed your problem?

Thank you nice patch.
I tried this, but kernel stoped in boot.

soc_camera_video_stop is called from icd->ops->remove 
I think it have dead lock by icd->video_lock.

my kernel is from Paul's git and it's Makefile said 2.6.30-rc6

Best regards
--
Kuninori Morimoto
 

--
video4linux-list mailing list
Unsubscribe mailto:video4linux-list-request@redhat.com?subject=unsubscribe
https://www.redhat.com/mailman/listinfo/video4linux-list
